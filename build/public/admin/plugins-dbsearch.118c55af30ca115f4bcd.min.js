(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2373,7214,6503,6027,71,7927],{53858:(l,p,a)=>{l.exports=a(71297)},7927:(l,p,a)=>{"use strict";var d,r;d=[a(32230),a(7237),a(85233)],r=function(e,u,f){const s={};s.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?m(o,t):g(t)},s.success=function(t,o){s.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:o||5e3})},s.error=function(t,o){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}s.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:o||1e4})},s.remove=function(t){$("#alert_button_"+t).remove()};function g(t){app.parseAndTranslate("alert",t,function(o){let i=$("#"+t.alert_id);if(i.length)return m(i,t);i=o,i.fadeIn(200),u.get("toaster/tray").prepend(i),typeof t.closefn=="function"&&i.find("button").on("click",function(){return t.closefn(),c(i),!1}),t.timeout&&n(i,t),typeof t.clickfn=="function"&&i.addClass("pointer").on("click",function(h){$(h.target).is(".close")||t.clickfn(i,t),c(i)}),f.fire("action:alert.new",{alert:i,params:t})})}function m(t,o){t.find("strong").translateHtml(o.title),t.find("p").translateHtml(o.message),t.attr("class","alert alert-dismissable alert-"+o.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),o.timeout&&n(t,o),f.fire("action:alert.update",{alert:t,params:o}),t.off("click").removeClass("pointer"),typeof o.clickfn=="function"&&t.addClass("pointer").on("click",function(i){$(i.target).is(".close")||o.clickfn(),c(t)})}function c(t){t.fadeOut(500,function(){$(this).remove()})}function n(t,o){const i=o.timeout,h=setTimeout(function(){c(t),typeof o.timeoutfn=="function"&&o.timeoutfn(t,o)},i);t.attr("timeoutId",h),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(i+450)+"ms linear, background-color "+(i+450)+"ms ease-in"),t.addClass("animate"),f.fire("action:alert.animate",{alert:t,params:o})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return s}.apply(p,d),r!==void 0&&(l.exports=r)},7237:(l,p,a)=>{"use strict";var d;d=function(){const r={};return r.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,u){return $('[component="topic"][data-'+e+'="'+u+'"]')},post:function(e,u){return $('[component="post"][data-'+e+'="'+u+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,u){return $('[component="category/topic"][data-'+e+'="'+u+'"]')},"categories/category":function(e,u){return $('[component="categories/category"][data-'+e+'="'+u+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},r.get=function(){const e=Array.prototype.slice.call(arguments,1);return r.core[arguments[0]]&&e.length?r.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},r}.call(p,a,p,l),d!==void 0&&(l.exports=d)},71297:(l,p,a)=>{"use strict";var d,r;d=[a(7927)],r=function(e){var u={},f=0;$(window).on("action:ajaxify.end",function(c,n){n.url==="admin/plugins/dbsearch"&&ajaxify.data.working?s():g()}),u.init=function(){$("#save").on("click",function(){return $.post(config.relative_path+"/api/admin/plugins/dbsearch/save",{_csrf:$("#csrf_token").val(),topicLimit:$("#topicLimit").val(),postLimit:$("#postLimit").val(),excludeCategories:$("#exclude-categories").val()},function(c){typeof c=="string"&&e.success("Settings saved")}),!1}),$("#reindex").on("click",function(){return bootbox.confirm("Are you sure you want to reindex all content? This might take a while depending on the amount of content. During the operation the forum might slow down.",function(c){c&&socket.emit("admin.plugins.dbsearch.reindex",function(n){if(n)return e.error(n),g();e.success("Started indexing content! This might take a while. You can check the progress on this page."),s()})}),!1}),$("#clear-index").on("click",function(){return bootbox.confirm("Are you sure you want to clear all indices? This might take a while depending on the amount of content. During the operation the forum might slow down.",function(c){c&&socket.emit("admin.plugins.dbsearch.clearIndex",function(n){if(n)return e.error(n),g();e.success("Started clearing index! This might take a while. You can check the progress on this page."),s()})}),!1}),$("#changeLanguage").on("click",function(){var c=$("#indexLanguage").val();e.success('Changing index language to "'+c+'".'),socket.emit("admin.plugins.dbsearch.changeLanguage",c,function(n){if(n)return e.error(n);e.success("Search index language changed!")})})};function s(){g(),f=setInterval(m,1e3)}function g(){f&&(clearInterval(f),f=0)}function m(){socket.emit("admin.plugins.dbsearch.checkProgress",function(c,n){if(c)return g(),e.error(c);var t=parseInt(n.working,10);t?$("#reindex").attr("disabled",!0):(clearInterval(f),$("#reindex").removeAttr("disabled")),$("#work-in-progress").toggleClass("hidden",!t),n.topicsPercent>=100&&n.postsPercent>=100&&(n.topicsPercent=100,n.postsPercent=100),$("#topics-indexed").text(n.topicsIndexed),$("#posts-indexed").text(n.postsIndexed),$(".topic-progress").css("width",n.topicsPercent+"%").text(n.topicsPercent+"%"),$(".post-progress").css("width",n.postsPercent+"%").text(n.postsPercent+"%")})}return u}.apply(p,d),r!==void 0&&(l.exports=r)}}]);

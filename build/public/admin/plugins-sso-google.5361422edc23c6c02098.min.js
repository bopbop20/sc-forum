(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7926,7214,6503,6027,71,5655,7927],{63710:(A,R,a)=>{A.exports=a(60336)},7927:(A,R,a)=>{"use strict";var h,l;h=[a(32230),a(7237),a(85233)],l=function(s,f,r){const y={};y.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const e=$("#"+t.alert_id);e.length?u(e,t):v(t)},y.success=function(t,e){y.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},y.error=function(t,e){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}y.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},y.remove=function(t){$("#alert_button_"+t).remove()};function v(t){app.parseAndTranslate("alert",t,function(e){let o=$("#"+t.alert_id);if(o.length)return u(o,t);o=e,o.fadeIn(200),f.get("toaster/tray").prepend(o),typeof t.closefn=="function"&&o.find("button").on("click",function(){return t.closefn(),m(o),!1}),t.timeout&&n(o,t),typeof t.clickfn=="function"&&o.addClass("pointer").on("click",function(c){$(c.target).is(".close")||t.clickfn(o,t),m(o)}),r.fire("action:alert.new",{alert:o,params:t})})}function u(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&n(t,e),r.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),typeof e.clickfn=="function"&&t.addClass("pointer").on("click",function(o){$(o.target).is(".close")||e.clickfn(),m(t)})}function m(t){t.fadeOut(500,function(){$(this).remove()})}function n(t,e){const o=e.timeout,c=setTimeout(function(){m(t),typeof e.timeoutfn=="function"&&e.timeoutfn(t,e)},o);t.attr("timeoutId",c),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),r.fire("action:alert.animate",{alert:t,params:e})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return y}.apply(R,h),l!==void 0&&(A.exports=l)},7237:(A,R,a)=>{"use strict";var h;h=function(){const l={};return l.core={"topic/teaser":function(s){return s?$('[component="category/topic"][data-tid="'+s+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(s,f){return $('[component="topic"][data-'+s+'="'+f+'"]')},post:function(s,f){return $('[component="post"][data-'+s+'="'+f+'"]')},"post/content":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/content"]')},"post/header":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/header"]')},"post/anchor":function(s){return $('[component="post"][data-index="'+s+'"] [component="post/anchor"]')},"post/vote-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/vote-count"]')},"post/bookmark-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/bookmark-count"]')},"user/postcount":function(s){return $('[component="user/postcount"][data-uid="'+s+'"]')},"user/reputation":function(s){return $('[component="user/reputation"][data-uid="'+s+'"]')},"category/topic":function(s,f){return $('[component="category/topic"][data-'+s+'="'+f+'"]')},"categories/category":function(s,f){return $('[component="categories/category"][data-'+s+'="'+f+'"]')},"chat/message":function(s){return $('[component="chat/message"][data-mid="'+s+'"]')},"chat/message/body":function(s){return $('[component="chat/message"][data-mid="'+s+'"] [component="chat/message/body"]')},"chat/recent/room":function(s){return $('[component="chat/recent/room"][data-roomid="'+s+'"]')}},l.get=function(){const s=Array.prototype.slice.call(arguments,1);return l.core[arguments[0]]&&s.length?l.core[arguments[0]].apply(this,s):$('[component="'+arguments[0]+'"]')},l}.call(R,a,R,A),h!==void 0&&(A.exports=h)},18340:(A,R,a)=>{"use strict";var h,l;h=[a(85233),a(7927)],l=function(s,f){let r,y=[],v=0,u;function m(n,t){typeof n!="string"&&(n=$(n),n=n.data("type")||n.attr("type")||n.prop("tagName"));const e=r.plugins[n.toLowerCase()];if(e==null)return;const o=e[t];return typeof o=="function"?o:null}return u={deepClone:function(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n},createElement:function(n,t,e){const o=document.createElement(n);for(const c in t)t.hasOwnProperty(c)&&o.setAttribute(c,t[c]);return e&&o.appendChild(document.createTextNode(e)),o},initElement:function(n){const t=m(n,"init");t?.call(r,$(n))},destructElement:function(n){const t=m(n,"destruct");t?.call(r,$(n))},createElementOfType:function(n,t,e){let o;const c=m(n,"create");return c!=null?o=$(c.call(r,n,t,e)):(e==null&&(e={}),n!=null&&(e.type=n),o=$(u.createElement(t||"input",e))),o.data("type",n),u.initElement(o),o},cleanArray:function(n,t,e){const o=[];if(!t&&e)return n;for(let c=0;c<n.length;c+=1){let i=n[c];t&&(i===!!i?i=+i:i&&typeof i.trim=="function"&&(i=i.trim())),(e||i!=null&&i.length)&&o.push(i)}return o},isTrue:function(n){return n==="true"||+n==1},isFalse:function(n){return n==="false"||+n==0},readValue:function(n){let t=!u.isFalse(n.data("empty"));const e=!u.isFalse(n.data("trim")),o=n.data("split"),c=m(n,"get");let i;if(c!=null)return c.call(r,n,e,t);if(o!=null){t=u.isTrue(n.data("empty")),i=n.val();const p=i!=null&&i.split(o||",")||[];return u.cleanArray(p,e,t)}if(i=n.val(),e&&i!=null&&typeof i.trim=="function"&&(i=i.trim()),t||i!==void 0&&(i==null||i.length!==0))return i},fillField:function(n,t){const e=m(n,"set");let o=n.data("trim");if(o=o!=="false"&&+o!=0,e!=null)return e.call(r,n,t,o);t instanceof Array&&(t=t.join(n.data("split")||(o?", ":","))),o&&t&&typeof t.trim=="function"?(t=t.trim(),typeof t.toString=="function"&&(t=t.toString())):t!=null?(typeof t.toString=="function"&&(t=t.toString()),o&&(t=t.trim())):t="",t!==void 0&&n.val(t)},initFields:function(n){$("[data-key]",n).each(function(t,e){e=$(e);const o=m(e,"init"),c=e.data("key").split(".");let i=r.get();o?.call(r,e);for(let p=0;p<c.length;p+=1){const d=c[p];d&&i!=null&&(i=i[d])}u.fillField(e,i)})},registerReadyJobs:function(n){return v+=n,v},beforeReadyJobsDecreased:function(n){if(n==null&&(n=1),v>0&&(v-=n,v<=0)){for(let t=0;t<y.length;t+=1)y[t]();y=[]}},whenReady:function(n){v<=0?n():y.push(n)},serializeForm:function(n){const t=n.serializeObject();return n.find('input[type="checkbox"]').each(function(e,o){o=$(o),o.is(":checked")||(t[o.attr("name")]="off")}),n.find("select[multiple]").each(function(e,o){o=$(o),t[o.attr("name")]=JSON.stringify(o.val())}),t},persistSettings:function(n,t,e,o){t!=null&&t._!=null&&typeof t._!="string"&&(t=u.deepClone(t),t._=JSON.stringify(t._)),socket.emit("admin.settings.set",{hash:n,values:t},function(c){e&&(c?f.alert({title:"[[admin/admin:changes-not-saved]]",type:"danger",message:`[[admin/admin/changes-not-saved-message, ${c.message}]]`,timeout:5e3}):f.alert({title:"[[admin/admin:changes-saved]]",type:"success",message:"[[admin/admin:changes-saved-message]]",timeout:2500})),typeof o=="function"&&o(c)})},use:function(n){try{n._=JSON.parse(n._)}catch{}r.cfg=n}},r={helper:u,plugins:{},cfg:{},get:function(){return r.cfg!=null&&r.cfg._!==void 0?r.cfg._:r.cfg},registerPlugin:function(n,t){t==null?t=n.types:n.types=t,typeof n.use=="function"&&n.use.call(r);for(let e=0;e<t.length;e+=1){const o=t[e].toLowerCase();r.plugins[o]==null&&(r.plugins[o]=n)}},set:function(n,t,e,o,c){c==null&&(c=!0),u.whenReady(function(){u.use(t),u.initFields(e||"form"),u.persistSettings(n,t,c,o)})},sync:function(n,t,e){socket.emit("admin.settings.get",{hash:n},function(o,c){o?typeof e=="function"&&e(o):u.whenReady(function(){u.use(c),u.initFields(t||"form"),typeof e=="function"&&e()})})},persist:function(n,t,e,o){const c=[],i=$("[data-key]",t||"form").toArray();o==null&&(o=!0);for(let p=0;p<i.length;p+=1){const d=$(i[p]),k=u.readValue(d);let g=r.get();const C=d.data("key").split("."),E=C[C.length-1];if(C.length>1)for(let D=0;D<C.length-1;D+=1){const S=C[D];S&&g!=null&&(g=g[S])}g!=null?k!=null?g[E]=k:delete g[E]:c.push(d.data("key"))}c.length&&f.alert({title:"Attributes Not Saved",message:"'"+c.join(", ")+"' could not be saved. Please contact the plugin-author!",type:"danger",timeout:5e3}),u.persistSettings(n,r.cfg,o,e)},load:function(n,t,e){e=e||function(){};const o=t.attr("data-socket-get");socket.emit(o||"admin.settings.get",{hash:n},function(c,i){if(c)return e(c);$(t).find("select[multiple]").each(function(d,k){const g=$(k).attr("name");if(g&&i.hasOwnProperty(g))try{i[g]=JSON.parse(i[g])}catch{}}),ajaxify.data[o?n:"settings"]=i,u.whenReady(function(){$(t).find("[data-sorted-list]").each(function(d,k){m(k,"get").call(r,$(k),n)})}),$(t).deserialize(i),$(t).find('input[type="checkbox"]').each(function(){$(this).parents(".mdl-switch").toggleClass("is-checked",$(this).is(":checked"))}),s.fire("action:admin.settingsLoaded"),$(t).on("change","input, select, textarea",function(){app.flags=app.flags||{},app.flags._unsaved=!0});const p=document.getElementById("save");p&&a.e(2441).then(function(){var d=[a(42441)];(function(k){k.bind("ctrl+s",function(g){p.click(),g.preventDefault()})}).apply(null,d)}).catch(a.oe),e(null,i)})},save:function(n,t,e){t=$(t);const o=t.get(0).elements;if(r.check(o)&&t.length){const i=u.serializeForm(t);u.whenReady(function(){const d=t.find("[data-sorted-list]");d.length&&d.each((k,g)=>{m(g,"set").call(r,$(g),i)})});const p=t.attr("data-socket-set");socket.emit(p||"admin.settings.set",{hash:n,values:i},function(d){app.flags._unsaved=!1,ajaxify.data[p?n:"settings"]=i,typeof e=="function"?e(d):d?f.alert({title:"[[admin/admin:changes-not-saved]]",message:`[[admin/admin:changes-not-saved-message, ${d.message}]]`,type:"error",timeout:2500}):f.alert({title:"[[admin/admin:changes-saved]]",type:"success",timeout:2500})})}},check:function(n){const t=e=>{const o=e.target.closest(".form-group");o&&o.classList.add("has-error"),e.target.removeEventListener("invalid",t)};return Array.prototype.map.call(n,e=>{const o=e.closest(".form-group");return o&&o.classList.remove("has-error"),e.addEventListener("invalid",t),e.reportValidity()}).every(Boolean)}},u.registerReadyJobs(1),Promise.all([a.e(6177),a.e(2526),a.e(6069)]).then(function(){var n=[a(16631),a(73143),a(7448),a(15101),a(846),a(88839),a(53411),a(66370)];(function(){for(let t=0;t<arguments.length;t+=1)r.registerPlugin(arguments[t]);u.beforeReadyJobsDecreased()}).apply(null,n)}).catch(a.oe),r}.apply(R,h),l!==void 0&&(A.exports=l)},60336:(A,R,a)=>{"use strict";var h,l;h=[a(18340)],l=function(s){var f={};return f.init=function(){s.load("sso-google",$(".sso-google-settings")),$("#save").on("click",function(){s.save("sso-google",$(".sso-google-settings"),function(){app.alert({type:"success",alert_id:"sso-google-saved",title:"Settings Saved",message:"Please rebuild and restart your NodeBB to apply these settings, or click on this alert to do so.",clickfn:function(){socket.emit("admin.reload")}})})}),$('a[data-action="help-credentials"]').on("click",function(){return bootbox.alert({title:"Where is the Credentials page?",message:'<img src="'+config.relative_path+'/plugins/nodebb-plugin-sso-google/images/credentials.png" />'}),!1})},f}.apply(R,h),l!==void 0&&(A.exports=l)}}]);

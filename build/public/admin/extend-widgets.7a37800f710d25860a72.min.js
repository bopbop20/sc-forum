(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[4834,7214,6503,6027,71,7927],{8196:(b,y,f)=>{"use strict";var v,h;v=[f(31369),f(7927),f(62526),f(87285),f(66709),f(84414)],h=function(r,a){const n={};n.init=function(){$("#widgets .nav-pills .dropdown-menu a").on("click",function(t){const s=$(this);$("#widgets .tab-pane").removeClass("active");const o=s.attr("data-template");return $('#widgets .tab-pane[data-template="'+o+'"]').addClass("active"),$("#widgets .selected-template").text(o),$("#widgets .nav-pills .dropdown").trigger("click"),t.preventDefault(),!1}),$("#widget-selector").on("change",function(){$(".available-widgets [data-widget]").addClass("hide"),$('.available-widgets [data-widget="'+$(this).val()+'"]').removeClass("hide")}),$("#widget-selector").trigger("change"),c(),m()};function e(){$('[data-location="drafts"]').insertAfter($('[data-location="drafts"]').closest(".tab-content")),$("#widgets .available-widgets .widget-panel").draggable({helper:function(s){return $(s.target).parents(".widget-panel").clone()},distance:10,connectToSortable:".widget-area"}),$("#widgets .available-containers .containers > [data-container-html]").draggable({helper:function(s){let o=$(s.target);return o=o.attr("data-container-html")?o:o.parents("[data-container-html]"),o.clone().addClass("block").width(o.width()).css("opacity","0.5")},distance:10}).each(function(){$(this).attr("data-container-html",$(this).attr("data-container-html").replace(/\\\{([\s\S]*?)\\\}/g,"{$1}"))}),$("#widgets .widget-area").sortable({update:function(s,o){i(o.item),d(o.item)},connectWith:"div"}).on("click",".delete-widget",function(){const s=$(this).parents(".widget-panel");r.confirm("[[admin/extend/widgets:alert.confirm-delete]]",function(o){o&&s.remove()})}).on("mouseup","> .panel > .panel-heading",function(s){$(this).parent().is(".ui-sortable-helper")||$(s.target).closest(".delete-widget").length||$(this).parent().children(".panel-body").toggleClass("hidden")}),$("#save").on("click",t);function t(){const s=[];$("#widgets [data-template][data-location]").each(function(o,l){l=$(l);const p=l.attr("data-template"),C=l.attr("data-location"),w=l.children(".widget-area"),A=[];w.find(".widget-panel[data-widget]").each(function(){const u={},g=$(this).find("form").serializeArray();for(const _ in g)g.hasOwnProperty(_)&&g[_].name&&(u[g[_].name]?(Array.isArray(u[g[_].name])||(u[g[_].name]=[u[g[_].name]]),u[g[_].name].push(g[_].value)):u[g[_].name]=g[_].value);A.push({widget:$(this).attr("data-widget"),data:u})}),s.push({template:p,location:C,widgets:A})}),socket.emit("admin.widgets.set",s,function(o){o&&a.error(o),a.alert({alert_id:"admin:widgets",type:"success",title:"[[admin/extend/widgets:alert.updated]]",message:"[[admin/extend/widgets:alert.update-success]]",timeout:2500})})}$(".color-selector").on("click",".btn",function(){const s=$(this),o=s.parents(".color-selector"),l=o.parents("[data-container-html]"),p=[];o.children().each(function(){p.push($(this).attr("data-class"))}),l.removeClass(p.join(" ")).addClass(s.attr("data-class")),l.attr("data-container-html",l.attr("data-container-html").replace(/class="[a-zA-Z0-9-\s]+"/,'class="'+l[0].className.replace(" pointer ui-draggable ui-draggable-handle","")+'"'))})}function i(t){const s=new Date().getFullYear();t.find(".date-selector").datepicker({changeMonth:!0,changeYear:!0,yearRange:s+":"+(s+100)})}function d(t){t.hasClass("block")||t.addClass("block").css("width","").css("height","").droppable({accept:"[data-container-html]",drop:function(s,o){const l=$(this);l.find(".panel-body .container-html").val(o.draggable.attr("data-container-html")),l.find(".panel-body").removeClass("hidden")},hoverClass:"panel-info"}).children(".panel-heading").append('<div class="pull-right pointer"><span class="delete-widget"><i class="fa fa-times-circle"></i></span></div><div class="pull-left pointer"><span class="toggle-widget"><i class="fa fa-chevron-circle-down"></i></span>&nbsp;</div>').children("small").html("")}function c(){function t(s,o){if(o.title){const l=s.find(".panel-heading strong");l.text(l.text()+" - "+o.title)}return s.find("input, textarea, select").each(function(){const l=$(this),p=o[l.attr("name")];l.attr("type")==="checkbox"?l.prop("checked",!!p).trigger("change"):l.val(p)}),s}$.get(config.relative_path+"/api/admin/extend/widgets",function(s){const o=s.areas;for(let l=0;l<o.length;l+=1){const p=o[l],C=$('#widgets .area[data-template="'+p.template+'"][data-location="'+p.location+'"]').find(".widget-area");C.html("");for(let w=0;w<p.data.length;w+=1){const A=p.data[w],u=$('.available-widgets [data-widget="'+A.widget+'"]').clone(!0).removeClass("hide");C.append(t(u,A.data)),d(u),i(u)}}e()})}function m(){const t=$('[component="clone"]'),s=$('[component="clone/button"]');t.find(".dropdown-menu li").on("click",function(){const o=$(this).find("a").text();s.translateHtml("[[admin/extend/widgets:clone-from]] <strong>"+o+"</strong>"),s.attr("data-template",o)}),s.on("click",function(){const o=s.attr("data-template");if(!o)return a.error("[[admin/extend/widgets:error.select-clone]]");const l=$("#active-widgets .active.tab-pane[data-template] .area"),p=$('#active-widgets .tab-pane[data-template="'+o+'"] .area'),C=l.map(function(){return $(this).attr("data-location")}).get(),w=p.map(function(){const u=$(this).attr("data-location");return C.indexOf(u)!==-1?u:void 0}).get().filter(function(u){return u});function A(u){$('#active-widgets .tab-pane[data-template="'+o+'"] [data-location="'+u+'"]').each(function(){$(this).find("[data-widget]").each(function(){const g=$(this).clone(!0);$('#active-widgets .active.tab-pane[data-template]:not([data-template="global"]) [data-location="'+u+'"] .widget-area').append(g)})})}for(let u=0,g=w.length;u<g;u++){const _=w[u];A(_)}a.success("[[admin/extend/widgets:alert.clone-success]]")})}return n}.apply(y,v),h!==void 0&&(b.exports=h)},7927:(b,y,f)=>{"use strict";var v,h;v=[f(32230),f(7237),f(85233)],h=function(r,a,n){const e={};e.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const s=$("#"+t.alert_id);s.length?d(s,t):i(t)},e.success=function(t,s){e.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:s||5e3})},e.error=function(t,s){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}e.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:s||1e4})},e.remove=function(t){$("#alert_button_"+t).remove()};function i(t){app.parseAndTranslate("alert",t,function(s){let o=$("#"+t.alert_id);if(o.length)return d(o,t);o=s,o.fadeIn(200),a.get("toaster/tray").prepend(o),typeof t.closefn=="function"&&o.find("button").on("click",function(){return t.closefn(),c(o),!1}),t.timeout&&m(o,t),typeof t.clickfn=="function"&&o.addClass("pointer").on("click",function(l){$(l.target).is(".close")||t.clickfn(o,t),c(o)}),n.fire("action:alert.new",{alert:o,params:t})})}function d(t,s){t.find("strong").translateHtml(s.title),t.find("p").translateHtml(s.message),t.attr("class","alert alert-dismissable alert-"+s.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),s.timeout&&m(t,s),n.fire("action:alert.update",{alert:t,params:s}),t.off("click").removeClass("pointer"),typeof s.clickfn=="function"&&t.addClass("pointer").on("click",function(o){$(o.target).is(".close")||s.clickfn(),c(t)})}function c(t){t.fadeOut(500,function(){$(this).remove()})}function m(t,s){const o=s.timeout,l=setTimeout(function(){c(t),typeof s.timeoutfn=="function"&&s.timeoutfn(t,s)},o);t.attr("timeoutId",l),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),n.fire("action:alert.animate",{alert:t,params:s})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return e}.apply(y,v),h!==void 0&&(b.exports=h)},7237:(b,y,f)=>{"use strict";var v;v=function(){const h={};return h.core={"topic/teaser":function(r){return r?$('[component="category/topic"][data-tid="'+r+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(r,a){return $('[component="topic"][data-'+r+'="'+a+'"]')},post:function(r,a){return $('[component="post"][data-'+r+'="'+a+'"]')},"post/content":function(r){return $('[component="post"][data-pid="'+r+'"] [component="post/content"]')},"post/header":function(r){return $('[component="post"][data-pid="'+r+'"] [component="post/header"]')},"post/anchor":function(r){return $('[component="post"][data-index="'+r+'"] [component="post/anchor"]')},"post/vote-count":function(r){return $('[component="post"][data-pid="'+r+'"] [component="post/vote-count"]')},"post/bookmark-count":function(r){return $('[component="post"][data-pid="'+r+'"] [component="post/bookmark-count"]')},"user/postcount":function(r){return $('[component="user/postcount"][data-uid="'+r+'"]')},"user/reputation":function(r){return $('[component="user/reputation"][data-uid="'+r+'"]')},"category/topic":function(r,a){return $('[component="category/topic"][data-'+r+'="'+a+'"]')},"categories/category":function(r,a){return $('[component="categories/category"][data-'+r+'="'+a+'"]')},"chat/message":function(r){return $('[component="chat/message"][data-mid="'+r+'"]')},"chat/message/body":function(r){return $('[component="chat/message"][data-mid="'+r+'"] [component="chat/message/body"]')},"chat/recent/room":function(r){return $('[component="chat/recent/room"][data-roomid="'+r+'"]')}},h.get=function(){const r=Array.prototype.slice.call(arguments,1);return h.core[arguments[0]]&&r.length?h.core[arguments[0]].apply(this,r):$('[component="'+arguments[0]+'"]')},h}.call(y,f,y,b),v!==void 0&&(b.exports=v)},66709:(b,y,f)=>{var v,h,r;/*!
* jQuery UI Droppable 1.13.2
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/(function(a){"use strict";h=[f(19755),f(87285),f(66177),f(85592),f(26891)],v=a,r=typeof v=="function"?v.apply(y,h):v,r!==void 0&&(b.exports=r)})(function(a){"use strict";return a.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var n,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=typeof i=="function"?i:function(d){return d.is(i)},this.proportions=function(){if(arguments.length)n=arguments[0];else return n||(n={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(n){a.ui.ddmanager.droppables[n]=a.ui.ddmanager.droppables[n]||[],a.ui.ddmanager.droppables[n].push(this)},_splice:function(n){for(var e=0;e<n.length;e++)n[e]===this&&n.splice(e,1)},_destroy:function(){var n=a.ui.ddmanager.droppables[this.options.scope];this._splice(n)},_setOption:function(n,e){if(n==="accept")this.accept=typeof e=="function"?e:function(d){return d.is(e)};else if(n==="scope"){var i=a.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(e)}this._super(n,e)},_activate:function(n){var e=a.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",n,this.ui(e))},_deactivate:function(n){var e=a.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",n,this.ui(e))},_over:function(n){var e=a.ui.ddmanager.current;!e||(e.currentItem||e.element)[0]===this.element[0]||this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",n,this.ui(e)))},_out:function(n){var e=a.ui.ddmanager.current;!e||(e.currentItem||e.element)[0]===this.element[0]||this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",n,this.ui(e)))},_drop:function(n,e){var i=e||a.ui.ddmanager.current,d=!1;return!i||(i.currentItem||i.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");if(c.options.greedy&&!c.options.disabled&&c.options.scope===i.options.scope&&c.accept.call(c.element[0],i.currentItem||i.element)&&a.ui.intersect(i,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,n))return d=!0,!1}),d)?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",n,this.ui(i)),this.element):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),a.ui.intersect=function(){function n(e,i,d){return e>=i&&e<i+d}return function(e,i,d,c){if(!i.offset)return!1;var m=(e.positionAbs||e.position.absolute).left+e.margins.left,t=(e.positionAbs||e.position.absolute).top+e.margins.top,s=m+e.helperProportions.width,o=t+e.helperProportions.height,l=i.offset.left,p=i.offset.top,C=l+i.proportions().width,w=p+i.proportions().height;switch(d){case"fit":return l<=m&&s<=C&&p<=t&&o<=w;case"intersect":return l<m+e.helperProportions.width/2&&s-e.helperProportions.width/2<C&&p<t+e.helperProportions.height/2&&o-e.helperProportions.height/2<w;case"pointer":return n(c.pageY,p,i.proportions().height)&&n(c.pageX,l,i.proportions().width);case"touch":return(t>=p&&t<=w||o>=p&&o<=w||t<p&&o>w)&&(m>=l&&m<=C||s>=l&&s<=C||m<l&&s>C);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(n,e){var i,d,c=a.ui.ddmanager.droppables[n.options.scope]||[],m=e?e.type:null,t=(n.currentItem||n.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<c.length;i++)if(!(c[i].options.disabled||n&&!c[i].accept.call(c[i].element[0],n.currentItem||n.element))){for(d=0;d<t.length;d++)if(t[d]===c[i].element[0]){c[i].proportions().height=0;continue t}c[i].visible=c[i].element.css("display")!=="none",c[i].visible&&(m==="mousedown"&&c[i]._activate.call(c[i],e),c[i].offset=c[i].element.offset(),c[i].proportions({width:c[i].element[0].offsetWidth,height:c[i].element[0].offsetHeight}))}},drop:function(n,e){var i=!1;return a.each((a.ui.ddmanager.droppables[n.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(n,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),i},dragStart:function(n,e){n.element.parentsUntil("body").on("scroll.droppable",function(){n.options.refreshPositions||a.ui.ddmanager.prepareOffsets(n,e)})},drag:function(n,e){n.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(n,e),a.each(a.ui.ddmanager.droppables[n.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var i,d,c,m=a.ui.intersect(n,this,this.options.tolerance,e),t=!m&&this.isover?"isout":m&&!this.isover?"isover":null;t&&(this.options.greedy&&(d=this.options.scope,c=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===d}),c.length&&(i=a(c[0]).droppable("instance"),i.greedyChild=t==="isover")),i&&t==="isover"&&(i.isover=!1,i.isout=!0,i._out.call(i,e)),this[t]=!0,this[t==="isout"?"isover":"isout"]=!1,this[t==="isover"?"_over":"_out"].call(this,e),i&&t==="isout"&&(i.isout=!1,i.isover=!0,i._over.call(i,e)))}})},dragStop:function(n,e){n.element.parentsUntil("body").off("scroll.droppable"),n.options.refreshPositions||a.ui.ddmanager.prepareOffsets(n,e)}},a.uiBackCompat!==!1&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),a.ui.droppable})}}]);

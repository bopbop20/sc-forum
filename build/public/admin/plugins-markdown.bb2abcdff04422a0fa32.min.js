(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[3701,7214,6503,6027,71,5655,7927],{14490:(A,v,u)=>{A.exports=u(3343)},7927:(A,v,u)=>{"use strict";var k,l;k=[u(32230),u(7237),u(85233)],l=function(s,d,a){const p={};p.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const e=$("#"+t.alert_id);e.length?r(e,t):y(t)},p.success=function(t,e){p.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},p.error=function(t,e){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}p.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},p.remove=function(t){$("#alert_button_"+t).remove()};function y(t){app.parseAndTranslate("alert",t,function(e){let o=$("#"+t.alert_id);if(o.length)return r(o,t);o=e,o.fadeIn(200),d.get("toaster/tray").prepend(o),typeof t.closefn=="function"&&o.find("button").on("click",function(){return t.closefn(),f(o),!1}),t.timeout&&n(o,t),typeof t.clickfn=="function"&&o.addClass("pointer").on("click",function(c){$(c.target).is(".close")||t.clickfn(o,t),f(o)}),a.fire("action:alert.new",{alert:o,params:t})})}function r(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&n(t,e),a.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),typeof e.clickfn=="function"&&t.addClass("pointer").on("click",function(o){$(o.target).is(".close")||e.clickfn(),f(t)})}function f(t){t.fadeOut(500,function(){$(this).remove()})}function n(t,e){const o=e.timeout,c=setTimeout(function(){f(t),typeof e.timeoutfn=="function"&&e.timeoutfn(t,e)},o);t.attr("timeoutId",c),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),a.fire("action:alert.animate",{alert:t,params:e})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return p}.apply(v,k),l!==void 0&&(A.exports=l)},7237:(A,v,u)=>{"use strict";var k;k=function(){const l={};return l.core={"topic/teaser":function(s){return s?$('[component="category/topic"][data-tid="'+s+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(s,d){return $('[component="topic"][data-'+s+'="'+d+'"]')},post:function(s,d){return $('[component="post"][data-'+s+'="'+d+'"]')},"post/content":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/content"]')},"post/header":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/header"]')},"post/anchor":function(s){return $('[component="post"][data-index="'+s+'"] [component="post/anchor"]')},"post/vote-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/vote-count"]')},"post/bookmark-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/bookmark-count"]')},"user/postcount":function(s){return $('[component="user/postcount"][data-uid="'+s+'"]')},"user/reputation":function(s){return $('[component="user/reputation"][data-uid="'+s+'"]')},"category/topic":function(s,d){return $('[component="category/topic"][data-'+s+'="'+d+'"]')},"categories/category":function(s,d){return $('[component="categories/category"][data-'+s+'="'+d+'"]')},"chat/message":function(s){return $('[component="chat/message"][data-mid="'+s+'"]')},"chat/message/body":function(s){return $('[component="chat/message"][data-mid="'+s+'"] [component="chat/message/body"]')},"chat/recent/room":function(s){return $('[component="chat/recent/room"][data-roomid="'+s+'"]')}},l.get=function(){const s=Array.prototype.slice.call(arguments,1);return l.core[arguments[0]]&&s.length?l.core[arguments[0]].apply(this,s):$('[component="'+arguments[0]+'"]')},l}.call(v,u,v,A),k!==void 0&&(A.exports=k)},18340:(A,v,u)=>{"use strict";var k,l;k=[u(85233),u(7927)],l=function(s,d){let a,p=[],y=0,r;function f(n,t){typeof n!="string"&&(n=$(n),n=n.data("type")||n.attr("type")||n.prop("tagName"));const e=a.plugins[n.toLowerCase()];if(e==null)return;const o=e[t];return typeof o=="function"?o:null}return r={deepClone:function(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n},createElement:function(n,t,e){const o=document.createElement(n);for(const c in t)t.hasOwnProperty(c)&&o.setAttribute(c,t[c]);return e&&o.appendChild(document.createTextNode(e)),o},initElement:function(n){const t=f(n,"init");t?.call(a,$(n))},destructElement:function(n){const t=f(n,"destruct");t?.call(a,$(n))},createElementOfType:function(n,t,e){let o;const c=f(n,"create");return c!=null?o=$(c.call(a,n,t,e)):(e==null&&(e={}),n!=null&&(e.type=n),o=$(r.createElement(t||"input",e))),o.data("type",n),r.initElement(o),o},cleanArray:function(n,t,e){const o=[];if(!t&&e)return n;for(let c=0;c<n.length;c+=1){let i=n[c];t&&(i===!!i?i=+i:i&&typeof i.trim=="function"&&(i=i.trim())),(e||i!=null&&i.length)&&o.push(i)}return o},isTrue:function(n){return n==="true"||+n==1},isFalse:function(n){return n==="false"||+n==0},readValue:function(n){let t=!r.isFalse(n.data("empty"));const e=!r.isFalse(n.data("trim")),o=n.data("split"),c=f(n,"get");let i;if(c!=null)return c.call(a,n,e,t);if(o!=null){t=r.isTrue(n.data("empty")),i=n.val();const m=i!=null&&i.split(o||",")||[];return r.cleanArray(m,e,t)}if(i=n.val(),e&&i!=null&&typeof i.trim=="function"&&(i=i.trim()),t||i!==void 0&&(i==null||i.length!==0))return i},fillField:function(n,t){const e=f(n,"set");let o=n.data("trim");if(o=o!=="false"&&+o!=0,e!=null)return e.call(a,n,t,o);t instanceof Array&&(t=t.join(n.data("split")||(o?", ":","))),o&&t&&typeof t.trim=="function"?(t=t.trim(),typeof t.toString=="function"&&(t=t.toString())):t!=null?(typeof t.toString=="function"&&(t=t.toString()),o&&(t=t.trim())):t="",t!==void 0&&n.val(t)},initFields:function(n){$("[data-key]",n).each(function(t,e){e=$(e);const o=f(e,"init"),c=e.data("key").split(".");let i=a.get();o?.call(a,e);for(let m=0;m<c.length;m+=1){const g=c[m];g&&i!=null&&(i=i[g])}r.fillField(e,i)})},registerReadyJobs:function(n){return y+=n,y},beforeReadyJobsDecreased:function(n){if(n==null&&(n=1),y>0&&(y-=n,y<=0)){for(let t=0;t<p.length;t+=1)p[t]();p=[]}},whenReady:function(n){y<=0?n():p.push(n)},serializeForm:function(n){const t=n.serializeObject();return n.find('input[type="checkbox"]').each(function(e,o){o=$(o),o.is(":checked")||(t[o.attr("name")]="off")}),n.find("select[multiple]").each(function(e,o){o=$(o),t[o.attr("name")]=JSON.stringify(o.val())}),t},persistSettings:function(n,t,e,o){t!=null&&t._!=null&&typeof t._!="string"&&(t=r.deepClone(t),t._=JSON.stringify(t._)),socket.emit("admin.settings.set",{hash:n,values:t},function(c){e&&(c?d.alert({title:"[[admin/admin:changes-not-saved]]",type:"danger",message:`[[admin/admin/changes-not-saved-message, ${c.message}]]`,timeout:5e3}):d.alert({title:"[[admin/admin:changes-saved]]",type:"success",message:"[[admin/admin:changes-saved-message]]",timeout:2500})),typeof o=="function"&&o(c)})},use:function(n){try{n._=JSON.parse(n._)}catch{}a.cfg=n}},a={helper:r,plugins:{},cfg:{},get:function(){return a.cfg!=null&&a.cfg._!==void 0?a.cfg._:a.cfg},registerPlugin:function(n,t){t==null?t=n.types:n.types=t,typeof n.use=="function"&&n.use.call(a);for(let e=0;e<t.length;e+=1){const o=t[e].toLowerCase();a.plugins[o]==null&&(a.plugins[o]=n)}},set:function(n,t,e,o,c){c==null&&(c=!0),r.whenReady(function(){r.use(t),r.initFields(e||"form"),r.persistSettings(n,t,c,o)})},sync:function(n,t,e){socket.emit("admin.settings.get",{hash:n},function(o,c){o?typeof e=="function"&&e(o):r.whenReady(function(){r.use(c),r.initFields(t||"form"),typeof e=="function"&&e()})})},persist:function(n,t,e,o){const c=[],i=$("[data-key]",t||"form").toArray();o==null&&(o=!0);for(let m=0;m<i.length;m+=1){const g=$(i[m]),R=r.readValue(g);let h=a.get();const C=g.data("key").split("."),D=C[C.length-1];if(C.length>1)for(let x=0;x<C.length-1;x+=1){const E=C[x];E&&h!=null&&(h=h[E])}h!=null?R!=null?h[D]=R:delete h[D]:c.push(g.data("key"))}c.length&&d.alert({title:"Attributes Not Saved",message:"'"+c.join(", ")+"' could not be saved. Please contact the plugin-author!",type:"danger",timeout:5e3}),r.persistSettings(n,a.cfg,o,e)},load:function(n,t,e){e=e||function(){};const o=t.attr("data-socket-get");socket.emit(o||"admin.settings.get",{hash:n},function(c,i){if(c)return e(c);$(t).find("select[multiple]").each(function(g,R){const h=$(R).attr("name");if(h&&i.hasOwnProperty(h))try{i[h]=JSON.parse(i[h])}catch{}}),ajaxify.data[o?n:"settings"]=i,r.whenReady(function(){$(t).find("[data-sorted-list]").each(function(g,R){f(R,"get").call(a,$(R),n)})}),$(t).deserialize(i),$(t).find('input[type="checkbox"]').each(function(){$(this).parents(".mdl-switch").toggleClass("is-checked",$(this).is(":checked"))}),s.fire("action:admin.settingsLoaded"),$(t).on("change","input, select, textarea",function(){app.flags=app.flags||{},app.flags._unsaved=!0});const m=document.getElementById("save");m&&u.e(2441).then(function(){var g=[u(42441)];(function(R){R.bind("ctrl+s",function(h){m.click(),h.preventDefault()})}).apply(null,g)}).catch(u.oe),e(null,i)})},save:function(n,t,e){t=$(t);const o=t.get(0).elements;if(a.check(o)&&t.length){const i=r.serializeForm(t);r.whenReady(function(){const g=t.find("[data-sorted-list]");g.length&&g.each((R,h)=>{f(h,"set").call(a,$(h),i)})});const m=t.attr("data-socket-set");socket.emit(m||"admin.settings.set",{hash:n,values:i},function(g){app.flags._unsaved=!1,ajaxify.data[m?n:"settings"]=i,typeof e=="function"?e(g):g?d.alert({title:"[[admin/admin:changes-not-saved]]",message:`[[admin/admin:changes-not-saved-message, ${g.message}]]`,type:"error",timeout:2500}):d.alert({title:"[[admin/admin:changes-saved]]",type:"success",timeout:2500})})}},check:function(n){const t=e=>{const o=e.target.closest(".form-group");o&&o.classList.add("has-error"),e.target.removeEventListener("invalid",t)};return Array.prototype.map.call(n,e=>{const o=e.closest(".form-group");return o&&o.classList.remove("has-error"),e.addEventListener("invalid",t),e.reportValidity()}).every(Boolean)}},r.registerReadyJobs(1),Promise.all([u.e(6177),u.e(2526),u.e(6069)]).then(function(){var n=[u(16631),u(73143),u(7448),u(15101),u(846),u(88839),u(53411),u(66370)];(function(){for(let t=0;t<arguments.length;t+=1)a.registerPlugin(arguments[t]);r.beforeReadyJobsDecreased()}).apply(null,n)}).catch(u.oe),a}.apply(v,k),l!==void 0&&(A.exports=l)},3343:(A,v,u)=>{"use strict";var k,l;k=[u(18340),u(7927)],l=function(s,d){var a={};return a.init=function(){s.load("markdown",$(".markdown-settings"),function(p,y){p&&(y={});var r={html:!1,langPrefix:"language-",highlight:!0,highlightLinesLanguageList:[],highlightTheme:"default.css",probe:!0,probeCacheSize:256,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!1,externalBlank:!1,nofollow:!0,allowRTLO:!1,checkboxes:!0,multimdTables:!0};for(var f in r)y.hasOwnProperty(f)||(typeof r[f]=="boolean"?$("#"+f).prop("checked",r[f]):$("#"+f).val(r[f]))}),$("#save").on("click",function(){s.save("markdown",$(".markdown-settings"),function(){d.alert({type:"success",alert_id:"markdown-saved",title:"Reload Required",message:"Please reload your NodeBB to have your changes take effect",clickfn:function(){socket.emit("admin.reload")}})})}),$("#html").on("change",function(){var p=$(this);p.prop("checked")&&bootbox.confirm("Are you sure you wish to disable sanitisation of HTML? <strong>Doing so compromises your forum&apos;s client-side security, and allows malicious users to execute arbitrary javascript on other users&apos; browsers.</strong>",function(y){y||p.prop("checked",!1)})})},a}.apply(v,k),l!==void 0&&(A.exports=l)}}]);

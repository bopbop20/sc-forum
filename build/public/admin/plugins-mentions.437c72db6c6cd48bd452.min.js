(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[163,7214,6503,6027,71,5655,7927],{97898:(A,k,r)=>{A.exports=r(19934)},7927:(A,k,r)=>{"use strict";var y,f;y=[r(32230),r(7237),r(85233)],f=function(s,l,a){const m={};m.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const e=$("#"+t.alert_id);e.length?u(e,t):C(t)},m.success=function(t,e){m.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},m.error=function(t,e){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}m.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},m.remove=function(t){$("#alert_button_"+t).remove()};function C(t){app.parseAndTranslate("alert",t,function(e){let i=$("#"+t.alert_id);if(i.length)return u(i,t);i=e,i.fadeIn(200),l.get("toaster/tray").prepend(i),typeof t.closefn=="function"&&i.find("button").on("click",function(){return t.closefn(),h(i),!1}),t.timeout&&n(i,t),typeof t.clickfn=="function"&&i.addClass("pointer").on("click",function(c){$(c.target).is(".close")||t.clickfn(i,t),h(i)}),a.fire("action:alert.new",{alert:i,params:t})})}function u(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&n(t,e),a.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),typeof e.clickfn=="function"&&t.addClass("pointer").on("click",function(i){$(i.target).is(".close")||e.clickfn(),h(t)})}function h(t){t.fadeOut(500,function(){$(this).remove()})}function n(t,e){const i=e.timeout,c=setTimeout(function(){h(t),typeof e.timeoutfn=="function"&&e.timeoutfn(t,e)},i);t.attr("timeoutId",c),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(i+450)+"ms linear, background-color "+(i+450)+"ms ease-in"),t.addClass("animate"),a.fire("action:alert.animate",{alert:t,params:e})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return m}.apply(k,y),f!==void 0&&(A.exports=f)},7237:(A,k,r)=>{"use strict";var y;y=function(){const f={};return f.core={"topic/teaser":function(s){return s?$('[component="category/topic"][data-tid="'+s+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(s,l){return $('[component="topic"][data-'+s+'="'+l+'"]')},post:function(s,l){return $('[component="post"][data-'+s+'="'+l+'"]')},"post/content":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/content"]')},"post/header":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/header"]')},"post/anchor":function(s){return $('[component="post"][data-index="'+s+'"] [component="post/anchor"]')},"post/vote-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/vote-count"]')},"post/bookmark-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/bookmark-count"]')},"user/postcount":function(s){return $('[component="user/postcount"][data-uid="'+s+'"]')},"user/reputation":function(s){return $('[component="user/reputation"][data-uid="'+s+'"]')},"category/topic":function(s,l){return $('[component="category/topic"][data-'+s+'="'+l+'"]')},"categories/category":function(s,l){return $('[component="categories/category"][data-'+s+'="'+l+'"]')},"chat/message":function(s){return $('[component="chat/message"][data-mid="'+s+'"]')},"chat/message/body":function(s){return $('[component="chat/message"][data-mid="'+s+'"] [component="chat/message/body"]')},"chat/recent/room":function(s){return $('[component="chat/recent/room"][data-roomid="'+s+'"]')}},f.get=function(){const s=Array.prototype.slice.call(arguments,1);return f.core[arguments[0]]&&s.length?f.core[arguments[0]].apply(this,s):$('[component="'+arguments[0]+'"]')},f}.call(k,r,k,A),y!==void 0&&(A.exports=y)},18340:(A,k,r)=>{"use strict";var y,f;y=[r(85233),r(7927)],f=function(s,l){let a,m=[],C=0,u;function h(n,t){typeof n!="string"&&(n=$(n),n=n.data("type")||n.attr("type")||n.prop("tagName"));const e=a.plugins[n.toLowerCase()];if(e==null)return;const i=e[t];return typeof i=="function"?i:null}return u={deepClone:function(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n},createElement:function(n,t,e){const i=document.createElement(n);for(const c in t)t.hasOwnProperty(c)&&i.setAttribute(c,t[c]);return e&&i.appendChild(document.createTextNode(e)),i},initElement:function(n){const t=h(n,"init");t?.call(a,$(n))},destructElement:function(n){const t=h(n,"destruct");t?.call(a,$(n))},createElementOfType:function(n,t,e){let i;const c=h(n,"create");return c!=null?i=$(c.call(a,n,t,e)):(e==null&&(e={}),n!=null&&(e.type=n),i=$(u.createElement(t||"input",e))),i.data("type",n),u.initElement(i),i},cleanArray:function(n,t,e){const i=[];if(!t&&e)return n;for(let c=0;c<n.length;c+=1){let o=n[c];t&&(o===!!o?o=+o:o&&typeof o.trim=="function"&&(o=o.trim())),(e||o!=null&&o.length)&&i.push(o)}return i},isTrue:function(n){return n==="true"||+n==1},isFalse:function(n){return n==="false"||+n==0},readValue:function(n){let t=!u.isFalse(n.data("empty"));const e=!u.isFalse(n.data("trim")),i=n.data("split"),c=h(n,"get");let o;if(c!=null)return c.call(a,n,e,t);if(i!=null){t=u.isTrue(n.data("empty")),o=n.val();const g=o!=null&&o.split(i||",")||[];return u.cleanArray(g,e,t)}if(o=n.val(),e&&o!=null&&typeof o.trim=="function"&&(o=o.trim()),t||o!==void 0&&(o==null||o.length!==0))return o},fillField:function(n,t){const e=h(n,"set");let i=n.data("trim");if(i=i!=="false"&&+i!=0,e!=null)return e.call(a,n,t,i);t instanceof Array&&(t=t.join(n.data("split")||(i?", ":","))),i&&t&&typeof t.trim=="function"?(t=t.trim(),typeof t.toString=="function"&&(t=t.toString())):t!=null?(typeof t.toString=="function"&&(t=t.toString()),i&&(t=t.trim())):t="",t!==void 0&&n.val(t)},initFields:function(n){$("[data-key]",n).each(function(t,e){e=$(e);const i=h(e,"init"),c=e.data("key").split(".");let o=a.get();i?.call(a,e);for(let g=0;g<c.length;g+=1){const d=c[g];d&&o!=null&&(o=o[d])}u.fillField(e,o)})},registerReadyJobs:function(n){return C+=n,C},beforeReadyJobsDecreased:function(n){if(n==null&&(n=1),C>0&&(C-=n,C<=0)){for(let t=0;t<m.length;t+=1)m[t]();m=[]}},whenReady:function(n){C<=0?n():m.push(n)},serializeForm:function(n){const t=n.serializeObject();return n.find('input[type="checkbox"]').each(function(e,i){i=$(i),i.is(":checked")||(t[i.attr("name")]="off")}),n.find("select[multiple]").each(function(e,i){i=$(i),t[i.attr("name")]=JSON.stringify(i.val())}),t},persistSettings:function(n,t,e,i){t!=null&&t._!=null&&typeof t._!="string"&&(t=u.deepClone(t),t._=JSON.stringify(t._)),socket.emit("admin.settings.set",{hash:n,values:t},function(c){e&&(c?l.alert({title:"[[admin/admin:changes-not-saved]]",type:"danger",message:`[[admin/admin/changes-not-saved-message, ${c.message}]]`,timeout:5e3}):l.alert({title:"[[admin/admin:changes-saved]]",type:"success",message:"[[admin/admin:changes-saved-message]]",timeout:2500})),typeof i=="function"&&i(c)})},use:function(n){try{n._=JSON.parse(n._)}catch{}a.cfg=n}},a={helper:u,plugins:{},cfg:{},get:function(){return a.cfg!=null&&a.cfg._!==void 0?a.cfg._:a.cfg},registerPlugin:function(n,t){t==null?t=n.types:n.types=t,typeof n.use=="function"&&n.use.call(a);for(let e=0;e<t.length;e+=1){const i=t[e].toLowerCase();a.plugins[i]==null&&(a.plugins[i]=n)}},set:function(n,t,e,i,c){c==null&&(c=!0),u.whenReady(function(){u.use(t),u.initFields(e||"form"),u.persistSettings(n,t,c,i)})},sync:function(n,t,e){socket.emit("admin.settings.get",{hash:n},function(i,c){i?typeof e=="function"&&e(i):u.whenReady(function(){u.use(c),u.initFields(t||"form"),typeof e=="function"&&e()})})},persist:function(n,t,e,i){const c=[],o=$("[data-key]",t||"form").toArray();i==null&&(i=!0);for(let g=0;g<o.length;g+=1){const d=$(o[g]),R=u.readValue(d);let p=a.get();const v=d.data("key").split("."),E=v[v.length-1];if(v.length>1)for(let D=0;D<v.length-1;D+=1){const S=v[D];S&&p!=null&&(p=p[S])}p!=null?R!=null?p[E]=R:delete p[E]:c.push(d.data("key"))}c.length&&l.alert({title:"Attributes Not Saved",message:"'"+c.join(", ")+"' could not be saved. Please contact the plugin-author!",type:"danger",timeout:5e3}),u.persistSettings(n,a.cfg,i,e)},load:function(n,t,e){e=e||function(){};const i=t.attr("data-socket-get");socket.emit(i||"admin.settings.get",{hash:n},function(c,o){if(c)return e(c);$(t).find("select[multiple]").each(function(d,R){const p=$(R).attr("name");if(p&&o.hasOwnProperty(p))try{o[p]=JSON.parse(o[p])}catch{}}),ajaxify.data[i?n:"settings"]=o,u.whenReady(function(){$(t).find("[data-sorted-list]").each(function(d,R){h(R,"get").call(a,$(R),n)})}),$(t).deserialize(o),$(t).find('input[type="checkbox"]').each(function(){$(this).parents(".mdl-switch").toggleClass("is-checked",$(this).is(":checked"))}),s.fire("action:admin.settingsLoaded"),$(t).on("change","input, select, textarea",function(){app.flags=app.flags||{},app.flags._unsaved=!0});const g=document.getElementById("save");g&&r.e(2441).then(function(){var d=[r(42441)];(function(R){R.bind("ctrl+s",function(p){g.click(),p.preventDefault()})}).apply(null,d)}).catch(r.oe),e(null,o)})},save:function(n,t,e){t=$(t);const i=t.get(0).elements;if(a.check(i)&&t.length){const o=u.serializeForm(t);u.whenReady(function(){const d=t.find("[data-sorted-list]");d.length&&d.each((R,p)=>{h(p,"set").call(a,$(p),o)})});const g=t.attr("data-socket-set");socket.emit(g||"admin.settings.set",{hash:n,values:o},function(d){app.flags._unsaved=!1,ajaxify.data[g?n:"settings"]=o,typeof e=="function"?e(d):d?l.alert({title:"[[admin/admin:changes-not-saved]]",message:`[[admin/admin:changes-not-saved-message, ${d.message}]]`,type:"error",timeout:2500}):l.alert({title:"[[admin/admin:changes-saved]]",type:"success",timeout:2500})})}},check:function(n){const t=e=>{const i=e.target.closest(".form-group");i&&i.classList.add("has-error"),e.target.removeEventListener("invalid",t)};return Array.prototype.map.call(n,e=>{const i=e.closest(".form-group");return i&&i.classList.remove("has-error"),e.addEventListener("invalid",t),e.reportValidity()}).every(Boolean)}},u.registerReadyJobs(1),Promise.all([r.e(6177),r.e(2526),r.e(6069)]).then(function(){var n=[r(16631),r(73143),r(7448),r(15101),r(846),r(88839),r(53411),r(66370)];(function(){for(let t=0;t<arguments.length;t+=1)a.registerPlugin(arguments[t]);u.beforeReadyJobsDecreased()}).apply(null,n)}).catch(r.oe),a}.apply(k,y),f!==void 0&&(A.exports=f)},19934:(A,k,r)=>{"use strict";var y,f;y=[r(18340),r(7927)],f=function(s,l){var a={};a.init=function(){s.load("mentions",$(".mentions-settings")),$(window).on("action:admin.settingsLoaded",m),$("#save").on("click",function(){s.save("mentions",$(".mentions-settings"),function(){l.alert({type:"success",alert_id:"mentions-saved",title:"Settings Saved",message:"Please reload your NodeBB to apply these settings",clickfn:function(){socket.emit("admin.reload")}})})})};function m(){(!ajaxify.data.settings||!ajaxify.data.settings.hasOwnProperty("autofillGroups"))&&($("input#autofillGroups").parents(".mdl-switch").toggleClass("is-checked",!1),$("input#autofillGroups").prop("checked",!1))}return a}.apply(k,y),f!==void 0&&(A.exports=f)}}]);

(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7804,2735,882,3034,7913],{47913:(v,p,l)=>{v.exports=l(66485)},45482:(v,p,l)=>{v.exports=l(35729)},83713:(v,p,l)=>{v.exports=l(51077)},38259:(v,p,l)=>{v.exports=l(65616)},27145:(v,p,l)=>{"use strict";v=l.nmd(v);var h,b;h=[l(59006),l(32230),l(85233)],b=function(S,s,o){const n={};n.init=function(){const e=this;S.render("modules/taskbar",{}).then(function(i){e.taskbar=$(i),e.tasklist=e.taskbar.find("ul"),$(document.body).append(e.taskbar),e.taskbar.on("click","li",async function(){const t=$(this),a=t.attr("data-module"),r=t.attr("data-uuid"),c=await app.require(a);return t.hasClass("active")?c.minimize(r):(m(),c.load(r),n.toggleNew(r,!1),n.tasklist.removeClass("active"),t.addClass("active")),!1})}),$(window).on("action:app.loggedOut",function(){n.closeAll()})},n.close=async function(e,i){const t=n.tasklist.find('[data-module="'+v+'"][data-uuid="'+i+'"]');let a="close";if(e==="chat"&&(a="closeByUUID"),t.length){const r=await app.require(e);r&&typeof r[a]=="function"&&r[a](i)}},n.closeAll=function(e){let i="[data-uuid]";e&&(i='[data-module="'+e+'"]'+i),n.tasklist.find(i).each(function(t,a){n.close(e||a.getAttribute("data-module"),a.getAttribute("data-uuid"))})},n.discard=function(e,i){n.tasklist.find('[data-module="'+e+'"][data-uuid="'+i+'"]').remove(),d()},n.push=function(e,i,t,a){a=a||function(){};const r=n.tasklist.find('li[data-uuid="'+i+'"]'),c={module:e,uuid:i,options:t,element:r};o.fire("filter:taskbar.push",c),!r.length&&c.module?g(c,a):a(r)},n.get=function(e){return $('[data-module="'+e+'"]').map(function(t,a){return $(a).data()})},n.minimize=function(e,i){n.tasklist.find('[data-module="'+e+'"][data-uuid="'+i+'"]').toggleClass("active",!1)},n.toggleNew=function(e,i,t){n.tasklist.find('[data-uuid="'+e+'"]').toggleClass("new",i),t||o.fire("action:taskbar.toggleNew",e)},n.updateActive=function(e){const i=n.tasklist.find("li");i.removeClass("active"),i.filter('[data-uuid="'+e+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+e+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(e){return n.tasklist.find('li[data-uuid="'+e+'"]').hasClass("active")};function d(){n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function m(){n.tasklist.find(".active").removeClass("active")}function g(e,i){s.translate(e.options.title,function(t){const a=$("<div></div>").text(t||"NodeBB Task").html(),r=$("<li></li>").addClass(e.options.className).html('<a href="#"'+(e.options.image?` style="background-image: url('`+e.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(e.options.icon?'<i class="fa '+e.options.icon+'"></i> ':"")+'<span aria-label="'+a+'" component="taskbar/title">'+a+"</span></a>").attr({title:a,"data-module":e.module,"data-uuid":e.uuid}).addClass(e.options.state!==void 0?e.options.state:"active");(!e.options.state||e.options.state==="active")&&m(),n.tasklist.append(r),d(),e.element=r,r.data(e),o.fire("action:taskbar.pushed",e),i(r)})}const u=function(e,i,t){switch(i){case"title":e.find('[component="taskbar/title"]').text(t);break;case"icon":e.find("i").attr("class","fa fa-"+t);break;case"image":e.find("a").css("background-image",t?'url("'+t.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":e.find("a").css("background-color",t);break}};return n.update=function(e,i,t){const a=n.tasklist.find('[data-module="'+e+'"][data-uuid="'+i+'"]');if(!a.length)return;const r=a.data();Object.keys(t).forEach(function(c){r[c]=t[c],u(a,c,t[c])}),a.data(r)},n}.apply(p,h),b!==void 0&&(v.exports=b)},66485:(v,p,l)=>{"use strict";var h,b;h=[l(74344),l(7927)],b=function(S,s){var o={},n;o.init=function(e,i){var t=e.find(".draft-icon");function a(){d(),n=setTimeout(function(){g(e,t,i)},1e3)}e.on("keyup","textarea, input.handle, input.title",a),e.on("click",'input[type="checkbox"]',a),e.on("thumb.uploaded",a),t.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){var r=[];try{r=localStorage.getItem("drafts:open"),r=JSON.parse(r)||[]}catch{console.warn("[composer/drafts] Could not read list of open/available drafts"),r=[]}r.length&&r.forEach(function(c){o.updateVisibility("open",c)})}),o.migrateGuest(),o.migrateThumbs(...arguments)};function d(){n&&(clearTimeout(n),n=0)}o.getDraft=function(e){return console.warn("[composer/drafts] drafts.getDraft is deprecated! Use drafts.get() instead."),localStorage.getItem(e)};function m(e){return parseInt(e,10)>0?localStorage:sessionStorage}o.get=function(e){var i=e.split(":")[1],t=m(i),a={text:t.getItem(e)};return["cid","title","tags","uuid"].forEach(function(r){const c=t.getItem(e+":"+r);c&&(a[r]=c)}),parseInt(i,10)||(a.handle=t.getItem(e+":handle")),$(window).trigger("action:composer.drafts.get",{save_id:e,draft:a,storage:t}),a};function g(e,i,t){if(u(app.user.uid?"localStorage":"sessionStorage")&&t&&t.save_id&&e.length){const R=e.find("input.title"),w=R&&R.val();var a=e.find("textarea").val(),r=m(app.user.uid);if(t.hasOwnProperty("cid")&&!t.save_id.endsWith(":cid:"+t.cid)&&(o.removeDraft(t.save_id),t.save_id=t.save_id.replace(/cid:\d+$/,"cid:"+t.cid)),a.length||w&&w.length){if(r.setItem(t.save_id,a),r.setItem(`${t.save_id}:uuid`,e.attr("data-uuid")),t.hasOwnProperty("cid")){const z=e.find("input.tags").val();r.setItem(t.save_id+":tags",z),r.setItem(t.save_id+":title",w)}if(!app.user.uid){var c=e.find("input.handle").val();r.setItem(t.save_id+":handle",c)}$(window).trigger("action:composer.drafts.save",{storage:r,postData:t,postContainer:e}),i.toggleClass("active",!0)}else o.removeDraft(t.save_id)}}o.removeDraft=function(e){if(!e)return;d(),o.updateVisibility("available",e),o.updateVisibility("open",e);var i=e.split(":")[1],t=m(i);Object.keys(t).filter(r=>r.startsWith(e)).forEach(r=>t.removeItem(r))},o.updateVisibility=function(e,i,t){if(!(!u(app.user.uid?"localStorage":"sessionStorage")||!i)){var a=[];try{a=localStorage.getItem("drafts:"+e),a=a?JSON.parse(a):[]}catch{console.warn("[composer/drafts] Could not read list of open drafts"),a=[]}var r=a.indexOf(i);t&&r===-1?a.push(i):!t&&r!==-1&&a.splice(r,1),localStorage.setItem("drafts:"+e,JSON.stringify(a))}},o.migrateGuest=function(){if(u("localStorage")&&app.user.uid){var e=/^composer:\d+:\w+:\d+(:\w+)?$/,i=Object.keys(sessionStorage).filter(function(r){return e.test(r)}),t=new Set([]),a=i.map(function(r){var c=r.split(":");return c[1]=app.user.uid,t.add(c.slice(0,4).join(":")),c.join(":")});return i.forEach(function(r,c){localStorage.setItem(a[c],sessionStorage.getItem(r)),sessionStorage.removeItem(r)}),t.forEach(function(r){o.updateVisibility("available",r,1)}),t}},o.migrateThumbs=function(e,i){if(!app.uid)return;const t=e.attr("data-uuid"),a=o.get(i.save_id);a&&a.uuid&&S.put(`/topics/${a.uuid}/thumbs`,{tid:t}).then(()=>{Promise.all([l.e(6177),l.e(2526),l.e(1006),l.e(2265),l.e(9915),l.e(5482)]).then(function(){var r=[l(44541)];(function(c){c.updateThumbCount(t,e)}).apply(null,r)}).catch(l.oe)})},o.loadOpen=function(){if(!(ajaxify.data.template.login||ajaxify.data.template.register)){var e,i=[];try{e=localStorage.getItem("drafts:available"),i=localStorage.getItem("drafts:open"),e=JSON.parse(e)||[],i=JSON.parse(i)||[]}catch{console.warn("[composer/drafts] Could not read list of open/available drafts"),e=[],i=[]}e.length&&e.forEach(function(t){if(t){var a=t.split(":"),r=a[1],c=a[2],R=a[3],w=o.get(t);if(i.indexOf(t)===-1&&parseInt(app.user.uid,10)===parseInt(r,10)){if(!w||w.text&&w.title&&!w.text.title&&!w.text.length){o.updateVisibility("available",t),o.updateVisibility("open",t);return}Promise.all([l.e(6177),l.e(2526),l.e(1006),l.e(2265),l.e(9915),l.e(5482)]).then(function(){var z=[l(44541)];(function(f){c==="cid"?f.newTopic({cid:R,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(w.handle),title:utils.escapeHTML(w.title),body:utils.escapeHTML(w.text),tags:String(w.tags||"").split(",")}):c==="tid"?S.get("/topics/"+R,{},function(E,x){if(E)return s.error(E);f.newReply(R,void 0,x.title,utils.escapeHTML(w.text))}):c==="pid"&&f.editPost(R)}).apply(null,z)}).catch(l.oe)}}})}};function u(e){var i;try{i=window[e];var t="__storage_test__";return i.setItem(t,t),i.removeItem(t),!0}catch(a){return a instanceof DOMException&&(a.code===22||a.code===1014||a.name==="QuotaExceededError"||a.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i&&i.length!==0}}return o}.apply(p,h),b!==void 0&&(v.exports=b)},35729:(v,p,l)=>{"use strict";var h,b;h=[l(83713),l(38259),l(62023),l(10577)],b=function(S,s,o,n){var d={},m={picture:function(){var u=this;u.find("#files").click()},upload:function(){var u=this;u.find("#files").click()},thumbs:function(){d.exitFullscreen();var u=this;Promise.all([l.e(1006),l.e(2265),l.e(9915),l.e(7913)]).then(function(){var e=[l(44541)];(function(i){const t=u.get(0).getAttribute("data-uuid"),a=i.posts[t];(a.action==="topics.post"||a.action==="posts.edit"&&a.isMain)&&o.modal.open({id:t,pid:a.pid}).then(()=>{u.trigger("thumb.uploaded"),i.updateThumbCount(t,u)})}).apply(null,e)}).catch(l.oe)},tags:function(){var u=this;u.find(".tags-container").toggleClass("hidden")},zen:function(){var u=this;$(window).one("resize",function(){function e(){n.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),s.reposition(u),$(window).off("resize",e))}n.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),u.find(".write").focus(),$(window).on("resize",e),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",n.exit))}),n.toggle(u.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:u})}},g=[];return d.exitFullscreen=function(){n.isEnabled&&n.isFullscreen&&n.exit()},d.addComposerButtons=function(){for(var u=0,e=g.length;u<e;u++)$(".formatting-bar .formatting-group #fileForm").before('<li tabindex="-1" data-format="'+g[u].name+'" title="'+(g[u].title||"")+'"><i class="'+g[u].iconClass+'"></i></li>')},d.addButton=function(u,e,i,t){t=t||u.replace("fa fa-",""),m[t]=e,g.push({name:t,iconClass:u,title:i})},d.getDispatchTable=function(){return m},d.addButtonDispatch=function(u,e){m[u]=e},d.addHandler=function(u){u.on("click",".formatting-bar li",function(e){var i=$(this).attr("data-format"),t=$(this).parents('[component="composer"]').find("textarea")[0];m.hasOwnProperty(i)&&(m[i].call(u,t,t.selectionStart,t.selectionEnd,e),S.render(u))})},d}.apply(p,h),b!==void 0&&(v.exports=b)},51077:(v,p,l)=>{"use strict";var h,b;h=[l(85233)],b=function(S){var s={};return s.render=function(o,n){if(n=n||function(){},!o.find(".preview-container").is(":visible"))return n();var d=o.find("textarea");socket.emit("plugins.composer.renderPreview",d.val(),function(m,g){m||(g=$("<div>"+g+"</div>"),g.find("img:not(.not-responsive)").addClass("img-responsive"),o.find(".preview").html(g),S.fire("action:composer.preview"),n())})},s.matchScroll=function(o){if(o.find(".preview-container").is(":visible")){var n=o.find("textarea"),d=o.find(".preview");if(n.length&&d.length){var m=n[0].scrollHeight-n.height();if(m===0)return;var g=n.scrollTop()/m;d.scrollTop(Math.max(d[0].scrollHeight-d.height(),0)*g)}}},s.handleToggler=function(o){s.env=utils.findBootstrapEnvironment();var n=o.find(".write-container .toggle-preview"),d=o.find(".preview-container .toggle-preview"),m=$(".preview-container"),g=$(".write-container");function u(){i(!1),s.env!=="xs"&&s.env!=="sm"&&localStorage.setItem("composer:previewToggled",!0)}function e(){i(!0),s.env!=="xs"&&s.env!=="sm"&&localStorage.removeItem("composer:previewToggled")}function i(t){s.env==="xs"||s.env==="sm"?(m.toggleClass("hide",!1),g.toggleClass("maximized",!1),n.toggleClass("hide",!0),m.toggleClass("hidden-xs hidden-sm",!t),g.toggleClass("hidden-xs hidden-sm",t),t&&s.render(o)):(m.toggleClass("hide",!t),g.toggleClass("maximized",!t),n.toggleClass("hide",t)),s.matchScroll(o)}s.toggle=i,d.on("click",function(){u(),o.find(".write").focus()}),n.on("click",function(){e(),o.find(".write").focus()}),localStorage.getItem("composer:previewToggled")||s.env==="xs"||s.env==="sm"?u():e()},s}.apply(p,h),b!==void 0&&(v.exports=b)},65616:(v,p,l)=>{"use strict";var h,b;h=[l(27145)],b=function(S){var s={},o=0,n=.3,d=.05,m=992,g=$("body"),u=$(window),e=$('[component="navbar"]'),i=document.body,t=e[0];function a(){return localStorage.getItem("composer:resizeRatio")||.5}function r(f){localStorage.setItem("composer:resizeRatio",Math.min(f,1))}function c(){var f;t?f=t.getBoundingClientRect():f={bottom:0};var E=Math.max(f.bottom,0),x={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return x.width=x.right,x.height=x.bottom,x.boundedTop=E,x.boundedHeight=x.bottom-E,x}function R(f,E){var x=c(),y=f[0],M=window.getComputedStyle(y),D=parseInt(M.getPropertyValue("min-height"),10),T=Math.max(D/window.innerHeight,n);if(x.width>=m){const P=(x.height-x.boundedHeight)/x.height;E=Math.min(Math.max(E,T+P),1);var B=E*x.boundedHeight/x.height;y.style.top=((1-B)*100).toString()+"%";var C=y.getBoundingClientRect();i.style.paddingBottom=(C.bottom-C.top).toString()+"px"}else f.removeAttr("style"),i.style.paddingBottom=0;f.ratio=E,y.style.visibility="visible",S.updateActive(f.attr("data-uuid"))}var w=R,z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return z&&(w=function(f,E){z(function(){R(f,E),setTimeout(function(){u.trigger("action:composer.resize"),f.trigger("action:composer.resize")},0)})}),s.reposition=function(f){var E=a();E>=1-d&&(E=1,f.addClass("maximized")),w(f,E)},s.maximize=function(f,E){E?w(f,1):s.reposition(f)},s.handleResize=function(f){var E=0,x=0,y=0,M=f.find(".resizer"),D=M[0];function T(A){var k=D.getBoundingClientRect(),I=(k.top+k.bottom)/2;E=(I-A.clientY)/2,x=A.clientY,u.on("mousemove",B),u.on("mouseup",C),g.on("touchmove",P)}function B(A){var k=A.clientY-E,I=c(),F=(I.height-k)/I.boundedHeight;w(f,F)}function C(A){A.preventDefault(),y=A.clientY,f.find("textarea").focus(),u.off("mousemove",B),u.off("mouseup",C),g.off("touchmove",P);var k=y-E,I=c(),F=(I.height-k)/I.boundedHeight;y-x===0&&f.hasClass("maximized")?(f.removeClass("maximized"),F=!o||o>=1-d?.5:o,w(f,F)):y-x===0||F>=1-d?(w(f,1),f.addClass("maximized"),o=F):f.removeClass("maximized"),r(F)}function P(A){A.preventDefault(),B(A.touches[0])}M.on("mousedown",function(A){A.preventDefault(),T(A)}).on("touchstart",function(A){A.preventDefault(),T(A.touches[0])}).on("touchend",C)},s}.apply(p,h),b!==void 0&&(v.exports=b)},10577:v=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var p=typeof window<"u"&&typeof window.document<"u"?window.document:{},l=v.exports,h=function(){for(var s,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,d=o.length,m={};n<d;n++)if(s=o[n],s&&s[1]in p){for(n=0;n<s.length;n++)m[o[0][n]]=s[n];return m}return!1}(),b={change:h.fullscreenchange,error:h.fullscreenerror},S={request:function(s,o){return new Promise(function(n,d){var m=function(){this.off("change",m),n()}.bind(this);this.on("change",m),s=s||p.documentElement;var g=s[h.requestFullscreen](o);g instanceof Promise&&g.then(m).catch(d)}.bind(this))},exit:function(){return new Promise(function(s,o){if(!this.isFullscreen){s();return}var n=function(){this.off("change",n),s()}.bind(this);this.on("change",n);var d=p[h.exitFullscreen]();d instanceof Promise&&d.then(n).catch(o)}.bind(this))},toggle:function(s,o){return this.isFullscreen?this.exit():this.request(s,o)},onchange:function(s){this.on("change",s)},onerror:function(s){this.on("error",s)},on:function(s,o){var n=b[s];n&&p.addEventListener(n,o,!1)},off:function(s,o){var n=b[s];n&&p.removeEventListener(n,o,!1)},raw:h};if(!h){l?v.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(S,{isFullscreen:{get:function(){return Boolean(p[h.fullscreenElement])}},element:{enumerable:!0,get:function(){return p[h.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(p[h.fullscreenEnabled])}}}),l?v.exports=S:window.screenfull=S})()}}]);

(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[9915,2160,8306,7073],{22905:(h,p,u)=>{"use strict";var m,d;m=[u(7927)],d=function(g){const f={};return f.init=function(n,o){let i=null;o=o||{},o.privilege=o.privilege||"topics:read",o.states=o.states||["watching","notwatching","ignoring"];let r=[];Array.isArray(o.localCategories)&&(r=o.localCategories.map(t=>({...t}))),o.selectedCids=o.selectedCids||ajaxify.data.selectedCids||[];const e=n.find('[component="category-selector-search"]');if(!e.length)return;const s=e.parent('[component="category/dropdown"]').length>0||e.parent('[component="category-selector"]').length>0;n.on("show.bs.dropdown",function(){s&&(n.find(".dropdown-toggle").addClass("hidden"),e.removeClass("hidden"));function t(){const l=e.find("input").val();l.length>1||!l&&!i?c(l,function(y){i=i||y,a(y)}):!l&&i&&(i.forEach(function(y){y.selected=o.selectedCids.includes(y.cid)}),a(i))}e.on("click",function(l){l.preventDefault(),l.stopPropagation()}),e.find("input").val("").on("keyup",utils.debounce(t,300)),t()}),n.on("shown.bs.dropdown",function(){e.find("input").focus()}),n.on("hide.bs.dropdown",function(){s&&(n.find(".dropdown-toggle").removeClass("hidden"),e.addClass("hidden")),e.off("click"),e.find("input").off("keyup")});function c(t,l){socket.emit("categories.categorySearch",{search:t,query:utils.params(),parentCid:o.parentCid||0,selectedCids:o.selectedCids,privilege:o.privilege,states:o.states,showLinks:o.showLinks},function(y,_){if(y)return g.error(y);l(r.concat(_))})}function a(t){app.parseAndTranslate(o.template,{categoryItems:t.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(l){n.find('[component="category/list"]').replaceWith(l.find('[component="category/list"]')),n.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!t.length)})}},f}.apply(p,m),d!==void 0&&(h.exports=d)},50548:(h,p,u)=>{"use strict";var m,d;m=[u(22905),u(31369),u(85233)],d=function(g,f,n){const o={};return o.init=function(i,r){if(!i||!i.length)return;r=r||{};const e=r.onSelect||function(){};r.states=r.states||["watching","notwatching","ignoring"],r.template="partials/category-selector",n.fire("action:category.selector.options",{el:i,options:r}),g.init(i,r);const s={el:i,selectedCategory:null};i.on("click","[data-cid]",function(){const a=$(this);if(a.hasClass("disabled"))return!1;s.selectCategory(a.attr("data-cid")),e(s.selectedCategory)});const c=s.el.find('[component="category-selector-selected"]').html();return s.selectCategory=function(a){const t=s.el.find('[data-cid="'+a+'"]');s.selectedCategory={cid:a,name:t.attr("data-name")},t.length?s.el.find('[component="category-selector-selected"]').html(t.find('[component="category-markup"]').html()):s.el.find('[component="category-selector-selected"]').html(c)},s.getSelectedCategory=function(){return s.selectedCategory},s.getSelectedCid=function(){return s.selectedCategory?s.selectedCategory.cid:0},s},o.modal=function(i){i=i||{},i.onSelect=i.onSelect||function(){},i.onSubmit=i.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:i.message},function(r){const e=f.dialog({title:i.title||"[[modules:composer.select_category]]",message:r,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:c}}}),s=o.init(e.find('[component="category-selector"]'),i);function c(a){return a.preventDefault(),s.selectedCategory&&(i.onSubmit(s.selectedCategory),e.modal("hide")),!1}i.openOnLoad&&e.on("shown.bs.modal",function(){e.find(".dropdown-toggle").dropdown("toggle")}),e.find("form").on("submit",c)})},o}.apply(p,m),d!==void 0&&(h.exports=d)},44541:(h,p,u)=>{h.exports=u(35127)},2585:(h,p,u)=>{h.exports=u(61006)},98755:(h,p,u)=>{h.exports=u(77678)},98166:(h,p,u)=>{h.exports=u(73398)},88186:(h,p,u)=>{h.exports=u(13720)},22143:(h,p,u)=>{h.exports=u(77070)},44882:(h,p,u)=>{"use strict";var m,d;m=[u(31369),u(32230),u(66603),u(7927),u(85233)],d=function(g,f,n,o,i){const r={};let e,s;r.show=function(){i.one("action:ajaxify.end",()=>{a(),c(),r.showEmailConfirmWarning()})},r.showEmailConfirmWarning=function(t){if(!config.emailPrompt||!app.user.uid||parseInt(n.getItem("email-confirm-dismiss"),10)===1)return;const l={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{n.setItem("email-confirm-dismiss",1)}};app.user.email?!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(l.message=t||"[[error:email-not-confirmed]]",l.clickfn=function(){o.remove("email_confirm"),ajaxify.go("/me/edit/email")},o.alert(l)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(l.message="[[error:email-not-confirmed-email-sent]]",o.alert(l)):(l.message="[[error:no-email-to-confirm]]",l.clickfn=function(){o.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},o.alert(l))};function c(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||n.getItem("cookieconsent")==="1"||(config.cookies.message=f.unescape(config.cookies.message),config.cookies.dismiss=f.unescape(config.cookies.dismiss),config.cookies.link=f.unescape(config.cookies.link),config.cookies.link_url=f.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(t){$(document.body).append(t),$(document.body).addClass("cookie-consent-open");const l=$(".cookie-consent");l.find("button").on("click",function(){n.setItem("cookieconsent","1"),l.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function a(){const t=utils.params({full:!0});e=t.has("loggedin"),s=t.get("register"),e&&(o.alert({type:"success",title:"[[global:welcome_back]] "+app.user.username+"!",message:"[[global:you_have_successfully_logged_in]]",timeout:5e3}),t.delete("loggedin")),s&&(g.alert({message:utils.escapeHTML(decodeURIComponent(s))}),t.delete("register")),t.has("lang")&&t.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${t.get("lang")}", but that is already the forum default language.`),t.delete("lang"));const l=t.toString();ajaxify.updateHistory(ajaxify.currentPage+(l?`?${l}`:"")+document.location.hash,!0)}return r.showInvalidSession=function(){g.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},r.showSessionMismatch=function(){g.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},r}.apply(p,m),d!==void 0&&(h.exports=d)},75203:(h,p,u)=>{"use strict";var m;m=function(){const d={};return d.apply=function(g){$(g).on("mousewheel",function(f){const n=this.scrollTop,o=this.scrollHeight,i=Math.round(this.getBoundingClientRect().height);if(f.originalEvent.deltaY<0&&n===0||f.originalEvent.deltaY>0&&i+n>=o)return!1})},d}.call(p,u,p,h),m!==void 0&&(h.exports=m)},7073:(h,p,u)=>{"use strict";var m,d;m=[u(32230),u(66603),u(85233),u(7927)],d=function(g,f,n,o){const i={current:{}};i.init=function(e){if(!config.searchEnabled)return;e=e||{in:config.searchDefaultInQuick||"titles"};const s=$("#search-button"),c=$("#search-fields"),a=$("#search-fields input"),t=$("#quick-search-container");$("#search-form .advanced-search-link").off("mousedown").on("mousedown",function(){ajaxify.go("/search")}),$("#search-form").off("submit").on("submit",function(){a.blur()}),a.off("blur").on("blur",function(){setTimeout(function(){a.is(":focus")||(c.addClass("hidden"),s.removeClass("hidden"))},200)}),a.off("focus");const l={inputEl:a,resultEl:t};i.enableQuickSearch({searchOptions:e,searchElements:l}),s.off("click").on("click",function(y){return!config.loggedIn&&!app.user.privileges["search:content"]?(o.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(y.stopPropagation(),i.showAndFocusInput(),!1)}),$("#search-form").off("submit").on("submit",function(){const y=$(this).find("input"),_=i.getSearchPreferences();return _.term=y.val(),_.in=e.in,n.fire("action:search.submit",{searchOptions:_,searchElements:l}),i.query(_,function(){y.val("")}),!1})},i.enableQuickSearch=function(e){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const s=Object.assign({in:config.searchDefaultInQuick||"titles"},e.searchOptions),c=e.searchElements.resultEl,a=e.searchElements.inputEl;let t=a.val();const l=c.find(".filter-category");function y(){ajaxify.data.template.category&&ajaxify.data.cid&&g.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(C){const E=$("<div></div>").html(C).text();l.find(".name").text(E)}),l.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function _(){e.searchOptions=Object.assign({},s),e.searchOptions.term=a.val(),y(),ajaxify.data.template.category&&ajaxify.data.cid&&l.find('input[type="checkbox"]').is(":checked")&&(e.searchOptions.categories=[ajaxify.data.cid],e.searchOptions.searchChildren=!0),c.removeClass("hidden").find(".quick-search-results-container").html(""),c.find(".loading-indicator").removeClass("hidden"),n.fire("action:search.quick.start",e),e.searchOptions.searchOnly=1,i.api(e.searchOptions,function(C){if(c.find(".loading-indicator").addClass("hidden"),!C.posts||e.hideOnNoMatches&&!C.posts.length)return c.addClass("hidden").find(".quick-search-results-container").html("");C.posts.forEach(function(E){const v=$("<div>"+E.content+"</div>").text(),S=a.val().toLowerCase().replace(/^in:topic-\d+/,""),b=Math.max(0,v.toLowerCase().indexOf(S)-40);E.snippet=utils.escapeHTML((b>0?"...":"")+v.slice(b,b+80)+(v.length-b>80?"...":""))}),app.parseAndTranslate("partials/quick-search-results",C,function(E){E.length&&E.find(".timeago").timeago(),c.toggleClass("hidden",!E.length||!a.is(":focus")).find(".quick-search-results-container").html(E.length?E:"");const v=c.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");i.highlightMatches(e.searchOptions.term,v),n.fire("action:search.quick.complete",{data:C,options:e})})})}c.find('.filter-category input[type="checkbox"]').on("change",function(){a.focus(),_()}),a.off("keyup").on("keyup",utils.debounce(function(){if(a.val().length<3){c.addClass("hidden"),t=a.val();return}if(a.val()!==t){if(t=a.val(),!a.is(":focus"))return c.addClass("hidden");_()}},500));let k=!1;c.on("mousedown",function(){$(window).one("mouseup",function(){c.addClass("hidden")}),k=!0}),a.on("blur",function(){!a.is(":focus")&&!k&&!c.hasClass("hidden")&&c.addClass("hidden")});let w=!1;n.on("action:ajaxify.end",function(){ajaxify.isCold()||(w=!0)}),a.on("focus",function(){k=!1;const C=a.val();t=C,C&&c.find("#quick-search-results").children().length&&(y(),w?(_(),w=!1):c.removeClass("hidden"),a[0].setSelectionRange(C.startsWith("in:topic")?C.indexOf(" ")+1:0,C.length))}),a.off("refresh").on("refresh",function(){_()})},i.showAndFocusInput=function(){$("#search-fields").removeClass("hidden"),$("#search-button").addClass("hidden"),$("#search-fields input").focus()},i.query=function(e,s){s=s||function(){},ajaxify.go("search?"+r(e)),s()},i.api=function(e,s){const c=config.relative_path+"/api/search?"+r(e);e.searchOnly=void 0;const a=config.relative_path+"/search?"+r(e);$.get(c,function(t){t.url=a,s(t)})};function r(e){const s=e.in||"titles",c=e.by||"";let a=e.term.replace(/^[ ?#]*/,"");try{a=encodeURIComponent(a)}catch{return o.error("[[error:invalid-search-term]]")}const t={term:a,in:s};return e.matchWords&&(t.matchWords=e.matchWords),c&&c.length&&(s==="posts"||s==="titles"||s==="titlesposts")&&(t.by=c),e.categories&&e.categories.length&&(t.categories=e.categories,e.searchChildren&&(t.searchChildren=e.searchChildren)),e.hasTags&&e.hasTags.length&&(t.hasTags=e.hasTags),parseInt(e.replies,10)>0&&(t.replies=e.replies,t.repliesFilter=e.repliesFilter||"atleast"),e.timeRange&&(t.timeRange=e.timeRange,t.timeFilter=e.timeFilter||"newer"),e.sortBy&&(t.sortBy=e.sortBy,t.sortDirection=e.sortDirection),e.showAs&&(t.showAs=e.showAs),e.searchOnly&&(t.searchOnly=e.searchOnly),n.fire("action:search.createQueryString",{query:t,data:e}),decodeURIComponent($.param(t))}return i.getSearchPreferences=function(){try{return JSON.parse(f.getItem("search-preferences")||"{}")}catch{return{}}},i.highlightMatches=function(e,s){if(!e||!s.length)return;e=utils.escapeHTML(e.replace(/^"/,"").replace(/"$/,"").trim());const c=e.split(" ").map(function(t){return utils.escapeRegexChars(t)}).join("|"),a=new RegExp("("+c+")","gi");s.each(function(){const t=$(this),l=[];t.find("*").each(function(){$(this).after("<!-- "+l.length+" -->"),l.push($("<div></div>").append($(this)))}),t.html(t.html().replace(a,function(y,_){return'<strong class="search-match">'+_+"</strong>"})),l.forEach(function(y,_){t.html(t.html().replace("<!-- "+_+" -->",function(){return y.html()}))})}),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-responsive")},i}.apply(p,m),d!==void 0&&(h.exports=d)},66603:(h,p,u)=>{"use strict";var m;m=function(){function d(){this._store={},this._keys=[]}d.prototype.isMock=!0,d.prototype.setItem=function(n,o){n=String(n),this._keys.indexOf(n)===-1&&this._keys.push(n),this._store[n]=o},d.prototype.getItem=function(n){return n=String(n),this._keys.indexOf(n)===-1?null:this._store[n]},d.prototype.removeItem=function(n){n=String(n),this._keys=this._keys.filter(function(o){return o!==n}),this._store[n]=null},d.prototype.clear=function(){this._keys=[],this._store={}},d.prototype.key=function(n){return n=parseInt(n,10)||0,this._keys[n]},Object.defineProperty&&Object.defineProperty(d.prototype,"length",{get:function(){return this._keys.length}});let g;const f=Date.now().toString();try{if(g=window.localStorage,g.setItem(f,f),g.getItem(f)!==f)throw Error("localStorage behaved unexpectedly");return g.removeItem(f),g}catch(n){console.warn(n),console.warn("localStorage failed, falling back on sessionStorage");try{if(g=window.sessionStorage,g.setItem(f,f),g.getItem(f)!==f)throw Error("sessionStorage behaved unexpectedly");return g.removeItem(f),g}catch(o){return console.warn(o),console.warn("sessionStorage failed, falling back on memory storage"),new d}}}.call(p,u,p,h),m!==void 0&&(h.exports=m)},33371:(h,p,u)=>{"use strict";var m,d;m=[u(7927)],d=function(g){const f={};return f.init=function(n){const o=n.uploadFormEl;o.length&&(o.attr("action",config.relative_path+n.route),n.dragDropAreaEl&&f.handleDragDrop({container:n.dragDropAreaEl,callback:function(i){f.ajaxSubmit({uploadForm:o,upload:i,callback:n.callback})}}),n.pasteEl&&f.handlePaste({container:n.pasteEl,callback:function(i){f.ajaxSubmit({uploadForm:o,upload:i,callback:n.callback})}}))},f.handleDragDrop=function(n){let o=!1;const i=n.container,r=n.container.find(".imagedrop");i.on("dragenter",function(){o||(r.css("top","0px"),r.css("height",i.height()+"px"),r.css("line-height",i.height()+"px"),r.show(),r.on("dragleave",function(){r.hide(),r.off("dragleave")}))}),r.on("drop",function(c){c.preventDefault();const a=c.originalEvent.dataTransfer.files;if(a.length){let l;if(window.FormData){l=new FormData;for(var t=0;t<a.length;++t)l.append("files[]",a[t],a[t].name)}n.callback({files:a,formData:l})}return r.hide(),!1});function e(s){return s.preventDefault(),!1}$(document).off("dragstart").on("dragstart",function(){o=!0}).off("dragend").on("dragend, mouseup",function(){o=!1}),r.on("dragover",e),r.on("dragenter",e)},f.handlePaste=function(n){n.container.on("paste",function(i){const r=(i.clipboardData||i.originalEvent.clipboardData||{}).items,e=[],s=[];let c=null;window.FormData&&(c=new FormData),[].forEach.call(r,function(a){const t=a.getAsFile();if(t){const l=utils.generateUUID()+"-"+t.name;c&&c.append("files[]",t,l),e.push(t),s.push(l)}}),e.length&&n.callback({files:e,fileNames:s,formData:c})})},f.ajaxSubmit=function(n){const o=[...n.upload.files];for(let r=0;r<o.length;++r){const e=o[r].type.match(/image./);if(e&&!app.user.privileges["upload:post:image"]||!e&&!app.user.privileges["upload:post:file"])return g.error("[[error:no-privileges]]");if(o[r].size>parseInt(config.maximumFileSize,10)*1024)return n.uploadForm[0].reset(),g.error("[[error:file-too-big, "+config.maximumFileSize+"]]")}const i=Date.now();n.uploadForm.off("submit").on("submit",function(){return $(this).ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},resetForm:!0,clearForm:!0,formData:n.upload.formData,error:function(r){let e=r.responseJSON&&(r.responseJSON.error||r.responseJSON.status&&r.responseJSON.status.message)||"[[error:parse-error]]";r&&r.status===413&&(e=r.statusText||"Request Entity Too Large"),g.error(e),g.remove(i)},uploadProgress:function(r,e,s,c){g.alert({alert_id:i,message:"[[modules:composer.uploading, "+c+"%]]"})},success:function(r){const e=r.response.images;if(e&&e.length)for(var s=0;s<e.length;++s)e[s].filename=o[s].name,e[s].isImage=/image./.test(o[s].type);n.callback(e)},complete:function(){n.uploadForm[0].reset(),setTimeout(g.remove,100,i)}}),!1}),n.uploadForm.submit()},f}.apply(p,m),d!==void 0&&(h.exports=d)}}]);

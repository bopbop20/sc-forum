(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[9743,7214,6503,6027,3014,3230,588,2735,882,71,3034,9191,3564,831,7927,7913,7804,5482],{7927:(v,E,u)=>{"use strict";var h,g;h=[u(32230),u(7237),u(85233)],g=function(d,l,c){const i={};i.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const n=$("#"+t.alert_id);n.length?o(n,t):m(t)},i.success=function(t,n){i.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:n||5e3})},i.error=function(t,n){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}i.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:n||1e4})},i.remove=function(t){$("#alert_button_"+t).remove()};function m(t){app.parseAndTranslate("alert",t,function(n){let e=$("#"+t.alert_id);if(e.length)return o(e,t);e=n,e.fadeIn(200),l.get("toaster/tray").prepend(e),typeof t.closefn=="function"&&e.find("button").on("click",function(){return t.closefn(),s(e),!1}),t.timeout&&a(e,t),typeof t.clickfn=="function"&&e.addClass("pointer").on("click",function(r){$(r.target).is(".close")||t.clickfn(e,t),s(e)}),c.fire("action:alert.new",{alert:e,params:t})})}function o(t,n){t.find("strong").translateHtml(n.title),t.find("p").translateHtml(n.message),t.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),n.timeout&&a(t,n),c.fire("action:alert.update",{alert:t,params:n}),t.off("click").removeClass("pointer"),typeof n.clickfn=="function"&&t.addClass("pointer").on("click",function(e){$(e.target).is(".close")||n.clickfn(),s(t)})}function s(t){t.fadeOut(500,function(){$(this).remove()})}function a(t,n){const e=n.timeout,r=setTimeout(function(){s(t),typeof n.timeoutfn=="function"&&n.timeoutfn(t,n)},e);t.attr("timeoutId",r),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(e+450)+"ms linear, background-color "+(e+450)+"ms ease-in"),t.addClass("animate"),c.fire("action:alert.animate",{alert:t,params:n})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return i}.apply(E,h),g!==void 0&&(v.exports=g)},74344:(v,E,u)=>{"use strict";var h,g;h=[u(85233)],g=(d=>{const l={},c=config.relative_path+"/api/v3";function i(m,o){m.url=m.url.startsWith("/api")?config.relative_path+m.url:c+m.url;async function s(a){({options:m}=await d.fire("filter:api.options",{options:m})),$.ajax(m).done(t=>{a(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})}).fail(t=>{let n;t.responseJSON&&(n=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),a(new Error(n||t.statusText))})}if(typeof o=="function"){s(o);return}return new Promise((a,t)=>{s(function(n,e){n?t(n):a(e)})})}return l.get=(m,o,s)=>i({url:m+(o&&Object.keys(o).length?"?"+$.param(o):"")},s),l.head=(m,o,s)=>i({url:m+(o&&Object.keys(o).length?"?"+$.param(o):""),method:"head"},s),l.post=(m,o,s)=>i({url:m,method:"post",data:JSON.stringify(o||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),l.patch=(m,o,s)=>i({url:m,method:"patch",data:JSON.stringify(o||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),l.put=(m,o,s)=>i({url:m,method:"put",data:JSON.stringify(o||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),l.del=(m,o,s)=>i({url:m,method:"delete",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),l.delete=l.del,l}).apply(E,h),g!==void 0&&(v.exports=g)},7237:(v,E,u)=>{"use strict";var h;h=function(){const g={};return g.core={"topic/teaser":function(d){return d?$('[component="category/topic"][data-tid="'+d+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(d,l){return $('[component="topic"][data-'+d+'="'+l+'"]')},post:function(d,l){return $('[component="post"][data-'+d+'="'+l+'"]')},"post/content":function(d){return $('[component="post"][data-pid="'+d+'"] [component="post/content"]')},"post/header":function(d){return $('[component="post"][data-pid="'+d+'"] [component="post/header"]')},"post/anchor":function(d){return $('[component="post"][data-index="'+d+'"] [component="post/anchor"]')},"post/vote-count":function(d){return $('[component="post"][data-pid="'+d+'"] [component="post/vote-count"]')},"post/bookmark-count":function(d){return $('[component="post"][data-pid="'+d+'"] [component="post/bookmark-count"]')},"user/postcount":function(d){return $('[component="user/postcount"][data-uid="'+d+'"]')},"user/reputation":function(d){return $('[component="user/reputation"][data-uid="'+d+'"]')},"category/topic":function(d,l){return $('[component="category/topic"][data-'+d+'="'+l+'"]')},"categories/category":function(d,l){return $('[component="categories/category"][data-'+d+'="'+l+'"]')},"chat/message":function(d){return $('[component="chat/message"][data-mid="'+d+'"]')},"chat/message/body":function(d){return $('[component="chat/message"][data-mid="'+d+'"] [component="chat/message/body"]')},"chat/recent/room":function(d){return $('[component="chat/recent/room"][data-roomid="'+d+'"]')}},g.get=function(){const d=Array.prototype.slice.call(arguments,1);return g.core[arguments[0]]&&d.length?g.core[arguments[0]].apply(this,d):$('[component="'+arguments[0]+'"]')},g}.call(E,u,E,v),h!==void 0&&(v.exports=h)},47913:(v,E,u)=>{v.exports=u(66485)},45482:(v,E,u)=>{v.exports=u(35729)},83713:(v,E,u)=>{v.exports=u(51077)},38259:(v,E,u)=>{v.exports=u(65616)},27145:(v,E,u)=>{"use strict";v=u.nmd(v);var h,g;h=[u(59006),u(32230),u(85233)],g=function(d,l,c){const i={};i.init=function(){const t=this;d.render("modules/taskbar",{}).then(function(n){t.taskbar=$(n),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",async function(){const e=$(this),r=e.attr("data-module"),f=e.attr("data-uuid"),p=await app.require(r);return e.hasClass("active")?p.minimize(f):(o(),p.load(f),i.toggleNew(f,!1),i.tasklist.removeClass("active"),e.addClass("active")),!1})}),$(window).on("action:app.loggedOut",function(){i.closeAll()})},i.close=async function(t,n){const e=i.tasklist.find('[data-module="'+v+'"][data-uuid="'+n+'"]');let r="close";if(t==="chat"&&(r="closeByUUID"),e.length){const f=await app.require(t);f&&typeof f[r]=="function"&&f[r](n)}},i.closeAll=function(t){let n="[data-uuid]";t&&(n='[data-module="'+t+'"]'+n),i.tasklist.find(n).each(function(e,r){i.close(t||r.getAttribute("data-module"),r.getAttribute("data-uuid"))})},i.discard=function(t,n){i.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]').remove(),m()},i.push=function(t,n,e,r){r=r||function(){};const f=i.tasklist.find('li[data-uuid="'+n+'"]'),p={module:t,uuid:n,options:e,element:f};c.fire("filter:taskbar.push",p),!f.length&&p.module?s(p,r):r(f)},i.get=function(t){return $('[data-module="'+t+'"]').map(function(e,r){return $(r).data()})},i.minimize=function(t,n){i.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]').toggleClass("active",!1)},i.toggleNew=function(t,n,e){i.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",n),e||c.fire("action:taskbar.toggleNew",t)},i.updateActive=function(t){const n=i.tasklist.find("li");n.removeClass("active"),n.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},i.isActive=function(t){return i.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function m(){i.tasklist.find("li").length>0?i.taskbar.attr("data-active","1"):i.taskbar.removeAttr("data-active")}function o(){i.tasklist.find(".active").removeClass("active")}function s(t,n){l.translate(t.options.title,function(e){const r=$("<div></div>").text(e||"NodeBB Task").html(),f=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+r+'" component="taskbar/title">'+r+"</span></a>").attr({title:r,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&o(),i.tasklist.append(f),m(),t.element=f,f.data(t),c.fire("action:taskbar.pushed",t),n(f)})}const a=function(t,n,e){switch(n){case"title":t.find('[component="taskbar/title"]').text(e);break;case"icon":t.find("i").attr("class","fa fa-"+e);break;case"image":t.find("a").css("background-image",e?'url("'+e.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",e);break}};return i.update=function(t,n,e){const r=i.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]');if(!r.length)return;const f=r.data();Object.keys(e).forEach(function(p){f[p]=e[p],a(r,p,e[p])}),r.data(f)},i}.apply(E,h),g!==void 0&&(v.exports=g)},62023:(v,E,u)=>{"use strict";var h,g;h=[u(74344),u(31369),u(7927),u(50431),u(59006),u(32230),u(62526)],g=function(d,l,c,i,m,o){const s={};return s.get=a=>d.get(`/topics/${a}/thumbs`,{}),s.getByPid=a=>d.get(`/posts/${a}`,{}).then(t=>s.get(t.tid)),s.delete=(a,t)=>d.del(`/topics/${a}/thumbs`,{path:t}),s.deleteAll=a=>{s.get(a).then(t=>{Promise.all(t.map(n=>s.delete(a,n.url)))})},s.upload=a=>new Promise(t=>{i.show({title:"[[topic:composer.thumb_title]]",method:"put",route:config.relative_path+`/api/v3/topics/${a}/thumbs`},function(n){t(n)})}),s.modal={},s.modal.open=function(a){const{id:t,pid:n}=a;let{modal:e}=a,r;return new Promise(f=>{Promise.all([s.get(t),n?s.getByPid(n):[]]).then(p=>new Promise(S=>{const A=p.reduce((I,b)=>I.concat(b));r=A.length,S(A)})).then(p=>m.render("modals/topic-thumbs",{thumbs:p})).then(p=>{e?o.translate(p,function(S){e.find(".bootbox-body").html(S),s.modal.handleSort({modal:e,numThumbs:r})}):(e=l.dialog({title:"[[modules:thumbs.modal.title]]",message:p,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(s.upload(t).then(()=>{s.modal.open({...a,modal:e}),Promise.all([u.e(1006),u.e(2265),u.e(9915),u.e(7804)]).then(function(){var S=[u(44541)];(A=>{A.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),f()}).apply(null,S)}).catch(u.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),s.modal.handleDelete({...a,modal:e}),s.modal.handleSort({modal:e,numThumbs:r}))})})},s.modal.handleDelete=a=>{a.modal.get(0).addEventListener("click",n=>{n.target.closest('button[data-action="remove"]')&&l.confirm("[[modules:thumbs.modal.confirm-remove]]",e=>{if(!e)return;const r=n.target.closest(".media[data-id]").getAttribute("data-id"),f=n.target.closest(".media[data-path]").getAttribute("data-path");d.del(`/topics/${r}/thumbs`,{path:f}).then(()=>{s.modal.open(a)}).catch(c.error)})})},s.modal.handleSort=({modal:a,numThumbs:t})=>{if(t>1){const n=a.find(".topic-thumbs-modal");n.sortable({items:"[data-id]"}),n.on("sortupdate",s.modal.handleSortChange)}},s.modal.handleSortChange=(a,t)=>{const n=t.item.get(0).parentNode.querySelectorAll("[data-id]");Array.from(n).forEach((e,r)=>{const f=e.getAttribute("data-id");let p=e.getAttribute("data-path");p=p.replace(new RegExp(`^${config.upload_url}`),""),d.put(`/topics/${f}/thumbs/order`,{path:p,order:r}).catch(c.error)})},s}.apply(E,h),g!==void 0&&(v.exports=g)},50431:(v,E,u)=>{"use strict";var h,g;h=[u(86569)],g=function(){const d={};d.show=function(o,s){const a=o.hasOwnProperty("fileSize")&&o.fileSize!==void 0?parseInt(o.fileSize,10):!1;app.parseAndTranslate("partials/modals/upload_file_modal",{showHelp:o.hasOwnProperty("showHelp")&&o.showHelp!==void 0?o.showHelp:!0,fileSize:a,title:o.title||"[[global:upload_file]]",description:o.description||"",button:o.button||"[[global:upload]]",accept:o.accept?o.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const n=t.find("#uploadForm");n.attr("action",o.route),n.find("#params").val(JSON.stringify(o.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),n.submit()}),n.submit(function(){return l(t,a,s),!1})})},d.hideAlerts=function(o){$(o).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function l(o,s,a){c(o,"status","[[uploads:uploading-file]]"),o.find("#upload-progress-bar").css("width","0%"),o.find("#upload-progress-box").show().removeClass("hide");const t=o.find("#fileInput");if(!t.val())return c(o,"error","[[uploads:select-file-to-upload]]");if(!m(t[0],s))return c(o,"error","[[error:file-too-big, "+s+"]]");d.ajaxSubmit(o,a)}function c(o,s,a){d.hideAlerts(o),s==="error"&&o.find("#fileUploadSubmitBtn").removeClass("disabled"),o.find("#alert-"+s).translateText(a).removeClass("hide")}d.ajaxSubmit=function(o,s){o.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=i(t),c(o,"error",t.responseJSON?t.responseJSON.error||t.statusText:"error uploading, code : "+t.status)},uploadProgress:function(t,n,e,r){o.find("#upload-progress-bar").css("width",r+"%")},success:function(t){let n=i(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(n=t.response.images),s(n[0].url),c(o,"success","[[uploads:upload-success]]"),setTimeout(function(){d.hideAlerts(o),o.modal("hide")},750)}})};function i(o){if(typeof o=="string")try{return $.parseJSON(o)}catch{return{error:"[[error:parse-error]]"}}return o}function m(o,s){return window.FileReader&&s?o.files[0].size<=s*1e3:!0}return d}.apply(E,h),g!==void 0&&(v.exports=g)},66485:(v,E,u)=>{"use strict";var h,g;h=[u(74344),u(7927)],g=function(d,l){var c={},i;c.init=function(t,n){var e=t.find(".draft-icon");function r(){m(),i=setTimeout(function(){s(t,e,n)},1e3)}t.on("keyup","textarea, input.handle, input.title",r),t.on("click",'input[type="checkbox"]',r),t.on("thumb.uploaded",r),e.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){var f=[];try{f=localStorage.getItem("drafts:open"),f=JSON.parse(f)||[]}catch{console.warn("[composer/drafts] Could not read list of open/available drafts"),f=[]}f.length&&f.forEach(function(p){c.updateVisibility("open",p)})}),c.migrateGuest(),c.migrateThumbs(...arguments)};function m(){i&&(clearTimeout(i),i=0)}c.getDraft=function(t){return console.warn("[composer/drafts] drafts.getDraft is deprecated! Use drafts.get() instead."),localStorage.getItem(t)};function o(t){return parseInt(t,10)>0?localStorage:sessionStorage}c.get=function(t){var n=t.split(":")[1],e=o(n),r={text:e.getItem(t)};return["cid","title","tags","uuid"].forEach(function(f){const p=e.getItem(t+":"+f);p&&(r[f]=p)}),parseInt(n,10)||(r.handle=e.getItem(t+":handle")),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:r,storage:e}),r};function s(t,n,e){if(a(app.user.uid?"localStorage":"sessionStorage")&&e&&e.save_id&&t.length){const S=t.find("input.title"),A=S&&S.val();var r=t.find("textarea").val(),f=o(app.user.uid);if(e.hasOwnProperty("cid")&&!e.save_id.endsWith(":cid:"+e.cid)&&(c.removeDraft(e.save_id),e.save_id=e.save_id.replace(/cid:\d+$/,"cid:"+e.cid)),r.length||A&&A.length){if(f.setItem(e.save_id,r),f.setItem(`${e.save_id}:uuid`,t.attr("data-uuid")),e.hasOwnProperty("cid")){const I=t.find("input.tags").val();f.setItem(e.save_id+":tags",I),f.setItem(e.save_id+":title",A)}if(!app.user.uid){var p=t.find("input.handle").val();f.setItem(e.save_id+":handle",p)}$(window).trigger("action:composer.drafts.save",{storage:f,postData:e,postContainer:t}),n.toggleClass("active",!0)}else c.removeDraft(e.save_id)}}c.removeDraft=function(t){if(!t)return;m(),c.updateVisibility("available",t),c.updateVisibility("open",t);var n=t.split(":")[1],e=o(n);Object.keys(e).filter(f=>f.startsWith(t)).forEach(f=>e.removeItem(f))},c.updateVisibility=function(t,n,e){if(!(!a(app.user.uid?"localStorage":"sessionStorage")||!n)){var r=[];try{r=localStorage.getItem("drafts:"+t),r=r?JSON.parse(r):[]}catch{console.warn("[composer/drafts] Could not read list of open drafts"),r=[]}var f=r.indexOf(n);e&&f===-1?r.push(n):!e&&f!==-1&&r.splice(f,1),localStorage.setItem("drafts:"+t,JSON.stringify(r))}},c.migrateGuest=function(){if(a("localStorage")&&app.user.uid){var t=/^composer:\d+:\w+:\d+(:\w+)?$/,n=Object.keys(sessionStorage).filter(function(f){return t.test(f)}),e=new Set([]),r=n.map(function(f){var p=f.split(":");return p[1]=app.user.uid,e.add(p.slice(0,4).join(":")),p.join(":")});return n.forEach(function(f,p){localStorage.setItem(r[p],sessionStorage.getItem(f)),sessionStorage.removeItem(f)}),e.forEach(function(f){c.updateVisibility("available",f,1)}),e}},c.migrateThumbs=function(t,n){if(!app.uid)return;const e=t.attr("data-uuid"),r=c.get(n.save_id);r&&r.uuid&&d.put(`/topics/${r.uuid}/thumbs`,{tid:e}).then(()=>{Promise.all([u.e(6177),u.e(2526),u.e(1006),u.e(2265),u.e(9915),u.e(5482)]).then(function(){var f=[u(44541)];(function(p){p.updateThumbCount(e,t)}).apply(null,f)}).catch(u.oe)})},c.loadOpen=function(){if(!(ajaxify.data.template.login||ajaxify.data.template.register)){var t,n=[];try{t=localStorage.getItem("drafts:available"),n=localStorage.getItem("drafts:open"),t=JSON.parse(t)||[],n=JSON.parse(n)||[]}catch{console.warn("[composer/drafts] Could not read list of open/available drafts"),t=[],n=[]}t.length&&t.forEach(function(e){if(e){var r=e.split(":"),f=r[1],p=r[2],S=r[3],A=c.get(e);if(n.indexOf(e)===-1&&parseInt(app.user.uid,10)===parseInt(f,10)){if(!A||A.text&&A.title&&!A.text.title&&!A.text.length){c.updateVisibility("available",e),c.updateVisibility("open",e);return}Promise.all([u.e(6177),u.e(2526),u.e(1006),u.e(2265),u.e(9915),u.e(5482)]).then(function(){var I=[u(44541)];(function(b){p==="cid"?b.newTopic({cid:S,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(A.handle),title:utils.escapeHTML(A.title),body:utils.escapeHTML(A.text),tags:String(A.tags||"").split(",")}):p==="tid"?d.get("/topics/"+S,{},function(w,y){if(w)return l.error(w);b.newReply(S,void 0,y.title,utils.escapeHTML(A.text))}):p==="pid"&&b.editPost(S)}).apply(null,I)}).catch(u.oe)}}})}};function a(t){var n;try{n=window[t];var e="__storage_test__";return n.setItem(e,e),n.removeItem(e),!0}catch(r){return r instanceof DOMException&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&n&&n.length!==0}}return c}.apply(E,h),g!==void 0&&(v.exports=g)},35729:(v,E,u)=>{"use strict";var h,g;h=[u(83713),u(38259),u(62023),u(10577)],g=function(d,l,c,i){var m={},o={picture:function(){var a=this;a.find("#files").click()},upload:function(){var a=this;a.find("#files").click()},thumbs:function(){m.exitFullscreen();var a=this;Promise.all([u.e(1006),u.e(2265),u.e(9915),u.e(7913)]).then(function(){var t=[u(44541)];(function(n){const e=a.get(0).getAttribute("data-uuid"),r=n.posts[e];(r.action==="topics.post"||r.action==="posts.edit"&&r.isMain)&&c.modal.open({id:e,pid:r.pid}).then(()=>{a.trigger("thumb.uploaded"),n.updateThumbCount(e,a)})}).apply(null,t)}).catch(u.oe)},tags:function(){var a=this;a.find(".tags-container").toggleClass("hidden")},zen:function(){var a=this;$(window).one("resize",function(){function t(){i.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),l.reposition(a),$(window).off("resize",t))}i.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),a.find(".write").focus(),$(window).on("resize",t),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",i.exit))}),i.toggle(a.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:a})}},s=[];return m.exitFullscreen=function(){i.isEnabled&&i.isFullscreen&&i.exit()},m.addComposerButtons=function(){for(var a=0,t=s.length;a<t;a++)$(".formatting-bar .formatting-group #fileForm").before('<li tabindex="-1" data-format="'+s[a].name+'" title="'+(s[a].title||"")+'"><i class="'+s[a].iconClass+'"></i></li>')},m.addButton=function(a,t,n,e){e=e||a.replace("fa fa-",""),o[e]=t,s.push({name:e,iconClass:a,title:n})},m.getDispatchTable=function(){return o},m.addButtonDispatch=function(a,t){o[a]=t},m.addHandler=function(a){a.on("click",".formatting-bar li",function(t){var n=$(this).attr("data-format"),e=$(this).parents('[component="composer"]').find("textarea")[0];o.hasOwnProperty(n)&&(o[n].call(a,e,e.selectionStart,e.selectionEnd,t),d.render(a))})},m}.apply(E,h),g!==void 0&&(v.exports=g)},51077:(v,E,u)=>{"use strict";var h,g;h=[u(85233)],g=function(d){var l={};return l.render=function(c,i){if(i=i||function(){},!c.find(".preview-container").is(":visible"))return i();var m=c.find("textarea");socket.emit("plugins.composer.renderPreview",m.val(),function(o,s){o||(s=$("<div>"+s+"</div>"),s.find("img:not(.not-responsive)").addClass("img-responsive"),c.find(".preview").html(s),d.fire("action:composer.preview"),i())})},l.matchScroll=function(c){if(c.find(".preview-container").is(":visible")){var i=c.find("textarea"),m=c.find(".preview");if(i.length&&m.length){var o=i[0].scrollHeight-i.height();if(o===0)return;var s=i.scrollTop()/o;m.scrollTop(Math.max(m[0].scrollHeight-m.height(),0)*s)}}},l.handleToggler=function(c){l.env=utils.findBootstrapEnvironment();var i=c.find(".write-container .toggle-preview"),m=c.find(".preview-container .toggle-preview"),o=$(".preview-container"),s=$(".write-container");function a(){n(!1),l.env!=="xs"&&l.env!=="sm"&&localStorage.setItem("composer:previewToggled",!0)}function t(){n(!0),l.env!=="xs"&&l.env!=="sm"&&localStorage.removeItem("composer:previewToggled")}function n(e){l.env==="xs"||l.env==="sm"?(o.toggleClass("hide",!1),s.toggleClass("maximized",!1),i.toggleClass("hide",!0),o.toggleClass("hidden-xs hidden-sm",!e),s.toggleClass("hidden-xs hidden-sm",e),e&&l.render(c)):(o.toggleClass("hide",!e),s.toggleClass("maximized",!e),i.toggleClass("hide",e)),l.matchScroll(c)}l.toggle=n,m.on("click",function(){a(),c.find(".write").focus()}),i.on("click",function(){t(),c.find(".write").focus()}),localStorage.getItem("composer:previewToggled")||l.env==="xs"||l.env==="sm"?a():t()},l}.apply(E,h),g!==void 0&&(v.exports=g)},65616:(v,E,u)=>{"use strict";var h,g;h=[u(27145)],g=function(d){var l={},c=0,i=.3,m=.05,o=992,s=$("body"),a=$(window),t=$('[component="navbar"]'),n=document.body,e=t[0];function r(){return localStorage.getItem("composer:resizeRatio")||.5}function f(b){localStorage.setItem("composer:resizeRatio",Math.min(b,1))}function p(){var b;e?b=e.getBoundingClientRect():b={bottom:0};var w=Math.max(b.bottom,0),y={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return y.width=y.right,y.height=y.bottom,y.boundedTop=w,y.boundedHeight=y.bottom-w,y}function S(b,w){var y=p(),R=b[0],z=window.getComputedStyle(R),B=parseInt(z.getPropertyValue("min-height"),10),D=Math.max(B/window.innerHeight,i);if(y.width>=o){const k=(y.height-y.boundedHeight)/y.height;w=Math.min(Math.max(w,D+k),1);var N=w*y.boundedHeight/y.height;R.style.top=((1-N)*100).toString()+"%";var P=R.getBoundingClientRect();n.style.paddingBottom=(P.bottom-P.top).toString()+"px"}else b.removeAttr("style"),n.style.paddingBottom=0;b.ratio=w,R.style.visibility="visible",d.updateActive(b.attr("data-uuid"))}var A=S,I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return I&&(A=function(b,w){I(function(){S(b,w),setTimeout(function(){a.trigger("action:composer.resize"),b.trigger("action:composer.resize")},0)})}),l.reposition=function(b){var w=r();w>=1-m&&(w=1,b.addClass("maximized")),A(b,w)},l.maximize=function(b,w){w?A(b,1):l.reposition(b)},l.handleResize=function(b){var w=0,y=0,R=0,z=b.find(".resizer"),B=z[0];function D(x){var T=B.getBoundingClientRect(),F=(T.top+T.bottom)/2;w=(F-x.clientY)/2,y=x.clientY,a.on("mousemove",N),a.on("mouseup",P),s.on("touchmove",k)}function N(x){var T=x.clientY-w,F=p(),C=(F.height-T)/F.boundedHeight;A(b,C)}function P(x){x.preventDefault(),R=x.clientY,b.find("textarea").focus(),a.off("mousemove",N),a.off("mouseup",P),s.off("touchmove",k);var T=R-w,F=p(),C=(F.height-T)/F.boundedHeight;R-y===0&&b.hasClass("maximized")?(b.removeClass("maximized"),C=!c||c>=1-m?.5:c,A(b,C)):R-y===0||C>=1-m?(A(b,1),b.addClass("maximized"),c=C):b.removeClass("maximized"),f(C)}function k(x){x.preventDefault(),N(x.touches[0])}z.on("mousedown",function(x){x.preventDefault(),D(x)}).on("touchstart",function(x){x.preventDefault(),D(x.touches[0])}).on("touchend",P)},l}.apply(E,h),g!==void 0&&(v.exports=g)},10577:v=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var E=typeof window<"u"&&typeof window.document<"u"?window.document:{},u=v.exports,h=function(){for(var l,c=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,m=c.length,o={};i<m;i++)if(l=c[i],l&&l[1]in E){for(i=0;i<l.length;i++)o[c[0][i]]=l[i];return o}return!1}(),g={change:h.fullscreenchange,error:h.fullscreenerror},d={request:function(l,c){return new Promise(function(i,m){var o=function(){this.off("change",o),i()}.bind(this);this.on("change",o),l=l||E.documentElement;var s=l[h.requestFullscreen](c);s instanceof Promise&&s.then(o).catch(m)}.bind(this))},exit:function(){return new Promise(function(l,c){if(!this.isFullscreen){l();return}var i=function(){this.off("change",i),l()}.bind(this);this.on("change",i);var m=E[h.exitFullscreen]();m instanceof Promise&&m.then(i).catch(c)}.bind(this))},toggle:function(l,c){return this.isFullscreen?this.exit():this.request(l,c)},onchange:function(l){this.on("change",l)},onerror:function(l){this.on("error",l)},on:function(l,c){var i=g[l];i&&E.addEventListener(i,c,!1)},off:function(l,c){var i=g[l];i&&E.removeEventListener(i,c,!1)},raw:h};if(!h){u?v.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(d,{isFullscreen:{get:function(){return Boolean(E[h.fullscreenElement])}},element:{enumerable:!0,get:function(){return E[h.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(E[h.fullscreenEnabled])}}}),u?v.exports=d:window.screenfull=d})()}}]);

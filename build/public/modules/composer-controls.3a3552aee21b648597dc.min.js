(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7986,2735],{99398:(u,g,v)=>{u.exports=v(18196)},83713:(u,g,v)=>{u.exports=v(51077)},18196:(u,g,v)=>{"use strict";var p,f;p=[v(83713)],f=function(h){var i={};return i.insertIntoTextarea=function(e,n){var t={context:this,textarea:e,value:n,preventDefault:!1};if($(window).trigger("action:composer.insertIntoTextarea",t),!t.preventDefault){var r=$(t.textarea),a=r.val(),s=r.parents('[component="composer"]');r.val(a.slice(0,t.textarea.selectionStart)+t.value+a.slice(t.textarea.selectionStart)),h.render(s)}},i.wrapSelectionInTextareaWith=function(e,n,t){var r={context:this,textarea:e,leading:n,trailing:t,preventDefault:!1};if($(window).trigger("action:composer.wrapSelectionInTextareaWith",r),!r.preventDefault){t===void 0&&(t=n);var a=$(e),s=a.val(),o=/^(\s*)([\s\S]*?)(\s*)$/.exec(s.slice(e.selectionStart,e.selectionEnd));return o[2]||(o=[null,"",s.slice(e.selectionStart,e.selectionEnd),""]),a.val(s.slice(0,e.selectionStart)+o[1]+n+o[2]+t+o[3]+s.slice(e.selectionEnd)),[o[1].length,o[3].length]}},i.updateTextareaSelection=function(e,n,t){var r={context:this,textarea:e,start:n,end:t,preventDefault:!1};$(window).trigger("action:composer.updateTextareaSelection",r),!r.preventDefault&&(e.setSelectionRange(r.start,r.end),$(r.textarea).focus())},i.getBlockData=function(e,n,t){var r=e.value;n=n.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var a=new RegExp(n,"g"),s,o=[],c;for(r=r.split(`
`).reduce(function(l,d){return l!==null||(l=t<=d.length?d:null,l===null&&(t-=d.length+1)),l},null);(s=a.exec(r))!==null;)o.push(s.index);return c={in:!!(o.reduce(function(l,d){return t>=d+2&&(l+=1),l},0)%2),atEnd:o.reduce(function(l,d){return l||t===d},!1)},c.atEnd=c.in?c.atEnd:!1,c},i}.apply(g,p),f!==void 0&&(u.exports=f)},51077:(u,g,v)=>{"use strict";var p,f;p=[v(85233)],f=function(h){var i={};return i.render=function(e,n){if(n=n||function(){},!e.find(".preview-container").is(":visible"))return n();var t=e.find("textarea");socket.emit("plugins.composer.renderPreview",t.val(),function(r,a){r||(a=$("<div>"+a+"</div>"),a.find("img:not(.not-responsive)").addClass("img-responsive"),e.find(".preview").html(a),h.fire("action:composer.preview"),n())})},i.matchScroll=function(e){if(e.find(".preview-container").is(":visible")){var n=e.find("textarea"),t=e.find(".preview");if(n.length&&t.length){var r=n[0].scrollHeight-n.height();if(r===0)return;var a=n.scrollTop()/r;t.scrollTop(Math.max(t[0].scrollHeight-t.height(),0)*a)}}},i.handleToggler=function(e){i.env=utils.findBootstrapEnvironment();var n=e.find(".write-container .toggle-preview"),t=e.find(".preview-container .toggle-preview"),r=$(".preview-container"),a=$(".write-container");function s(){c(!1),i.env!=="xs"&&i.env!=="sm"&&localStorage.setItem("composer:previewToggled",!0)}function o(){c(!0),i.env!=="xs"&&i.env!=="sm"&&localStorage.removeItem("composer:previewToggled")}function c(l){i.env==="xs"||i.env==="sm"?(r.toggleClass("hide",!1),a.toggleClass("maximized",!1),n.toggleClass("hide",!0),r.toggleClass("hidden-xs hidden-sm",!l),a.toggleClass("hidden-xs hidden-sm",l),l&&i.render(e)):(r.toggleClass("hide",!l),a.toggleClass("maximized",!l),n.toggleClass("hide",l)),i.matchScroll(e)}i.toggle=c,t.on("click",function(){s(),e.find(".write").focus()}),n.on("click",function(){o(),e.find(".write").focus()}),localStorage.getItem("composer:previewToggled")||i.env==="xs"||i.env==="sm"?s():o()},i}.apply(g,p),f!==void 0&&(u.exports=f)}}]);

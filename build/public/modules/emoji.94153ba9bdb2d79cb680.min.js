(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1322],{40646:(d,v,u)=>{d.exports=u(82938)},82938:(d,v,u)=>{var g,m;g=[u,v],m=function(M,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.strategy=t.search=t.table=t.buildEmoji=t.buster=t.base=void 0;var E=config.assetBaseUrl+"/plugins/nodebb-plugin-emoji";t.base=E;var A=config["cache-buster"];t.buster=A;function b(n,a){var s=":"+n.name+":",o=a?" defer":"";return n.image?`<img
      `+(a?"data-":"")+'src="'+E+"/emoji/"+n.pack+"/"+n.image+"?"+A+`"
      class="not-responsive emoji emoji-`+n.pack+" emoji--"+n.name+" "+o+`"
      title="`+s+`"
      alt="`+n.character+`"
    />`:`<span
    class="emoji-`+n.pack+" emoji--"+n.name+`"
    title="`+s+`"
  ><span>`+n.character+"</span></span>"}t.buildEmoji=b,t.strategy={match:/\B:([^\s\n:]+)$/,search:function(n,a){a(t.search(n.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(n){return":"+n.name+": "},template:function(n){return b(n)+" "+n.name},cache:!0};var h;function y(n){return h=h||Promise.all([new Promise(function(a,s){u.e(2645).then(function(){var o=[u(91919)];a.apply(null,o)}.bind(this)).catch(s.bind(this))}),new Promise(function(a,s){u.e(320).then(function(){var o=[u(78726)];a.apply(null,o)}.bind(this)).catch(s.bind(this))}),new Promise(function(a,s){Promise.all([u.e(6177),u.e(2526),u.e(588)]).then(function(){var o=[u(45482)];a.apply(null,o)}.bind(this)).catch(s.bind(this))}),$.getJSON(E+"/emoji/table.json?"+A)]).then(function(a){var s=a[0],o=a[1],P=a[2],C=a[3];t.table=C;var D=Object.keys(t.table).map(function(c){var i=t.table[c];return{name:c,aliases:i.aliases,keywords:i.keywords,character:i.character,image:i.image,pack:i.pack}});function R(c,i){for(var e=i.length,r=0;r<e;r+=1)if(s(c,i[r]))return i[r];return null}function p(c){function i(e,r){var l=r*(1+o(c,e));return e.startsWith(c)?l-2:l}return D.filter(function(e){if(s(c,e.name))return e.score=i(e.name,1),!0;var r=R(c,e.aliases);if(r)return e.score=i(r,3),!0;var l=R(c,e.keywords);return l?(e.score=i(l,7),!0):!1}).sort(function(e,r){return e.score-r.score}).sort(function(e,r){var l=+e.name.startsWith(c),f=+r.name.startsWith(c);return f-l})}t.search=p,P.addButtonDispatch("emoji-add-emoji",function(c,i,e,r){new Promise(function(l,f){u.e(5400).then(function(){var B=[u(6721)];l.apply(null,B)}.bind(this)).catch(f.bind(this))}).then(function(l){var f=l.toggleForInsert;return f(c,i,e,r)})})}).catch(function(a){var s=Error("[[emoji:meta-load-failed]]");throw console.error(s),app.alertError(s),a}),n&&h.then(function(){return setTimeout(n,0)}),h}t.init=y}.apply(v,g),m!==void 0&&(d.exports=m)}}]);

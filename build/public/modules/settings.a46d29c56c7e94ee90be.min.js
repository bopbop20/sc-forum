"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5655,7214,6503,6027,71,7927],{7927:(k,C,u)=>{var A,p;A=[u(32230),u(7237),u(85233)],p=function(s,d,r){const h={};h.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const e=$("#"+t.alert_id);e.length?f(e,t):R(t)},h.success=function(t,e){h.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},h.error=function(t,e){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}h.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},h.remove=function(t){$("#alert_button_"+t).remove()};function R(t){app.parseAndTranslate("alert",t,function(e){let o=$("#"+t.alert_id);if(o.length)return f(o,t);o=e,o.fadeIn(200),d.get("toaster/tray").prepend(o),typeof t.closefn=="function"&&o.find("button").on("click",function(){return t.closefn(),m(o),!1}),t.timeout&&n(o,t),typeof t.clickfn=="function"&&o.addClass("pointer").on("click",function(c){$(c.target).is(".close")||t.clickfn(o,t),m(o)}),r.fire("action:alert.new",{alert:o,params:t})})}function f(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&n(t,e),r.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),typeof e.clickfn=="function"&&t.addClass("pointer").on("click",function(o){$(o.target).is(".close")||e.clickfn(),m(t)})}function m(t){t.fadeOut(500,function(){$(this).remove()})}function n(t,e){const o=e.timeout,c=setTimeout(function(){m(t),typeof e.timeoutfn=="function"&&e.timeoutfn(t,e)},o);t.attr("timeoutId",c),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),r.fire("action:alert.animate",{alert:t,params:e})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return h}.apply(C,A),p!==void 0&&(k.exports=p)},7237:(k,C,u)=>{var A;A=function(){const p={};return p.core={"topic/teaser":function(s){return s?$('[component="category/topic"][data-tid="'+s+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(s,d){return $('[component="topic"][data-'+s+'="'+d+'"]')},post:function(s,d){return $('[component="post"][data-'+s+'="'+d+'"]')},"post/content":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/content"]')},"post/header":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/header"]')},"post/anchor":function(s){return $('[component="post"][data-index="'+s+'"] [component="post/anchor"]')},"post/vote-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/vote-count"]')},"post/bookmark-count":function(s){return $('[component="post"][data-pid="'+s+'"] [component="post/bookmark-count"]')},"user/postcount":function(s){return $('[component="user/postcount"][data-uid="'+s+'"]')},"user/reputation":function(s){return $('[component="user/reputation"][data-uid="'+s+'"]')},"category/topic":function(s,d){return $('[component="category/topic"][data-'+s+'="'+d+'"]')},"categories/category":function(s,d){return $('[component="categories/category"][data-'+s+'="'+d+'"]')},"chat/message":function(s){return $('[component="chat/message"][data-mid="'+s+'"]')},"chat/message/body":function(s){return $('[component="chat/message"][data-mid="'+s+'"] [component="chat/message/body"]')},"chat/recent/room":function(s){return $('[component="chat/recent/room"][data-roomid="'+s+'"]')}},p.get=function(){const s=Array.prototype.slice.call(arguments,1);return p.core[arguments[0]]&&s.length?p.core[arguments[0]].apply(this,s):$('[component="'+arguments[0]+'"]')},p}.call(C,u,C,k),A!==void 0&&(k.exports=A)},18340:(k,C,u)=>{var A,p;A=[u(85233),u(7927)],p=function(s,d){let r,h=[],R=0,f;function m(n,t){typeof n!="string"&&(n=$(n),n=n.data("type")||n.attr("type")||n.prop("tagName"));const e=r.plugins[n.toLowerCase()];if(e==null)return;const o=e[t];return typeof o=="function"?o:null}return f={deepClone:function(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n},createElement:function(n,t,e){const o=document.createElement(n);for(const c in t)t.hasOwnProperty(c)&&o.setAttribute(c,t[c]);return e&&o.appendChild(document.createTextNode(e)),o},initElement:function(n){const t=m(n,"init");t?.call(r,$(n))},destructElement:function(n){const t=m(n,"destruct");t?.call(r,$(n))},createElementOfType:function(n,t,e){let o;const c=m(n,"create");return c!=null?o=$(c.call(r,n,t,e)):(e==null&&(e={}),n!=null&&(e.type=n),o=$(f.createElement(t||"input",e))),o.data("type",n),f.initElement(o),o},cleanArray:function(n,t,e){const o=[];if(!t&&e)return n;for(let c=0;c<n.length;c+=1){let i=n[c];t&&(i===!!i?i=+i:i&&typeof i.trim=="function"&&(i=i.trim())),(e||i!=null&&i.length)&&o.push(i)}return o},isTrue:function(n){return n==="true"||+n==1},isFalse:function(n){return n==="false"||+n==0},readValue:function(n){let t=!f.isFalse(n.data("empty"));const e=!f.isFalse(n.data("trim")),o=n.data("split"),c=m(n,"get");let i;if(c!=null)return c.call(r,n,e,t);if(o!=null){t=f.isTrue(n.data("empty")),i=n.val();const g=i!=null&&i.split(o||",")||[];return f.cleanArray(g,e,t)}if(i=n.val(),e&&i!=null&&typeof i.trim=="function"&&(i=i.trim()),t||i!==void 0&&(i==null||i.length!==0))return i},fillField:function(n,t){const e=m(n,"set");let o=n.data("trim");if(o=o!=="false"&&+o!=0,e!=null)return e.call(r,n,t,o);t instanceof Array&&(t=t.join(n.data("split")||(o?", ":","))),o&&t&&typeof t.trim=="function"?(t=t.trim(),typeof t.toString=="function"&&(t=t.toString())):t!=null?(typeof t.toString=="function"&&(t=t.toString()),o&&(t=t.trim())):t="",t!==void 0&&n.val(t)},initFields:function(n){$("[data-key]",n).each(function(t,e){e=$(e);const o=m(e,"init"),c=e.data("key").split(".");let i=r.get();o?.call(r,e);for(let g=0;g<c.length;g+=1){const a=c[g];a&&i!=null&&(i=i[a])}f.fillField(e,i)})},registerReadyJobs:function(n){return R+=n,R},beforeReadyJobsDecreased:function(n){if(n==null&&(n=1),R>0&&(R-=n,R<=0)){for(let t=0;t<h.length;t+=1)h[t]();h=[]}},whenReady:function(n){R<=0?n():h.push(n)},serializeForm:function(n){const t=n.serializeObject();return n.find('input[type="checkbox"]').each(function(e,o){o=$(o),o.is(":checked")||(t[o.attr("name")]="off")}),n.find("select[multiple]").each(function(e,o){o=$(o),t[o.attr("name")]=JSON.stringify(o.val())}),t},persistSettings:function(n,t,e,o){t!=null&&t._!=null&&typeof t._!="string"&&(t=f.deepClone(t),t._=JSON.stringify(t._)),socket.emit("admin.settings.set",{hash:n,values:t},function(c){e&&(c?d.alert({title:"[[admin/admin:changes-not-saved]]",type:"danger",message:`[[admin/admin/changes-not-saved-message, ${c.message}]]`,timeout:5e3}):d.alert({title:"[[admin/admin:changes-saved]]",type:"success",message:"[[admin/admin:changes-saved-message]]",timeout:2500})),typeof o=="function"&&o(c)})},use:function(n){try{n._=JSON.parse(n._)}catch{}r.cfg=n}},r={helper:f,plugins:{},cfg:{},get:function(){return r.cfg!=null&&r.cfg._!==void 0?r.cfg._:r.cfg},registerPlugin:function(n,t){t==null?t=n.types:n.types=t,typeof n.use=="function"&&n.use.call(r);for(let e=0;e<t.length;e+=1){const o=t[e].toLowerCase();r.plugins[o]==null&&(r.plugins[o]=n)}},set:function(n,t,e,o,c){c==null&&(c=!0),f.whenReady(function(){f.use(t),f.initFields(e||"form"),f.persistSettings(n,t,c,o)})},sync:function(n,t,e){socket.emit("admin.settings.get",{hash:n},function(o,c){o?typeof e=="function"&&e(o):f.whenReady(function(){f.use(c),f.initFields(t||"form"),typeof e=="function"&&e()})})},persist:function(n,t,e,o){const c=[],i=$("[data-key]",t||"form").toArray();o==null&&(o=!0);for(let g=0;g<i.length;g+=1){const a=$(i[g]),y=f.readValue(a);let l=r.get();const S=a.data("key").split("."),D=S[S.length-1];if(S.length>1)for(let v=0;v<S.length-1;v+=1){const F=S[v];F&&l!=null&&(l=l[F])}l!=null?y!=null?l[D]=y:delete l[D]:c.push(a.data("key"))}c.length&&d.alert({title:"Attributes Not Saved",message:"'"+c.join(", ")+"' could not be saved. Please contact the plugin-author!",type:"danger",timeout:5e3}),f.persistSettings(n,r.cfg,o,e)},load:function(n,t,e){e=e||function(){};const o=t.attr("data-socket-get");socket.emit(o||"admin.settings.get",{hash:n},function(c,i){if(c)return e(c);$(t).find("select[multiple]").each(function(a,y){const l=$(y).attr("name");if(l&&i.hasOwnProperty(l))try{i[l]=JSON.parse(i[l])}catch{}}),ajaxify.data[o?n:"settings"]=i,f.whenReady(function(){$(t).find("[data-sorted-list]").each(function(a,y){m(y,"get").call(r,$(y),n)})}),$(t).deserialize(i),$(t).find('input[type="checkbox"]').each(function(){$(this).parents(".mdl-switch").toggleClass("is-checked",$(this).is(":checked"))}),s.fire("action:admin.settingsLoaded"),$(t).on("change","input, select, textarea",function(){app.flags=app.flags||{},app.flags._unsaved=!0});const g=document.getElementById("save");g&&u.e(2441).then(function(){var a=[u(42441)];(function(y){y.bind("ctrl+s",function(l){g.click(),l.preventDefault()})}).apply(null,a)}).catch(u.oe),e(null,i)})},save:function(n,t,e){t=$(t);const o=t.get(0).elements;if(r.check(o)&&t.length){const i=f.serializeForm(t);f.whenReady(function(){const a=t.find("[data-sorted-list]");a.length&&a.each((y,l)=>{m(l,"set").call(r,$(l),i)})});const g=t.attr("data-socket-set");socket.emit(g||"admin.settings.set",{hash:n,values:i},function(a){app.flags._unsaved=!1,ajaxify.data[g?n:"settings"]=i,typeof e=="function"?e(a):a?d.alert({title:"[[admin/admin:changes-not-saved]]",message:`[[admin/admin:changes-not-saved-message, ${a.message}]]`,type:"error",timeout:2500}):d.alert({title:"[[admin/admin:changes-saved]]",type:"success",timeout:2500})})}},check:function(n){const t=e=>{const o=e.target.closest(".form-group");o&&o.classList.add("has-error"),e.target.removeEventListener("invalid",t)};return Array.prototype.map.call(n,e=>{const o=e.closest(".form-group");return o&&o.classList.remove("has-error"),e.addEventListener("invalid",t),e.reportValidity()}).every(Boolean)}},f.registerReadyJobs(1),Promise.all([u.e(6177),u.e(2526),u.e(6069)]).then(function(){var n=[u(16631),u(73143),u(7448),u(15101),u(846),u(88839),u(53411),u(66370)];(function(){for(let t=0;t<arguments.length;t+=1)r.registerPlugin(arguments[t]);f.beforeReadyJobsDecreased()}).apply(null,n)}).catch(u.oe),r}.apply(C,A),p!==void 0&&(k.exports=p)}}]);

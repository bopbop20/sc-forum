(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[4783],{23560:(ot,Ve,le)=>{var Be,He;Be=[le(19755),le(74344),le(40646),le(32230)],He=function(yt,x,ke,Qe){"use strict";function $e(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var We=$e(yt),Le=$e(x),V=ajaxify;function T(){}function oe(t,e){for(const n in e)t[n]=e[n];return t}function Ne(t){return t&&typeof t=="object"&&typeof t.then=="function"}function qe(t){return t()}function Ge(){return Object.create(null)}function Ae(t){t.forEach(qe)}function Je(t){return typeof t=="function"}function De(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ce(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode.removeChild(t)}function de(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function fe(t){return document.createTextNode(t)}function L(){return fe(" ")}function Me(){return fe("")}function U(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function on(t){return Array.from(t.childNodes)}function Ze(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function je(t,e){t.value=e??""}function an(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function Pe(t,e,n){t.classList[n?"add":"remove"](e)}function un(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}class Et{constructor(e=null){this.a=e,this.e=this.n=null}m(e,n,i=null){this.e||(this.e=m(n.nodeName),this.t=n,this.h(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)w(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}let xe;function Re(t){xe=t}function at(){if(!xe)throw new Error("Function called outside component initialization");return xe}function cn(t){at().$$.on_mount.push(t)}function wt(){const t=at();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=un(e,n);i.slice().forEach(s=>{s.call(t,r)})}}}const Ke=[],Te=[],et=[],ut=[],dn=Promise.resolve();let ct=!1;function fn(){ct||(ct=!0,dn.then(pt))}function dt(t){et.push(t)}function ft(t){ut.push(t)}let ht=!1;const mt=new Set;function pt(){if(!ht){ht=!0;do{for(let t=0;t<Ke.length;t+=1){const e=Ke[t];Re(e),hn(e.$$)}for(Re(null),Ke.length=0;Te.length;)Te.pop()();for(let t=0;t<et.length;t+=1){const e=et[t];mt.has(e)||(mt.add(e),e())}et.length=0}while(Ke.length);for(;ut.length;)ut.pop()();ct=!1,ht=!1,mt.clear()}}function hn(t){if(t.fragment!==null){t.update(),Ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(dt)}}const tt=new Set;let ze;function nt(){ze={r:0,c:[],p:ze}}function it(){ze.r||Ae(ze.c),ze=ze.p}function J(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function ne(t,e,n,i){if(t&&t.o){if(tt.has(t))return;tt.add(t),ze.c.push(()=>{tt.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}function st(t,e){const n=e.token={};function i(r,s,l,o){if(e.token!==n)return;e.resolved=o;let a=e.ctx;l!==void 0&&(a=a.slice(),a[l]=o);const u=r&&(e.current=r)(a);let d=!1;e.block&&(e.blocks?e.blocks.forEach((p,h)=>{h!==s&&p&&(nt(),ne(p,1,1,()=>{e.blocks[h]===p&&(e.blocks[h]=null)}),it())}):e.block.d(1),u.c(),J(u,1),u.m(e.mount(),e.anchor),d=!0),e.block=u,e.blocks&&(e.blocks[s]=u),d&&pt()}if(Ne(t)){const r=at();if(t.then(s=>{Re(r),i(e.then,1,e.value,s),Re(null)},s=>{if(Re(r),i(e.catch,2,e.error,s),Re(null),!e.hasCatch)throw s}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function Ct(t,e){ne(t,1,1,()=>{e.delete(t.key)})}function kt(t,e,n,i,r,s,l,o,a,u,d,p){let h=t.length,_=s.length,v=h;const N={};for(;v--;)N[t[v].key]=v;const f=[],y=new Map,k=new Map;for(v=_;v--;){const M=p(r,s,v),R=n(M);let H=l.get(R);H?i&&H.p(M,e):(H=u(R,M),H.c()),y.set(R,f[v]=H),R in N&&k.set(R,Math.abs(v-N[R]))}const A=new Set,W=new Set;function j(M){J(M,1),M.m(o,d),l.set(M.key,M),d=M.first,_--}for(;h&&_;){const M=f[_-1],R=t[h-1],H=M.key,B=R.key;M===R?(d=M.first,h--,_--):y.has(B)?!l.has(H)||A.has(H)?j(M):W.has(B)?h--:k.get(H)>k.get(B)?(W.add(H),j(M)):(A.add(B),h--):(a(R,l),h--)}for(;h--;){const M=t[h];y.has(M.key)||a(M,l)}for(;_;)j(f[_-1]);return f}function At(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const l=t[s],o=e[s];if(o){for(const a in l)a in o||(i[a]=1);for(const a in o)r[a]||(n[a]=o[a],r[a]=1);t[s]=o}else for(const a in l)r[a]=1}for(const l in i)l in n||(n[l]=void 0);return n}function jt(t){return typeof t=="object"&&t!==null?t:{}}function gt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Ie(t){t&&t.c()}function be(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:l,after_update:o}=t.$$;r&&r.m(e,n),i||dt(()=>{const a=s.map(qe).filter(Je);l?l.push(...a):Ae(a),t.$$.on_mount=[]}),o.forEach(dt)}function ye(t,e){const n=t.$$;n.fragment!==null&&(Ae(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mn(t,e){t.$$.dirty[0]===-1&&(Ke.push(t),fn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Fe(t,e,n,i,r,s,l=[-1]){const o=xe;Re(t);const a=t.$$={fragment:null,ctx:null,props:s,update:T,not_equal:r,bound:Ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o?o.$$.context:[]),callbacks:Ge(),dirty:l,skip_bound:!1};let u=!1;if(a.ctx=n?n(t,e.props||{},(d,p,...h)=>{const _=h.length?h[0]:p;return a.ctx&&r(a.ctx[d],a.ctx[d]=_)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](_),u&&mn(t,d)),p}):[],a.update(),u=!0,Ae(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const d=on(e.target);a.fragment&&a.fragment.l(d),d.forEach(C)}else a.fragment&&a.fragment.c();e.intro&&J(t.$$.fragment),be(t,e.target,e.anchor,e.customElement),pt()}Re(o)}class Ue{$destroy(){ye(this,1),this.$destroy=T}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!ce(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Oe=app,lt=config,pn=utils;function It(t,e,n){const i=t.slice();return i[36]=e[n],i}function Lt(t,e,n){const i=t.slice();return i[36]=e[n],i}function Nt(t){let e,n=t[36]+"",i,r,s,l;function o(){return t[32](t[36])}return{c(){e=m("button"),i=fe(n),r=fe(" x"),g(e,"class","btn btn-info btn-xs")},m(a,u){w(a,e,u),c(e,i),c(e,r),s||(l=U(e,"click",o),s=!0)},p(a,u){t=a,u[0]&4&&n!==(n=t[36]+"")&&Ze(i,n)},d(a){a&&C(e),s=!1,l()}}}function Ot(t){let e,n=t[36]+"",i,r,s,l;function o(){return t[34](t[36])}return{c(){e=m("button"),i=fe(n),r=fe(" x"),g(e,"class","btn btn-info btn-xs")},m(a,u){w(a,e,u),c(e,i),c(e,r),s||(l=U(e,"click",o),s=!0)},p(a,u){t=a,u[0]&8&&n!==(n=t[36]+"")&&Ze(i,n)},d(a){a&&C(e),s=!1,l()}}}function gn(t){let e,n,i,r,s;return{c(){e=m("button"),n=m("i"),g(n,"class","fa fa-trash"),g(e,"class","btn btn-warning"),g(e,"type","button"),e.disabled=i=t[12]||t[13]},m(l,o){w(l,e,o),c(e,n),r||(s=U(e,"click",t[21]),r=!0)},p(l,o){o[0]&12288&&i!==(i=l[12]||l[13])&&(e.disabled=i)},d(l){l&&C(e),r=!1,s()}}}function _n(t){let e,n,i,r,s;return{c(){e=m("button"),n=m("i"),g(n,"class","fa fa-check"),g(e,"class","btn btn-success"),g(e,"type","button"),e.disabled=i=!t[11]},m(l,o){w(l,e,o),c(e,n),r||(s=U(e,"click",t[20]),r=!0)},p(l,o){o[0]&2048&&i!==(i=!l[11])&&(e.disabled=i)},d(l){l&&C(e),r=!1,s()}}}function Tt(t){let e,n,i,r,s,l,o,a,u,d,p,h;return{c(){e=m("tr"),n=m("td"),i=m("button"),r=fe("Cancel"),s=L(),l=m("td"),l.innerHTML='<span class="help-block">Are you sure you want to delete this emoji?</span>',o=L(),a=m("td"),u=m("button"),d=fe("Yes"),g(i,"class","btn btn-default"),g(i,"type","button"),i.disabled=t[13],g(l,"colspan",3),g(u,"class","btn btn-danger"),g(u,"type","button"),u.disabled=t[13],g(e,"class","svelte-11gdgpc"),Pe(e,"fadeout",t[13])},m(_,v){w(_,e,v),c(e,n),c(n,i),c(i,r),c(e,s),c(e,l),c(e,o),c(e,a),c(a,u),c(u,d),p||(h=[U(i,"click",t[23]),U(u,"click",t[22])],p=!0)},p(_,v){v[0]&8192&&(i.disabled=_[13]),v[0]&8192&&(u.disabled=_[13]),v[0]&8192&&Pe(e,"fadeout",_[13])},d(_){_&&C(e),p=!1,Ae(h)}}}function St(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> is required</span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function Dt(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Image</strong> is required</span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function Mt(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function Pt(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function vn(t){let e,n,i,r,s,l,o=ke.buildEmoji({character:"",pack:"customizations",keywords:[],name:t[0],aliases:t[2],image:t[1]})+"",a,u,d,p,h,_,v,N,f,y,k,A,W,j,M,R,H,B,me,Z,G,pe,ee,ie,ge,ae,S,q,Y,z,I,D,ve,ue=t[2],Q=[];for(let E=0;E<ue.length;E+=1)Q[E]=Nt(Lt(t,ue,E));let te=t[3],K=[];for(let E=0;E<te.length;E+=1)K[E]=Ot(It(t,te,E));function _e(E,X){return E[5]||E[18]?_n:gn}let re=_e(t),b=re(t),P=(t[12]||t[13])&&Tt(t),O=t[5]&&t[6].nameRequired&&St(),se=t[5]&&t[6].imageRequired&&Dt(),we=t[5]&&t[6].nameInvalid&&Mt(),Ce=t[5]&&t[6].aliasInvalid&&Pt();return{c(){e=m("tr"),n=m("td"),i=m("input"),r=L(),s=m("td"),l=m("button"),a=L(),u=m("form"),d=m("input"),p=L(),h=m("input"),_=L(),v=m("td"),N=m("div"),f=m("input"),y=L(),k=m("div"),A=m("button"),A.textContent="+",W=L(),j=m("span");for(let E=0;E<Q.length;E+=1)Q[E].c();M=L(),R=m("td"),H=m("div"),B=m("input"),me=L(),Z=m("div"),G=m("button"),G.textContent="+",pe=L(),ee=m("span");for(let E=0;E<K.length;E+=1)K[E].c();ie=L(),ge=m("td"),b.c(),ae=L(),P&&P.c(),S=L(),O&&O.c(),q=L(),se&&se.c(),Y=L(),we&&we.c(),z=L(),Ce&&Ce.c(),I=Me(),g(i,"type","text"),g(i,"class","form-control emoji-name svelte-11gdgpc"),g(l,"type","button"),g(l,"class","btn btn-default"),g(d,"type","file"),g(d,"name","emojiImage"),g(d,"accept","image/*"),g(h,"type","hidden"),g(h,"name","fileName"),g(u,"action",`${lt.relative_path}/api/admin/plugins/emoji/upload`),g(u,"method","post"),g(u,"enctype","multipart/form-data"),an(u,"display","none"),g(f,"type","text"),g(f,"class","form-control"),g(A,"class","btn btn-default"),g(k,"class","input-group-addon"),g(N,"class","input-group"),g(B,"type","text"),g(B,"class","form-control"),g(G,"class","btn btn-default"),g(Z,"class","input-group-addon"),g(H,"class","input-group"),g(e,"class","svelte-11gdgpc"),Pe(e,"fadeout",t[13])},m(E,X){w(E,e,X),c(e,n),c(n,i),je(i,t[0]),c(e,r),c(e,s),c(s,l),l.innerHTML=o,c(s,a),c(s,u),c(u,d),t[28](d),c(u,p),c(u,h),t[29](h),t[30](u),c(e,_),c(e,v),c(v,N),c(N,f),je(f,t[4]),c(N,y),c(N,k),c(k,A),c(v,W),c(v,j);for(let F=0;F<Q.length;F+=1)Q[F].m(j,null);c(e,M),c(e,R),c(R,H),c(H,B),je(B,t[10]),c(H,me),c(H,Z),c(Z,G),c(R,pe),c(R,ee);for(let F=0;F<K.length;F+=1)K[F].m(ee,null);c(e,ie),c(e,ge),b.m(ge,null),w(E,ae,X),P&&P.m(E,X),w(E,S,X),O&&O.m(E,X),w(E,q,X),se&&se.m(E,X),w(E,Y,X),we&&we.m(E,X),w(E,z,X),Ce&&Ce.m(E,X),w(E,I,X),D||(ve=[U(i,"input",t[27]),U(l,"click",t[19]),U(f,"input",t[31]),U(A,"click",t[15]),U(B,"input",t[33]),U(G,"click",t[17])],D=!0)},p(E,X){if(X[0]&1&&i.value!==E[0]&&je(i,E[0]),X[0]&7&&o!==(o=ke.buildEmoji({character:"",pack:"customizations",keywords:[],name:E[0],aliases:E[2],image:E[1]})+"")&&(l.innerHTML=o),X[0]&16&&f.value!==E[4]&&je(f,E[4]),X[0]&16388){ue=E[2];let F;for(F=0;F<ue.length;F+=1){const Xe=Lt(E,ue,F);Q[F]?Q[F].p(Xe,X):(Q[F]=Nt(Xe),Q[F].c(),Q[F].m(j,null))}for(;F<Q.length;F+=1)Q[F].d(1);Q.length=ue.length}if(X[0]&1024&&B.value!==E[10]&&je(B,E[10]),X[0]&65544){te=E[3];let F;for(F=0;F<te.length;F+=1){const Xe=It(E,te,F);K[F]?K[F].p(Xe,X):(K[F]=Ot(Xe),K[F].c(),K[F].m(ee,null))}for(;F<K.length;F+=1)K[F].d(1);K.length=te.length}re===(re=_e(E))&&b?b.p(E,X):(b.d(1),b=re(E),b&&(b.c(),b.m(ge,null))),X[0]&8192&&Pe(e,"fadeout",E[13]),E[12]||E[13]?P?P.p(E,X):(P=Tt(E),P.c(),P.m(S.parentNode,S)):P&&(P.d(1),P=null),E[5]&&E[6].nameRequired?O||(O=St(),O.c(),O.m(q.parentNode,q)):O&&(O.d(1),O=null),E[5]&&E[6].imageRequired?se||(se=Dt(),se.c(),se.m(Y.parentNode,Y)):se&&(se.d(1),se=null),E[5]&&E[6].nameInvalid?we||(we=Mt(),we.c(),we.m(z.parentNode,z)):we&&(we.d(1),we=null),E[5]&&E[6].aliasInvalid?Ce||(Ce=Pt(),Ce.c(),Ce.m(I.parentNode,I)):Ce&&(Ce.d(1),Ce=null)},i:T,o:T,d(E){E&&C(e),t[28](null),t[29](null),t[30](null),de(Q,E),de(K,E),b.d(),E&&C(ae),P&&P.d(E),E&&C(S),O&&O.d(E),E&&C(q),se&&se.d(E),E&&C(Y),we&&we.d(E),E&&C(z),Ce&&Ce.d(E),E&&C(I),D=!1,Ae(ve)}}}const Rt=/[^a-z\-.+0-9_]/i;function _t(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)return t.every((n,i)=>_t(n,e[i]));if(Array.isArray(t)||Array.isArray(e))return!1;if(typeof t=="object"){const n=Object.keys(t);return Object.keys(e).length!==n.length?!1:n.every(i=>_t(t[i],e[i]))}return!1}function bn(t,e,n){let{emoji:i}=e,{id:r}=e,s=i.name,l=i.image,o=i.aliases.slice(),a=i.ascii.slice();function u(){n(0,s=i.name),n(1,l=i.image),n(2,o=i.aliases.slice()),n(3,a=i.ascii.slice())}let d,p,h,_="";function v(D){n(2,o=o.filter(ve=>ve!==D))}function N(){!_||o.includes(_)||(n(2,o=[...o,_]),n(4,_=""))}let f="";function y(D){n(3,a=a.filter(ve=>ve!==D))}function k(){!f||a.includes(f)||(n(3,a=[...a,f]),n(10,f=""))}const A=!i.name&&!i.image&&!i.aliases.length&&!i.ascii.length;let W=!1;const j={nameRequired:!1,imageRequired:!1,nameInvalid:!1,aliasInvalid:!1,any:!1};let M=!1;function R(){p.click(),jQuery(p).one("change",()=>{if(!p.files.length)return;const D=`${pn.generateUUID()}-${p.files[0].name}`;n(9,h.value=D,h),jQuery(d).ajaxSubmit({headers:{"x-csrf-token":lt.csrf_token},success:()=>{n(1,l=D),n(8,p.value="",p)},error:()=>{const ve=Error("Failed to upload file");console.error(ve),Oe.alertError(ve),n(8,p.value="",p)}})})}const H=wt();function B(){H("save",{id:r,emoji:{name:s,image:l,aliases:o,ascii:a}})}let me=!1,Z=!1;function G(){n(12,me=!0)}function pe(){n(12,me=!1),n(13,Z=!0),setTimeout(()=>{H("delete",{id:r})},250)}function ee(){n(12,me=!1)}function ie(){s=this.value,n(0,s)}function ge(D){Te[D?"unshift":"push"](()=>{p=D,n(8,p)})}function ae(D){Te[D?"unshift":"push"](()=>{h=D,n(9,h)})}function S(D){Te[D?"unshift":"push"](()=>{d=D,n(7,d)})}function q(){_=this.value,n(4,_)}const Y=D=>v(D);function z(){f=this.value,n(10,f)}const I=D=>y(D);return t.$$set=D=>{"emoji"in D&&n(24,i=D.emoji),"id"in D&&n(25,r=D.id)},t.$$.update=()=>{t.$$.dirty[0]&16777231&&n(5,W=!_t({name:s,image:l,aliases:o,ascii:a},i)),t.$$.dirty[0]&1&&n(6,j.nameRequired=!s,j),t.$$.dirty[0]&2&&n(6,j.imageRequired=!l,j),t.$$.dirty[0]&1&&n(6,j.nameInvalid=Rt.test(s),j),t.$$.dirty[0]&16&&n(6,j.aliasInvalid=Rt.test(_),j),t.$$.dirty[0]&64&&n(6,j.any=j.nameRequired||j.imageRequired||j.nameInvalid||j.aliasInvalid,j),t.$$.dirty[0]&96&&n(11,M=W&&!j.any)},[s,l,o,a,_,W,j,d,p,h,f,M,me,Z,v,N,y,k,A,R,B,G,pe,ee,i,r,u,ie,ge,ae,S,q,Y,z,I]}class Ht extends Ue{constructor(e){super(),Fe(this,e,bn,vn,De,{emoji:24,id:25,reset:26},[-1,-1])}get reset(){return this.$$.ctx[26]}}function Wt(t,e,n){const i=t.slice();return i[9]=e[n],i}function zt(t,e){let n,i,r;const s=[e[9]];let l={};for(let o=0;o<s.length;o+=1)l=oe(l,s[o]);return i=new Ht({props:l}),i.$on("save",e[3]),i.$on("delete",e[4]),{key:t,first:null,c(){n=Me(),Ie(i.$$.fragment),this.first=n},m(o,a){w(o,n,a),be(i,o,a),r=!0},p(o,a){e=o;const u=a&1?At(s,[jt(e[9])]):{};i.$set(u)},i(o){r||(J(i.$$.fragment,o),r=!0)},o(o){ne(i.$$.fragment,o),r=!1},d(o){o&&C(n),ye(i,o)}}}function yn(t){let e,n,i,r,s=[],l=new Map,o,a,u,d,p,h=t[0];const _=f=>f[9].id;for(let f=0;f<h.length;f+=1){let y=Wt(t,h,f),k=_(y);l.set(k,s[f]=zt(k,y))}function v(f){t[7](f)}let N={id:-1,emoji:t[2]};return t[1]!==void 0&&(N.reset=t[1]),u=new Ht({props:N}),Te.push(()=>gt(u,"reset",v)),u.$on("save",t[5]),{c(){e=m("table"),n=m("thead"),n.innerHTML="<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>",i=L(),r=m("tbody");for(let f=0;f<s.length;f+=1)s[f].c();o=L(),a=m("tfoot"),Ie(u.$$.fragment),g(e,"class","table")},m(f,y){w(f,e,y),c(e,n),c(e,i),c(e,r);for(let k=0;k<s.length;k+=1)s[k].m(r,null);c(e,o),c(e,a),be(u,a,null),p=!0},p(f,[y]){y&25&&(h=f[0],nt(),s=kt(s,y,_,1,f,h,l,r,Ct,zt,null,Wt),it());const k={};y&4&&(k.emoji=f[2]),!d&&y&2&&(d=!0,k.reset=f[1],ft(()=>d=!1)),u.$set(k)},i(f){if(!p){for(let y=0;y<h.length;y+=1)J(s[y]);J(u.$$.fragment,f),p=!0}},o(f){for(let y=0;y<s.length;y+=1)ne(s[y]);ne(u.$$.fragment,f),p=!1},d(f){f&&C(e);for(let y=0;y<s.length;y+=1)s[y].d();ye(u)}}}function En(t,e,n){let{emojis:i}=e,r;function s(h){const{id:_,emoji:v}=h.detail;Le.default.put(`/admin/plugins/emoji/customizations/emoji/${_}`,{item:v}).then(()=>{n(6,i=Object.assign(Object.assign({},i),{[_]:v}))},()=>Oe.alertError())}function l(h){const{id:_}=h.detail;Le.default.del(`/admin/plugins/emoji/customizations/emoji/${_}`,{}).then(()=>{delete i[_],n(6,i=Object.assign({},i))},()=>Oe.alertError())}const o={name:"",image:"",aliases:[],ascii:[]};let a,u=Object.assign({},o);function d(h){const{emoji:_}=h.detail;Le.default.post("/admin/plugins/emoji/customizations/emoji",{item:_}).then(({id:v})=>{n(6,i=Object.assign(Object.assign({},i),{[v]:_})),n(2,u=Object.assign({},o)),a()},()=>Oe.alertError())}function p(h){a=h,n(1,a)}return t.$$set=h=>{"emojis"in h&&n(6,i=h.emojis)},t.$$.update=()=>{t.$$.dirty&64&&n(0,r=Object.keys(i).map(h=>({id:parseInt(h,10),emoji:i[h]})))},[r,a,u,s,l,d,i,p]}class wn extends Ue{constructor(e){super(),Fe(this,e,En,yn,De,{emojis:6})}}var Se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof le.g<"u"?le.g:typeof self<"u"?self:{};function Cn(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}function he(t){var e={exports:{}};return t(e,e.exports),e.exports}var rt=he(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(a,u,d){this.fn=a,this.context=u,this.once=d||!1}function s(a,u,d,p,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var _=new r(d,p||a,h),v=n?n+u:u;return a._events[v]?a._events[v].fn?a._events[v]=[a._events[v],_]:a._events[v].push(_):(a._events[v]=_,a._eventsCount++),a}function l(a,u){--a._eventsCount===0?a._events=new i:delete a._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)e.call(d,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,_=p.length,v=new Array(_);h<_;h++)v[h]=p[h].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,p=this._events[d];return p?p.fn?1:p.length:0},o.prototype.emit=function(u,d,p,h,_,v){var N=n?n+u:u;if(!this._events[N])return!1;var f=this._events[N],y=arguments.length,k,A;if(f.fn){switch(f.once&&this.removeListener(u,f.fn,void 0,!0),y){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,d),!0;case 3:return f.fn.call(f.context,d,p),!0;case 4:return f.fn.call(f.context,d,p,h),!0;case 5:return f.fn.call(f.context,d,p,h,_),!0;case 6:return f.fn.call(f.context,d,p,h,_,v),!0}for(A=1,k=new Array(y-1);A<y;A++)k[A-1]=arguments[A];f.fn.apply(f.context,k)}else{var W=f.length,j;for(A=0;A<W;A++)switch(f[A].once&&this.removeListener(u,f[A].fn,void 0,!0),y){case 1:f[A].fn.call(f[A].context);break;case 2:f[A].fn.call(f[A].context,d);break;case 3:f[A].fn.call(f[A].context,d,p);break;case 4:f[A].fn.call(f[A].context,d,p,h);break;default:if(!k)for(j=1,k=new Array(y-1);j<y;j++)k[j-1]=arguments[j];f[A].fn.apply(f[A].context,k)}}return!0},o.prototype.on=function(u,d,p){return s(this,u,d,p,!1)},o.prototype.once=function(u,d,p){return s(this,u,d,p,!0)},o.prototype.removeListener=function(u,d,p,h){var _=n?n+u:u;if(!this._events[_])return this;if(!d)return l(this,_),this;var v=this._events[_];if(v.fn)v.fn===d&&(!h||v.once)&&(!p||v.context===p)&&l(this,_);else{for(var N=0,f=[],y=v.length;N<y;N++)(v[N].fn!==d||h&&!v[N].once||p&&v[N].context!==p)&&f.push(v[N]);f.length?this._events[_]=f.length===1?f[0]:f:l(this,_)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&l(this,d)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}),Ft=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SearchResult=void 0;const n=/\$&/g,i=/\$(\d)/g;class r{constructor(l,o,a){this.data=l,this.term=o,this.strategy=a}getReplacementData(l){let o=this.strategy.replace(this.data);if(o==null)return null;let a="";Array.isArray(o)&&(a=o[1],o=o[0]);const u=this.strategy.match(l);if(u==null||u.index==null)return null;const d=o.replace(n,u[0]).replace(i,(p,h)=>u[parseInt(h)]);return{start:u.index,end:u.index+u[0].length,beforeCursor:d,afterCursor:a}}replace(l,o){const a=this.getReplacementData(l);if(a!==null)return o=a.afterCursor+o,[[l.slice(0,a.start),a.beforeCursor,l.slice(a.end)].join(""),o]}render(){return this.strategy.renderTemplate(this.data,this.term)}getStrategyId(){return this.strategy.getId()}}e.SearchResult=r}),Ut=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Strategy=e.DEFAULT_INDEX=void 0,e.DEFAULT_INDEX=1;class n{constructor(r){this.props=r,this.cache={}}destroy(){return this.cache={},this}replace(r){return this.props.replace(r)}execute(r,s){var l;const o=this.matchWithContext(r);if(!o)return!1;const a=o[(l=this.props.index)!==null&&l!==void 0?l:e.DEFAULT_INDEX];return this.search(a,u=>{s(u.map(d=>new Ft.SearchResult(d,a,this)))},o),!0}renderTemplate(r,s){if(this.props.template)return this.props.template(r,s);if(typeof r=="string")return r;throw new Error(`Unexpected render data type: ${typeof r}. Please implement template parameter by yourself`)}getId(){return this.props.id||null}match(r){return typeof this.props.match=="function"?this.props.match(r):r.match(this.props.match)}search(r,s,l){this.props.cache?this.searchWithCach(r,s,l):this.props.search(r,s,l)}matchWithContext(r){const s=this.context(r);return s===!1?null:this.match(s===!0?r:s)}context(r){return this.props.context?this.props.context(r):!0}searchWithCach(r,s,l){this.cache[r]!=null?s(this.cache[r]):this.props.search(r,o=>{this.cache[r]=o,s(o)},l)}}e.Strategy=n}),Bt=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Completer=void 0;class n extends rt.EventEmitter{constructor(r){super(),this.handleQueryResult=s=>{this.emit("hit",{searchResults:s})},this.strategies=r.map(s=>new Ut.Strategy(s))}destroy(){return this.strategies.forEach(r=>r.destroy()),this}run(r){for(const s of this.strategies)if(s.execute(r,this.handleQueryResult))return;this.handleQueryResult([])}}e.Completer=n}),Ee=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.createCustomEvent=void 0;const n=typeof window<"u"&&!!window.CustomEvent,i=(r,s)=>{if(n)return new CustomEvent(r,s);const l=document.createEvent("CustomEvent");return l.initCustomEvent(r,!1,s?.cancelable||!1,s?.detail||void 0),l};e.createCustomEvent=i}),Qt=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Dropdown=e.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=e.DEFAULT_DROPDOWN_ITEM_CLASS_NAME=e.DEFAULT_DROPDOWN_CLASS_NAME=e.DEFAULT_DROPDOWN_PLACEMENT=e.DEFAULT_DROPDOWN_MAX_COUNT=void 0,e.DEFAULT_DROPDOWN_MAX_COUNT=10,e.DEFAULT_DROPDOWN_PLACEMENT="auto",e.DEFAULT_DROPDOWN_CLASS_NAME="dropdown-menu textcomplete-dropdown",e.DEFAULT_DROPDOWN_ITEM_CLASS_NAME="textcomplete-item",e.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=`${e.DEFAULT_DROPDOWN_ITEM_CLASS_NAME} active`;class n extends rt.EventEmitter{constructor(s,l){super(),this.el=s,this.option=l,this.shown=!1,this.items=[],this.activeIndex=null}static create(s){const l=document.createElement("ul");l.className=s.className||e.DEFAULT_DROPDOWN_CLASS_NAME,Object.assign(l.style,{display:"none",position:"absolute",zIndex:"1000"},s.style);const o=s.parent||document.body;return o?.appendChild(l),new n(l,s)}render(s,l){const o=(0,Ee.createCustomEvent)("render",{cancelable:!0});return this.emit("render",o),o.defaultPrevented?this:(this.clear(),s.length===0?this.hide():(this.items=s.slice(0,this.option.maxCount||e.DEFAULT_DROPDOWN_MAX_COUNT).map((a,u)=>{var d;return new i(this,u,a,((d=this.option)===null||d===void 0?void 0:d.item)||{})}),this.setStrategyId(s[0]).renderEdge(s,"header").renderItems().renderEdge(s,"footer").show().setOffset(l).activate(0),this.emit("rendered",(0,Ee.createCustomEvent)("rendered")),this))}destroy(){var s;return this.clear(),(s=this.el.parentNode)===null||s===void 0||s.removeChild(this.el),this}select(s){const l={searchResult:s.searchResult},o=(0,Ee.createCustomEvent)("select",{cancelable:!0,detail:l});return this.emit("select",o),o.defaultPrevented?this:(this.hide(),this.emit("selected",(0,Ee.createCustomEvent)("selected",{detail:l})),this)}show(){if(!this.shown){const s=(0,Ee.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",s),s.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,Ee.createCustomEvent)("shown"))}return this}hide(){if(this.shown){const s=(0,Ee.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",s),s.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.clear(),this.emit("hidden",(0,Ee.createCustomEvent)("hidden"))}return this}clear(){return this.items.forEach(s=>s.destroy()),this.items=[],this.el.innerHTML="",this.activeIndex=null,this}up(s){return this.shown?this.moveActiveItem("prev",s):this}down(s){return this.shown?this.moveActiveItem("next",s):this}moveActiveItem(s,l){if(this.activeIndex!=null){const o=s==="next"?this.getNextActiveIndex():this.getPrevActiveIndex();o!=null&&(this.activate(o),l.preventDefault())}return this}activate(s){return this.activeIndex!==s&&(this.activeIndex!=null&&this.items[this.activeIndex].deactivate(),this.activeIndex=s,this.items[s].activate()),this}isShown(){return this.shown}getActiveItem(){return this.activeIndex!=null?this.items[this.activeIndex]:null}setOffset(s){const l=document.documentElement;if(l){const o=this.el.offsetWidth;if(s.left){const d=this.option.dynamicWidth?l.scrollWidth:l.clientWidth;s.left+o>d&&(s.left=d-o),this.el.style.left=`${s.left}px`}else s.right&&(s.right-o<0&&(s.right=0),this.el.style.right=`${s.right}px`);let a=!1;const u=this.option.placement||e.DEFAULT_DROPDOWN_PLACEMENT;if(u==="auto"){const d=this.items.length*s.lineHeight;a=s.clientTop!=null&&s.clientTop+d>l.clientHeight}u==="top"||a?(this.el.style.bottom=`${l.clientHeight-s.top+s.lineHeight}px`,this.el.style.top="auto"):(this.el.style.top=`${s.top}px`,this.el.style.bottom="auto")}return this}getNextActiveIndex(){if(this.activeIndex==null)throw new Error;return this.activeIndex<this.items.length-1?this.activeIndex+1:this.option.rotate?0:null}getPrevActiveIndex(){if(this.activeIndex==null)throw new Error;return this.activeIndex!==0?this.activeIndex-1:this.option.rotate?this.items.length-1:null}renderItems(){const s=document.createDocumentFragment();for(const l of this.items)s.appendChild(l.el);return this.el.appendChild(s),this}setStrategyId(s){const l=s.getStrategyId();return l&&(this.el.dataset.strategy=l),this}renderEdge(s,l){const o=this.option[l],a=document.createElement("li");return a.className=`textcomplete-${l}`,a.innerHTML=typeof o=="function"?o(s.map(u=>u.data)):o||"",this.el.appendChild(a),this}}e.Dropdown=n;class i{constructor(s,l,o,a){this.dropdown=s,this.index=l,this.searchResult=o,this.props=a,this.active=!1,this.onClick=p=>{p.preventDefault(),this.dropdown.select(this)},this.className=this.props.className||e.DEFAULT_DROPDOWN_ITEM_CLASS_NAME,this.activeClassName=this.props.activeClassName||e.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME;const u=document.createElement("li");u.className=this.active?this.activeClassName:this.className;const d=document.createElement("span");d.tabIndex=-1,d.innerHTML=this.searchResult.render(),u.appendChild(d),u.addEventListener("click",this.onClick),this.el=u}destroy(){var s;const l=this.el;return(s=l.parentNode)===null||s===void 0||s.removeChild(l),l.removeEventListener("click",this.onClick,!1),this}activate(){return this.active||(this.active=!0,this.el.className=this.activeClassName,this.dropdown.el.scrollTop=this.el.offsetTop),this}deactivate(){return this.active&&(this.active=!1,this.el.className=this.className),this}}}),kn=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;class n extends rt.EventEmitter{destroy(){return this}applySearchResult(r){throw new Error("Not implemented.")}getCursorOffset(){throw new Error("Not implemented.")}getBeforeCursor(){throw new Error("Not implemented.")}emitMoveEvent(r){const s=(0,Ee.createCustomEvent)("move",{cancelable:!0,detail:{code:r}});return this.emit("move",s),s}emitEnterEvent(){const r=(0,Ee.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",r),r}emitChangeEvent(){const r=(0,Ee.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",r),r}emitEscEvent(){const r=(0,Ee.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",r),r}getCode(r){return r.keyCode===9||r.keyCode===13?"ENTER":r.keyCode===27?"ESC":r.keyCode===38?"UP":r.keyCode===40||r.keyCode===78&&r.ctrlKey?"DOWN":r.keyCode===80&&r.ctrlKey?"UP":"OTHER"}}e.Editor=n}),An=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Textcomplete=void 0;const n=["show","shown","render","rendered","selected","hidden","hide"];class i extends rt.EventEmitter{constructor(s,l,o){super(),this.editor=s,this.isQueryInFlight=!1,this.nextPendingQuery=null,this.handleHit=({searchResults:a})=>{a.length?this.dropdown.render(a,this.editor.getCursorOffset()):this.dropdown.hide(),this.isQueryInFlight=!1,this.nextPendingQuery!==null&&this.trigger(this.nextPendingQuery)},this.handleMove=a=>{a.detail.code==="UP"?this.dropdown.up(a):this.dropdown.down(a)},this.handleEnter=a=>{const u=this.dropdown.getActiveItem();u?(this.dropdown.select(u),a.preventDefault()):this.dropdown.hide()},this.handleEsc=a=>{this.dropdown.isShown()&&(this.dropdown.hide(),a.preventDefault())},this.handleChange=a=>{a.detail.beforeCursor!=null?this.trigger(a.detail.beforeCursor):this.dropdown.hide()},this.handleSelect=a=>{this.emit("select",a),a.defaultPrevented||this.editor.applySearchResult(a.detail.searchResult)},this.handleResize=()=>{this.dropdown.isShown()&&this.dropdown.setOffset(this.editor.getCursorOffset())},this.completer=new Bt.Completer(l),this.dropdown=Qt.Dropdown.create(o?.dropdown||{}),this.startListening()}destroy(s=!0){return this.completer.destroy(),this.dropdown.destroy(),s&&this.editor.destroy(),this.stopListening(),this}isShown(){return this.dropdown.isShown()}hide(){return this.dropdown.hide(),this}trigger(s){return this.isQueryInFlight?this.nextPendingQuery=s:(this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(s)),this}startListening(){var s;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect);for(const l of n)this.dropdown.on(l,o=>this.emit(l,o));this.completer.on("hit",this.handleHit),(s=this.dropdown.el.ownerDocument.defaultView)===null||s===void 0||s.addEventListener("resize",this.handleResize)}stopListening(){var s;(s=this.dropdown.el.ownerDocument.defaultView)===null||s===void 0||s.removeEventListener("resize",this.handleResize),this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}e.Textcomplete=i}),vt=he(function(t,e){var n=Se&&Se.__createBinding||(Object.create?function(r,s,l,o){o===void 0&&(o=l);var a=Object.getOwnPropertyDescriptor(s,l);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(r,o,a)}:function(r,s,l,o){o===void 0&&(o=l),r[o]=s[l]}),i=Se&&Se.__exportStar||function(r,s){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&n(s,r,l)};Object.defineProperty(e,"__esModule",{value:!0}),i(Bt,e),i(Qt,e),i(kn,e),i(Ft,e),i(Ut,e),i(An,e),i(Ee,e)});function $t(t,e,n){const i=t.value,r=e+(n||""),s=document.activeElement;let l=0,o=0;for(;l<i.length&&l<r.length&&i[l]===r[l];)l++;for(;i.length-o-1>=0&&r.length-o-1>=0&&i[i.length-o-1]===r[r.length-o-1];)o++;l=Math.min(l,Math.min(i.length,r.length)-o),t.setSelectionRange(l,i.length-o);const a=r.substring(l,r.length-o);if(t.focus(),!document.execCommand("insertText",!1,a)){t.value=r;const u=document.createEvent("Event");u.initEvent("input",!0,!0),t.dispatchEvent(u)}return t.setSelectionRange(e.length,e.length),s.focus(),t}function jn(t,e,n){const i=t.selectionEnd,r=t.value.substr(0,t.selectionStart)+e,s=t.value.substring(t.selectionStart,i)+(n||"")+t.value.substr(i);return $t(t,r,s),t.selectionEnd=i+e.length,t}var In=Object.freeze({__proto__:null,update:$t,wrapCursor:jn}),Ln=he(function(t){(function(){var e=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n=typeof window<"u",i=n&&window.mozInnerScreenX!=null;function r(s,l,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var u=document.querySelector("#input-textarea-caret-position-mirror-div");u&&u.parentNode.removeChild(u)}var d=document.createElement("div");d.id="input-textarea-caret-position-mirror-div",document.body.appendChild(d);var p=d.style,h=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,_=s.nodeName==="INPUT";p.whiteSpace="pre-wrap",_||(p.wordWrap="break-word"),p.position="absolute",a||(p.visibility="hidden"),e.forEach(function(f){_&&f==="lineHeight"?p.lineHeight=h.height:p[f]=h[f]}),i?s.scrollHeight>parseInt(h.height)&&(p.overflowY="scroll"):p.overflow="hidden",d.textContent=s.value.substring(0,l),_&&(d.textContent=d.textContent.replace(/\s/g,"\xA0"));var v=document.createElement("span");v.textContent=s.value.substring(l)||".",d.appendChild(v);var N={top:v.offsetTop+parseInt(h.borderTopWidth),left:v.offsetLeft+parseInt(h.borderLeftWidth),height:parseInt(h.lineHeight)};return a?v.style.backgroundColor="#aaa":document.body.removeChild(d),N}t.exports=r})()}),Nn=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateElementOffset=void 0;const n=i=>{const r=i.getBoundingClientRect(),s=i.ownerDocument;if(s==null)throw new Error("Given element does not belong to document");const{defaultView:l,documentElement:o}=s;if(l==null)throw new Error("Given element does not belong to window");const a={top:r.top+l.pageYOffset,left:r.left+l.pageXOffset};return o&&(a.top-=o.clientTop,a.left-=o.clientLeft),a};e.calculateElementOffset=n}),On=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLineHeightPx=void 0;const n="0".charCodeAt(0),i="9".charCodeAt(0),r=o=>n<=o&&o<=i,s=o=>{const a=getComputedStyle(o),u=a.lineHeight;if(r(u.charCodeAt(0))){const d=parseFloat(u);return r(u.charCodeAt(u.length-1))?d*parseFloat(a.fontSize):d}return l(o.nodeName,a)};e.getLineHeightPx=s;const l=(o,a)=>{const u=document.body;if(!u)return 0;const d=document.createElement(o);d.innerHTML="&nbsp;",Object.assign(d.style,{fontSize:a.fontSize,fontFamily:a.fontFamily,padding:"0"}),u.appendChild(d),d instanceof HTMLTextAreaElement&&(d.rows=1);const p=d.offsetHeight;return u.removeChild(d),p}}),Tn=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isSafari=void 0;const n=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);e.isSafari=n}),Kt=he(function(t,e){var n=Se&&Se.__createBinding||(Object.create?function(r,s,l,o){o===void 0&&(o=l);var a=Object.getOwnPropertyDescriptor(s,l);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(r,o,a)}:function(r,s,l,o){o===void 0&&(o=l),r[o]=s[l]}),i=Se&&Se.__exportStar||function(r,s){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&n(s,r,l)};Object.defineProperty(e,"__esModule",{value:!0}),i(Nn,e),i(On,e),i(Tn,e)}),Sn=Cn(In),Dn=he(function(t,e){var n=Se&&Se.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaEditor=void 0;const i=n(Ln);class r extends vt.Editor{constructor(l){super(),this.el=l,this.onInput=()=>{this.emitChangeEvent()},this.onKeydown=o=>{const a=this.getCode(o);let u;a==="UP"||a==="DOWN"?u=this.emitMoveEvent(a):a==="ENTER"?u=this.emitEnterEvent():a==="ESC"&&(u=this.emitEscEvent()),u&&u.defaultPrevented&&o.preventDefault()},this.startListening()}destroy(){return super.destroy(),this.stopListening(),this}applySearchResult(l){const o=this.getBeforeCursor();if(o!=null){const a=l.replace(o,this.getAfterCursor());this.el.focus(),Array.isArray(a)&&((0,Sn.update)(this.el,a[0],a[1]),this.el&&this.el.dispatchEvent((0,vt.createCustomEvent)("input")))}}getCursorOffset(){const l=(0,Kt.calculateElementOffset)(this.el),o=this.getElScroll(),a=this.getCursorPosition(),u=(0,Kt.getLineHeightPx)(this.el),d=l.top-o.top+a.top+u,p=l.left-o.left+a.left,h=this.el.getBoundingClientRect().top;if(this.el.dir!=="rtl")return{top:d,left:p,lineHeight:u,clientTop:h};{const _=document.documentElement?document.documentElement.clientWidth-p:0;return{top:d,right:_,lineHeight:u,clientTop:h}}}getBeforeCursor(){return this.el.selectionStart!==this.el.selectionEnd?null:this.el.value.substring(0,this.el.selectionEnd)}getAfterCursor(){return this.el.value.substring(this.el.selectionEnd)}getElScroll(){return{top:this.el.scrollTop,left:this.el.scrollLeft}}getCursorPosition(){return(0,i.default)(this.el,this.el.selectionEnd)}startListening(){this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)}stopListening(){this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)}}e.TextareaEditor=r}),Mn=he(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaEditor=void 0,Object.defineProperty(e,"TextareaEditor",{enumerable:!0,get:function(){return Dn.TextareaEditor}})});function Yt(t,e,n){const i=t.slice();return i[31]=e[n],i}function Xt(t,e,n){const i=t.slice();return i[31]=e[n],i}function Vt(t){let e,n=ke.buildEmoji(t[10])+"",i;return{c(){i=Me(),e=new Et(i)},m(r,s){e.m(n,r,s),w(r,i,s)},p(r,s){s[0]&1024&&n!==(n=ke.buildEmoji(r[10])+"")&&e.p(n)},d(r){r&&C(i),r&&e.d()}}}function qt(t){let e,n=t[31]+"",i,r,s,l;function o(){return t[27](t[31])}return{c(){e=m("button"),i=fe(n),r=fe(" x"),g(e,"class","btn btn-info btn-xs")},m(a,u){w(a,e,u),c(e,i),c(e,r),s||(l=U(e,"click",o),s=!0)},p(a,u){t=a,u[0]&2&&n!==(n=t[31]+"")&&Ze(i,n)},d(a){a&&C(e),s=!1,l()}}}function Gt(t){let e,n=t[31]+"",i,r,s,l;function o(){return t[29](t[31])}return{c(){e=m("button"),i=fe(n),r=fe(" x"),g(e,"class","btn btn-info btn-xs")},m(a,u){w(a,e,u),c(e,i),c(e,r),s||(l=U(e,"click",o),s=!0)},p(a,u){t=a,u[0]&4&&n!==(n=t[31]+"")&&Ze(i,n)},d(a){a&&C(e),s=!1,l()}}}function Pn(t){let e,n,i,r,s;return{c(){e=m("button"),n=m("i"),g(n,"class","fa fa-trash"),g(e,"class","btn btn-warning"),g(e,"type","button"),e.disabled=i=t[8]||t[9]},m(l,o){w(l,e,o),c(e,n),r||(s=U(e,"click",t[18]),r=!0)},p(l,o){o[0]&768&&i!==(i=l[8]||l[9])&&(e.disabled=i)},d(l){l&&C(e),r=!1,s()}}}function Rn(t){let e,n,i,r,s;return{c(){e=m("button"),n=m("i"),g(n,"class","fa fa-check"),g(e,"class","btn btn-success"),g(e,"type","button"),e.disabled=i=!t[11]},m(l,o){w(l,e,o),c(e,n),r||(s=U(e,"click",t[17]),r=!0)},p(l,o){o[0]&2048&&i!==(i=!l[11])&&(e.disabled=i)},d(l){l&&C(e),r=!1,s()}}}function Jt(t){let e,n,i,r,s,l,o,a,u,d,p,h;return{c(){e=m("tr"),n=m("td"),i=m("button"),r=fe("Cancel"),s=L(),l=m("td"),l.innerHTML='<span class="help-block">Are you sure you want to delete this extension?</span>',o=L(),a=m("td"),u=m("button"),d=fe("Yes"),g(i,"class","btn btn-default"),g(i,"type","button"),i.disabled=t[9],g(l,"colspan",3),g(u,"class","btn btn-danger"),g(u,"type","button"),u.disabled=t[9],g(e,"class","svelte-11gdgpc"),Pe(e,"fadeout",t[9])},m(_,v){w(_,e,v),c(e,n),c(n,i),c(i,r),c(e,s),c(e,l),c(e,o),c(e,a),c(a,u),c(u,d),p||(h=[U(i,"click",t[20]),U(u,"click",t[19])],p=!0)},p(_,v){v[0]&512&&(i.disabled=_[9]),v[0]&512&&(u.disabled=_[9]),v[0]&512&&Pe(e,"fadeout",_[9])},d(_){_&&C(e),p=!1,Ae(h)}}}function Zt(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> is required</span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function xt(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> must be an existing emoji</span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function en(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function tn(t){let e;return{c(){e=m("tr"),e.innerHTML=`<td colspan="${5}"><span>Must provide at least one <strong>Alias</strong> or <strong>ASCII Pattern</strong>.</span></td>`,g(e,"class","text-danger svelte-11gdgpc")},m(n,i){w(n,e,i)},d(n){n&&C(e)}}}function Hn(t){let e,n,i,r,s,l,o,a,u,d,p,h,_,v,N,f,y,k,A,W,j,M,R,H,B,me,Z,G,pe,ee,ie,ge,ae,S=t[10]&&Vt(t),q=t[1],Y=[];for(let b=0;b<q.length;b+=1)Y[b]=qt(Xt(t,q,b));let z=t[2],I=[];for(let b=0;b<z.length;b+=1)I[b]=Gt(Yt(t,z,b));function D(b,P){return b[5]||b[12]?Rn:Pn}let ve=D(t),ue=ve(t),Q=(t[8]||t[9])&&Jt(t),te=t[5]&&t[4].nameRequired&&Zt(),K=t[5]&&t[4].nameInvalid&&xt(),_e=t[5]&&t[4].aliasInvalid&&en(),re=t[5]&&t[4].noChange&&tn();return{c(){e=m("tr"),n=m("td"),i=m("input"),r=L(),s=m("td"),S&&S.c(),l=L(),o=m("td"),a=m("div"),u=m("input"),d=L(),p=m("div"),h=m("button"),h.textContent="+",_=L(),v=m("span");for(let b=0;b<Y.length;b+=1)Y[b].c();N=L(),f=m("td"),y=m("div"),k=m("input"),A=L(),W=m("div"),j=m("button"),j.textContent="+",M=L(),R=m("span");for(let b=0;b<I.length;b+=1)I[b].c();H=L(),B=m("td"),ue.c(),me=L(),Q&&Q.c(),Z=L(),te&&te.c(),G=L(),K&&K.c(),pe=L(),_e&&_e.c(),ee=L(),re&&re.c(),ie=Me(),g(i,"type","text"),g(i,"class","form-control emoji-name svelte-11gdgpc"),g(u,"type","text"),g(u,"class","form-control"),g(h,"class","btn btn-default"),g(p,"class","input-group-addon"),g(a,"class","input-group"),g(k,"type","text"),g(k,"class","form-control"),g(j,"class","btn btn-default"),g(W,"class","input-group-addon"),g(y,"class","input-group"),g(e,"class","svelte-11gdgpc"),Pe(e,"fadeout",t[9])},m(b,P){w(b,e,P),c(e,n),c(n,i),je(i,t[0]),t[25](i),c(e,r),c(e,s),S&&S.m(s,null),c(e,l),c(e,o),c(o,a),c(a,u),je(u,t[3]),c(a,d),c(a,p),c(p,h),c(o,_),c(o,v);for(let O=0;O<Y.length;O+=1)Y[O].m(v,null);c(e,N),c(e,f),c(f,y),c(y,k),je(k,t[6]),c(y,A),c(y,W),c(W,j),c(f,M),c(f,R);for(let O=0;O<I.length;O+=1)I[O].m(R,null);c(e,H),c(e,B),ue.m(B,null),w(b,me,P),Q&&Q.m(b,P),w(b,Z,P),te&&te.m(b,P),w(b,G,P),K&&K.m(b,P),w(b,pe,P),_e&&_e.m(b,P),w(b,ee,P),re&&re.m(b,P),w(b,ie,P),ge||(ae=[U(i,"input",t[24]),U(u,"input",t[26]),U(h,"click",t[14]),U(k,"input",t[28]),U(j,"click",t[16])],ge=!0)},p(b,P){if(P[0]&1&&i.value!==b[0]&&je(i,b[0]),b[10]?S?S.p(b,P):(S=Vt(b),S.c(),S.m(s,null)):S&&(S.d(1),S=null),P[0]&8&&u.value!==b[3]&&je(u,b[3]),P[0]&8194){q=b[1];let O;for(O=0;O<q.length;O+=1){const se=Xt(b,q,O);Y[O]?Y[O].p(se,P):(Y[O]=qt(se),Y[O].c(),Y[O].m(v,null))}for(;O<Y.length;O+=1)Y[O].d(1);Y.length=q.length}if(P[0]&64&&k.value!==b[6]&&je(k,b[6]),P[0]&32772){z=b[2];let O;for(O=0;O<z.length;O+=1){const se=Yt(b,z,O);I[O]?I[O].p(se,P):(I[O]=Gt(se),I[O].c(),I[O].m(R,null))}for(;O<I.length;O+=1)I[O].d(1);I.length=z.length}ve===(ve=D(b))&&ue?ue.p(b,P):(ue.d(1),ue=ve(b),ue&&(ue.c(),ue.m(B,null))),P[0]&512&&Pe(e,"fadeout",b[9]),b[8]||b[9]?Q?Q.p(b,P):(Q=Jt(b),Q.c(),Q.m(Z.parentNode,Z)):Q&&(Q.d(1),Q=null),b[5]&&b[4].nameRequired?te||(te=Zt(),te.c(),te.m(G.parentNode,G)):te&&(te.d(1),te=null),b[5]&&b[4].nameInvalid?K||(K=xt(),K.c(),K.m(pe.parentNode,pe)):K&&(K.d(1),K=null),b[5]&&b[4].aliasInvalid?_e||(_e=en(),_e.c(),_e.m(ee.parentNode,ee)):_e&&(_e.d(1),_e=null),b[5]&&b[4].noChange?re||(re=tn(),re.c(),re.m(ie.parentNode,ie)):re&&(re.d(1),re=null)},i:T,o:T,d(b){b&&C(e),t[25](null),S&&S.d(),de(Y,b),de(I,b),ue.d(),b&&C(me),Q&&Q.d(b),b&&C(Z),te&&te.d(b),b&&C(G),K&&K.d(b),b&&C(pe),_e&&_e.d(b),b&&C(ee),re&&re.d(b),b&&C(ie),ge=!1,Ae(ae)}}}const Wn=/[^a-z\-.+0-9_]/i;function bt(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)return t.every((n,i)=>bt(n,e[i]));if(Array.isArray(t)||Array.isArray(e))return!1;if(typeof t=="object"){const n=Object.keys(t);return Object.keys(e).length!==n.length?!1:n.every(i=>bt(t[i],e[i]))}return!1}function zn(t,e,n){let i,r,s,{item:l}=e,{id:o}=e,a=l.name,u=l.aliases.slice(),d=l.ascii.slice();function p(){n(0,a=l.name),n(1,u=l.aliases.slice()),n(2,d=l.ascii.slice())}const h=!l.name&&!l.aliases.length&&!l.ascii.length;let _="";function v(S){n(1,u=u.filter(q=>q!==S))}function N(){!_||u.includes(_)||(n(1,u=[...u,_]),n(3,_=""))}let f="";function y(S){n(2,d=d.filter(q=>q!==S))}function k(){!f||d.includes(f)||(n(2,d=[...d,f]),n(6,f=""))}const A={nameRequired:!1,nameInvalid:!1,aliasInvalid:!1,noChange:!1,any:!1};let W;cn(()=>{const S=new Mn.TextareaEditor(W);new vt.Textcomplete(S,[Object.assign(Object.assign({},ke.strategy),{replace:Y=>Y.name,match:/^(.+)$/})],{dropdown:{style:{zIndex:2e4}}}).on("selected",()=>{n(0,a=W.value)})});const j=wt();function M(){j("save",{id:o,item:{name:a,aliases:u,ascii:d}})}let R=!1,H=!1;function B(){n(8,R=!0)}function me(){n(8,R=!1),n(9,H=!0),setTimeout(()=>{j("delete",{id:o})},250)}function Z(){n(8,R=!1)}function G(){a=this.value,n(0,a)}function pe(S){Te[S?"unshift":"push"](()=>{W=S,n(7,W)})}function ee(){_=this.value,n(3,_)}const ie=S=>v(S);function ge(){f=this.value,n(6,f)}const ae=S=>y(S);return t.$$set=S=>{"item"in S&&n(21,l=S.item),"id"in S&&n(22,o=S.id)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(10,i=a&&ke.table[a]),t.$$.dirty[0]&2097159&&n(5,r=!bt({name:a,aliases:u,ascii:d},l)),t.$$.dirty[0]&1&&n(4,A.nameRequired=!a,A),t.$$.dirty[0]&1&&n(4,A.nameInvalid=!ke.table[a],A),t.$$.dirty[0]&8&&n(4,A.aliasInvalid=Wn.test(_),A),t.$$.dirty[0]&6&&n(4,A.noChange=!u.length&&!d.length,A),t.$$.dirty[0]&16&&n(4,A.any=A.nameRequired||A.nameInvalid||A.aliasInvalid||A.noChange,A),t.$$.dirty[0]&48&&n(11,s=r&&!A.any)},[a,u,d,_,A,r,f,W,R,H,i,s,h,v,N,y,k,M,B,me,Z,l,o,p,G,pe,ee,ie,ge,ae]}class nn extends Ue{constructor(e){super(),Fe(this,e,zn,Hn,De,{item:21,id:22,reset:23},[-1,-1])}get reset(){return this.$$.ctx[23]}}function sn(t,e,n){const i=t.slice();return i[10]=e[n],i}function ln(t,e){let n,i,r;const s=[e[10]];let l={};for(let o=0;o<s.length;o+=1)l=oe(l,s[o]);return i=new nn({props:l}),i.$on("save",e[3]),i.$on("delete",e[4]),{key:t,first:null,c(){n=Me(),Ie(i.$$.fragment),this.first=n},m(o,a){w(o,n,a),be(i,o,a),r=!0},p(o,a){e=o;const u=a&1?At(s,[jt(e[10])]):{};i.$set(u)},i(o){r||(J(i.$$.fragment,o),r=!0)},o(o){ne(i.$$.fragment,o),r=!1},d(o){o&&C(n),ye(i,o)}}}function Fn(t){let e,n,i,r,s=[],l=new Map,o,a,u,d,p,h=t[0];const _=f=>f[10].id;for(let f=0;f<h.length;f+=1){let y=sn(t,h,f),k=_(y);l.set(k,s[f]=ln(k,y))}function v(f){t[8](f)}let N={id:-1,item:t[2]};return t[1]!==void 0&&(N.reset=t[1]),u=new nn({props:N}),Te.push(()=>gt(u,"reset",v)),u.$on("save",t[5]),{c(){e=m("table"),n=m("thead"),n.innerHTML="<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>",i=L(),r=m("tbody");for(let f=0;f<s.length;f+=1)s[f].c();o=L(),a=m("tfoot"),Ie(u.$$.fragment),g(e,"class","table")},m(f,y){w(f,e,y),c(e,n),c(e,i),c(e,r);for(let k=0;k<s.length;k+=1)s[k].m(r,null);c(e,o),c(e,a),be(u,a,null),p=!0},p(f,[y]){y&25&&(h=f[0],nt(),s=kt(s,y,_,1,f,h,l,r,Ct,ln,null,sn),it());const k={};y&4&&(k.item=f[2]),!d&&y&2&&(d=!0,k.reset=f[1],ft(()=>d=!1)),u.$set(k)},i(f){if(!p){for(let y=0;y<h.length;y+=1)J(s[y]);J(u.$$.fragment,f),p=!0}},o(f){for(let y=0;y<s.length;y+=1)ne(s[y]);ne(u.$$.fragment,f),p=!1},d(f){f&&C(e);for(let y=0;y<s.length;y+=1)s[y].d();ye(u)}}}function Un(t,e,n){let{type:i="adjunct"}=e,{record:r}=e,s;function l(_){const{id:v,item:N}=_.detail;Le.default.put(`/admin/plugins/emoji/customizations/${i}/${v}`,{item:N}).then(()=>{n(6,r=Object.assign(Object.assign({},r),{[v]:N}))},()=>Oe.alertError())}function o(_){const{id:v}=_.detail;Le.default.del(`/admin/plugins/emoji/customizations/${i}/${v}`,{}).then(()=>{delete r[v],n(6,r=Object.assign({},r))},()=>Oe.alertError())}const a={name:"",aliases:[],ascii:[]};let u,d=Object.assign({},a);function p(_){const{item:v}=_.detail;Le.default.post(`/admin/plugins/emoji/customizations/${i}`,{item:v}).then(({id:N})=>{n(6,r=Object.assign(Object.assign({},r),{[N]:v})),n(2,d=Object.assign({},a)),u()},()=>Oe.alertError())}function h(_){u=_,n(1,u)}return t.$$set=_=>{"type"in _&&n(7,i=_.type),"record"in _&&n(6,r=_.record)},t.$$.update=()=>{t.$$.dirty&64&&n(0,s=Object.keys(r).map(_=>({id:parseInt(_,10),item:r[_]})))},[s,u,d,l,o,p,r,i,h]}class Bn extends Ue{constructor(e){super(),Fe(this,e,Un,Fn,De,{type:7,record:6})}}function Qn(t){let e,n,i,r,s,l,o,a,u,d,p,h,_,v,N,f,y,k,A,W;return h=new wn({props:{emojis:t[0].emojis}}),y=new Bn({props:{record:t[0].adjuncts}}),{c(){e=m("div"),n=m("div"),i=m("div"),r=m("div"),r.innerHTML=`<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xD7</button> 
        <h4 class="modal-title" id="editModalLabel">Customize Emoji</h4>`,s=L(),l=m("div"),o=m("p"),o.innerHTML=`Below you can add custom emoji, and also add new aliases
          and ASCII patterns for existing emoji. While this list is
          edited live, you must still <strong>Build Emoji Assets</strong>
          to actually use these customizations.`,a=L(),u=m("div"),d=m("div"),d.innerHTML='<h3 class="panel-title">Custom Emoji</h3>',p=L(),Ie(h.$$.fragment),_=L(),v=m("div"),N=m("div"),N.innerHTML='<h3 class="panel-title">Custom Extensions</h3>',f=L(),Ie(y.$$.fragment),k=L(),A=m("link"),g(r,"class","modal-header"),g(d,"class","panel-heading"),g(u,"class","panel panel-default"),g(N,"class","panel-heading"),g(v,"class","panel panel-default"),g(l,"class","modal-body"),g(i,"class","modal-content"),g(n,"class","modal-dialog modal-lg"),g(e,"class","modal fade"),g(e,"tabindex","-1"),g(e,"role","dialog"),g(e,"aria-labelledby","editModalLabel"),g(e,"aria-hidden","true"),g(A,"rel","stylesheet"),g(A,"href",`${lt.assetBaseUrl}/plugins/nodebb-plugin-emoji/emoji/styles.css?${lt["cache-buster"]}`)},m(j,M){w(j,e,M),c(e,n),c(n,i),c(i,r),c(i,s),c(i,l),c(l,o),c(l,a),c(l,u),c(u,d),c(u,p),be(h,u,null),c(l,_),c(l,v),c(v,N),c(v,f),be(y,v,null),t[3](e),w(j,k,M),c(document.head,A),W=!0},p(j,[M]){const R={};M&1&&(R.emojis=j[0].emojis),h.$set(R);const H={};M&1&&(H.record=j[0].adjuncts),y.$set(H)},i(j){W||(J(h.$$.fragment,j),J(y.$$.fragment,j),W=!0)},o(j){ne(h.$$.fragment,j),ne(y.$$.fragment,j),W=!1},d(j){j&&C(e),ye(h),ye(y),t[3](null),j&&C(k),C(A)}}}function $n(t,e,n){let{data:i}=e,r;function s(){We.default(r).modal("show")}function l(o){Te[o?"unshift":"push"](()=>{r=o,n(1,r)})}return t.$$set=o=>{"data"in o&&n(0,i=o.data)},[i,r,s,l]}class Kn extends Ue{constructor(e){super(),Fe(this,e,$n,Qn,De,{data:0,show:2})}get show(){return this.$$.ctx[2]}}function Yn(t){return{c:T,m:T,p:T,d:T}}function Xn(t){let e,n=t[2]+"",i;return{c(){i=Me(),e=new Et(i)},m(r,s){e.m(n,r,s),w(r,i,s)},p(r,s){s&1&&n!==(n=r[2]+"")&&e.p(n)},d(r){r&&C(i),r&&e.d()}}}function Vn(t){return{c:T,m:T,p:T,d:T}}function qn(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:Vn,then:Xn,catch:Yn,value:2};return st(n=t[1].translate(t[0]),i),{c(){e=Me(),i.block.c()},m(r,s){w(r,e,s),i.block.m(r,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e},p(r,[s]){if(t=r,i.ctx=t,!(s&1&&n!==(n=t[1].translate(t[0]))&&st(n,i))){const l=t.slice();l[2]=i.resolved,i.block.p(l,s)}},i:T,o:T,d(r){r&&C(e),i.block.d(r),i.token=null,i=null}}}function Gn(t,e,n){const i=Qe.Translator.create();let{src:r}=e;return t.$$set=s=>{"src"in s&&n(0,r=s.src)},[r,i]}class Ye extends Ue{constructor(e){super(),Fe(this,e,Gn,qn,De,{src:0})}}function rn(t){let e,n,i,r={ctx:t,current:null,token:null,hasCatch:!1,pending:xn,then:Zn,catch:Jn,value:11,blocks:[,,,]};return st(n=t[2],r),{c(){e=Me(),r.block.c()},m(s,l){w(s,e,l),r.block.m(s,r.anchor=l),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(s,l){if(t=s,r.ctx=t,!(l&4&&n!==(n=t[2])&&st(n,r))){const o=t.slice();o[11]=r.resolved,r.block.p(o,l)}},i(s){i||(J(r.block),i=!0)},o(s){for(let l=0;l<3;l+=1){const o=r.blocks[l];ne(o)}i=!1},d(s){s&&C(e),r.block.d(s),r.token=null,r=null}}}function Jn(t){return{c:T,m:T,p:T,i:T,o:T,d:T}}function Zn(t){let e,n,i;function r(l){t[9](l)}let s={data:t[11]};return t[1]!==void 0&&(s.show=t[1]),e=new Kn({props:s}),Te.push(()=>gt(e,"show",r)),{c(){Ie(e.$$.fragment)},m(l,o){be(e,l,o),i=!0},p(l,o){const a={};o&4&&(a.data=l[11]),!n&&o&2&&(n=!0,a.show=l[1],ft(()=>n=!1)),e.$set(a)},i(l){i||(J(e.$$.fragment,l),i=!0)},o(l){ne(e.$$.fragment,l),i=!1},d(l){ye(e,l)}}}function xn(t){return{c:T,m:T,p:T,i:T,o:T,d:T}}function ei(t){let e,n,i,r,s,l,o,a,u,d,p,h,_,v,N,f,y,k,A,W,j,M,R,H,B,me,Z,G,pe,ee,ie,ge,ae,S,q,Y;a=new Ye({props:{src:"[[admin/plugins/emoji:settings.parseAscii]]"}}),v=new Ye({props:{src:"[[admin/plugins/emoji:settings.parseNative]]"}}),W=new Ye({props:{src:"[[admin/plugins/emoji:settings.customFirst]]"}}),B=new Ye({props:{src:"[[admin/plugins/emoji:build]]"}}),G=new Ye({props:{src:"[[admin/plugins/emoji:build_description]]"}});let z=t[2]&&rn(t);return{c(){e=m("form"),n=m("div"),i=m("div"),r=m("div"),s=m("label"),l=m("input"),o=L(),Ie(a.$$.fragment),u=L(),d=m("div"),p=m("label"),h=m("input"),_=L(),Ie(v.$$.fragment),N=L(),f=m("div"),y=m("label"),k=m("input"),A=L(),Ie(W.$$.fragment),j=L(),M=m("div"),R=m("div"),H=m("button"),Ie(B.$$.fragment),me=L(),Z=m("p"),Ie(G.$$.fragment),pe=L(),z&&z.c(),ee=L(),ie=m("button"),ie.innerHTML='<i class="material-icons">save</i>',ge=L(),ae=m("button"),ae.innerHTML='<i class="material-icons">edit</i>',g(l,"id","emoji-parseAscii"),g(l,"type","checkbox"),g(s,"for","emoji-parseAscii"),g(r,"class","form-group"),g(h,"id","emoji-parseNative"),g(h,"type","checkbox"),g(p,"for","emoji-parseNative"),g(d,"class","form-group"),g(k,"id","emoji-customFirst"),g(k,"type","checkbox"),g(y,"for","emoji-customFirst"),g(f,"class","form-group"),g(i,"class","panel-body"),g(H,"type","button"),g(H,"class","btn btn-primary"),g(H,"aria-describedby","emoji-build_description"),g(Z,"id","emoji-build_description"),g(Z,"class","help-block"),g(R,"class","form-group"),g(M,"class","panel-footer"),g(n,"class","panel panel-default"),g(e,"id","emoji-settings"),g(ie,"class","floating-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"),g(ae,"class","edit floating-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored svelte-rv4t0s")},m(I,D){w(I,e,D),c(e,n),c(n,i),c(i,r),c(r,s),c(s,l),l.checked=t[0].parseAscii,c(s,o),be(a,s,null),c(i,u),c(i,d),c(d,p),c(p,h),h.checked=t[0].parseNative,c(p,_),be(v,p,null),c(i,N),c(i,f),c(f,y),c(y,k),k.checked=t[0].customFirst,c(y,A),be(W,y,null),c(n,j),c(n,M),c(M,R),c(R,H),be(B,H,null),c(R,me),c(R,Z),be(G,Z,null),w(I,pe,D),z&&z.m(I,D),w(I,ee,D),w(I,ie,D),w(I,ge,D),w(I,ae,D),S=!0,q||(Y=[U(l,"change",t[6]),U(h,"change",t[7]),U(k,"change",t[8]),U(H,"click",t[4]),U(ie,"click",t[3]),U(ae,"click",t[5])],q=!0)},p(I,[D]){D&1&&(l.checked=I[0].parseAscii),D&1&&(h.checked=I[0].parseNative),D&1&&(k.checked=I[0].customFirst),I[2]?z?(z.p(I,D),D&4&&J(z,1)):(z=rn(I),z.c(),J(z,1),z.m(ee.parentNode,ee)):z&&(nt(),ne(z,1,1,()=>{z=null}),it())},i(I){S||(J(a.$$.fragment,I),J(v.$$.fragment,I),J(W.$$.fragment,I),J(B.$$.fragment,I),J(G.$$.fragment,I),J(z),S=!0)},o(I){ne(a.$$.fragment,I),ne(v.$$.fragment,I),ne(W.$$.fragment,I),ne(B.$$.fragment,I),ne(G.$$.fragment,I),ne(z),S=!1},d(I){I&&C(e),ye(a),ye(v),ye(W),ye(B),ye(G),I&&C(pe),z&&z.d(I),I&&C(ee),I&&C(ie),I&&C(ge),I&&C(ae),q=!1,Ae(Y)}}}function ti(t,e,n){let{settings:i}=e;function r(){Le.default.put("/admin/plugins/emoji/settings",i).then(()=>Oe.alertSuccess(),v=>Oe.alertError(v))}function s(){Le.default.put("/admin/plugins/emoji/build",{}).then(()=>Oe.alertSuccess(),v=>Oe.alertError(v))}let l,o;function a(){return Le.default.get("/admin/plugins/emoji/customizations",{})}function u(){n(2,o=o||Promise.all([a(),ke.init()]).then(([v])=>v)),o.then(()=>setTimeout(()=>l(),0))}function d(){i.parseAscii=this.checked,n(0,i)}function p(){i.parseNative=this.checked,n(0,i)}function h(){i.customFirst=this.checked,n(0,i)}function _(v){l=v,n(1,l)}return t.$$set=v=>{"settings"in v&&n(0,i=v.settings)},[i,l,o,r,s,u,d,p,h,_]}class ni extends Ue{constructor(e){super(),Fe(this,e,ti,ei,De,{settings:0})}}We.default(window).on("action:ajaxify.end",()=>{V.data.template["admin/plugins/emoji"]&&new ni({target:document.getElementById("content"),props:{settings:V.data.settings}})})}.apply(Ve,Be),He!==void 0&&(ot.exports=He)},82938:(ot,Ve,le)=>{var Be,He;Be=[le,Ve],He=function(yt,x){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.init=x.strategy=x.search=x.table=x.buildEmoji=x.buster=x.base=void 0;var ke=config.assetBaseUrl+"/plugins/nodebb-plugin-emoji";x.base=ke;var Qe=config["cache-buster"];x.buster=Qe;function $e(V,T){var oe=":"+V.name+":",Ne=T?" defer":"";return V.image?`<img
      `+(T?"data-":"")+'src="'+ke+"/emoji/"+V.pack+"/"+V.image+"?"+Qe+`"
      class="not-responsive emoji emoji-`+V.pack+" emoji--"+V.name+" "+Ne+`"
      title="`+oe+`"
      alt="`+V.character+`"
    />`:`<span
    class="emoji-`+V.pack+" emoji--"+V.name+`"
    title="`+oe+`"
  ><span>`+V.character+"</span></span>"}x.buildEmoji=$e,x.strategy={match:/\B:([^\s\n:]+)$/,search:function(V,T){T(x.search(V.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(V){return":"+V.name+": "},template:function(V){return $e(V)+" "+V.name},cache:!0};var We;function Le(V){return We=We||Promise.all([new Promise(function(T,oe){le.e(2645).then(function(){var Ne=[le(91919)];T.apply(null,Ne)}.bind(this)).catch(oe.bind(this))}),new Promise(function(T,oe){le.e(320).then(function(){var Ne=[le(78726)];T.apply(null,Ne)}.bind(this)).catch(oe.bind(this))}),new Promise(function(T,oe){Promise.all([le.e(6177),le.e(2526),le.e(588)]).then(function(){var Ne=[le(45482)];T.apply(null,Ne)}.bind(this)).catch(oe.bind(this))}),$.getJSON(ke+"/emoji/table.json?"+Qe)]).then(function(T){var oe=T[0],Ne=T[1],qe=T[2],Ge=T[3];x.table=Ge;var Ae=Object.keys(x.table).map(function(ce){var c=x.table[ce];return{name:ce,aliases:c.aliases,keywords:c.keywords,character:c.character,image:c.image,pack:c.pack}});function Je(ce,c){for(var w=c.length,C=0;C<w;C+=1)if(oe(ce,c[C]))return c[C];return null}function De(ce){function c(w,C){var de=C*(1+Ne(ce,w));return w.startsWith(ce)?de-2:de}return Ae.filter(function(w){if(oe(ce,w.name))return w.score=c(w.name,1),!0;var C=Je(ce,w.aliases);if(C)return w.score=c(C,3),!0;var de=Je(ce,w.keywords);return de?(w.score=c(de,7),!0):!1}).sort(function(w,C){return w.score-C.score}).sort(function(w,C){var de=+w.name.startsWith(ce),m=+C.name.startsWith(ce);return m-de})}x.search=De,qe.addButtonDispatch("emoji-add-emoji",function(ce,c,w,C){new Promise(function(de,m){le.e(5400).then(function(){var fe=[le(6721)];de.apply(null,fe)}.bind(this)).catch(m.bind(this))}).then(function(de){var m=de.toggleForInsert;return m(ce,c,w,C)})})}).catch(function(T){var oe=Error("[[emoji:meta-load-failed]]");throw console.error(oe),app.alertError(oe),T}),V&&We.then(function(){return setTimeout(V,0)}),We}x.init=Le}.apply(Ve,Be),He!==void 0&&(ot.exports=He)}}]);
